<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  

  <channel>
    <title>MacRuby: Ticket Query</title>
    <link>http://www.macruby.org/trac/query?status=new&amp;status=reopened&amp;max=1000&amp;row=description</link>
    <description></description>
    <language>en-US</language>
    <image>
      <title>MacRuby</title>
      <url>http://www.macruby.org/trac/chrome/common/trac_banner.png</url>
      <link>http://www.macruby.org/trac/query?status=new&amp;status=reopened&amp;max=1000&amp;row=description</link>
    </image>
    <generator>Trac 0.11.7</generator>
    <item>
        <link>http://www.macruby.org/trac/ticket/19</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/19</guid>
        <title>#19: Problems with method_missing</title>
        <pubDate>Mon, 03 Mar 2008 06:08:05 GMT</pubDate>
          <dc:creator>vincent.isambart@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;~/tmp% cat e.rb
module Kernel
def method_missing(method_name, *args)
  puts "method #{method_name} missing"
  super
end
end
Object.new.unknown_method
~/tmp% ruby e.rb
method unknown_method missing
e.rb:4:in `method_missing': super: no superclass method `unknown_method' (NoMethodError)
	from e.rb:8
~/tmp% ruby-1.9 e.rb
method unknown_method missing
e.rb:4:in `method_missing': undefined method `unknown_method' for #&amp;lt;Object:0x0a25d0&amp;gt; (NoMethodError)
	from e.rb:8:in `&amp;lt;main&amp;gt;'
~/tmp% macruby e.rb
e.rb:8:in `&amp;lt;main&amp;gt;': undefined method `unknown_method' for #&amp;lt;Object:0x10af150&amp;gt; (NoMethodError)
&lt;/pre&gt;&lt;p&gt;
You can see that in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; the redefined method_missing function is not called.
&lt;/p&gt;
&lt;p&gt;
And if you replace "module Kernel" by "class NSObject", &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; crashes...
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/19#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/105</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/105</guid>
        <title>#105: BridgeSupport can't convert KCGSessionEventTap as an argument for CGEventTapCreate</title>
        <pubDate>Mon, 28 Jul 2008 02:52:13 GMT</pubDate>
          <dc:creator>juanger@…</dc:creator>
        <description>&lt;p&gt;
When running the following code:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;eventTap &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;CGEventTapCreate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;KCGSessionEventTap&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="no"&gt;KCGHeadInsertEventTap&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                               &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; eventMask&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="vi"&gt;@callback&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kp"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
It exits and displays the following error:
&lt;/p&gt;
&lt;pre class="wiki"&gt;`CGEventTapCreate': can't convert Ruby object `1' to Objective-C value of type `^{__CGEventTapProxy=}' (ArgumentError)
&lt;/pre&gt;&lt;p&gt;
Also, the callback function, passed as a lambda can't be converted.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/105#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/106</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/106</guid>
        <title>#106: Syntax error with Variadic function</title>
        <pubDate>Mon, 28 Jul 2008 08:24:52 GMT</pubDate>
          <dc:creator>byblue@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;&amp;gt;&amp;gt; CISampler.alloc.initWithImage(nil, keysAndValues:1, 2, 3)
SyntaxError: (irb):1: syntax error, unexpected ',', expecting tASSOC
CISampler.alloc.initWithImage(nil, keysAndValues:1, 2, 3)
                                                      ^
        from /usr/local/bin/macirb:12:in `&amp;lt;main&amp;gt;'
&lt;/pre&gt;&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; was compiled from trunk, revision 380.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/106#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/110</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/110</guid>
        <title>#110: should support `obj.meth:val1, with:val2' syntax</title>
        <pubDate>Tue, 19 Aug 2008 21:09:52 GMT</pubDate>
          <dc:creator>lsansonetti@…</dc:creator>
        <description>&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; should support the following syntax
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
obj.meth:v1, with:v2
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
As an alternative to
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
obj.meth v1, with:v2
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
Calling `obj.meth:v1, with:v2' right now will pass :v1 (the :v1 symbol and not v1) and v2 as parameters, which is expected, but some Objective-C developers may fall into the trap, because this is very similar to the Objective-C way:
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
[obj meth:v1 with:v2]
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
Objective-C developers will also probably prefer this syntax because it reveals the real selector that is being sent.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/110#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/189</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/189</guid>
        <title>#189: Bugs with: Class#dup &amp; Object#dup</title>
        <pubDate>Wed, 24 Dec 2008 10:59:55 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;p&gt;
Added test cases for these issues to known_bugs.rb:
&lt;a class="ext-link" href="http://www.macruby.org/trac/changeset/770/MacRuby"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://www.macruby.org/trac/changeset/770/MacRuby&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
Object#dup apparently tries to use NSObject#copyWithZone internally which fails because Object doesn't implement it.
&lt;/p&gt;
&lt;p&gt;
Class#dup simply returns a pointer to the original class instance.
Using #clone does work though.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/189#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/197</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/197</guid>
        <title>#197: A removed, or undefined, pure Objective-C method should raise a NoMethodError when called.</title>
        <pubDate>Tue, 06 Jan 2009 09:55:22 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;p&gt;
Currently when removing a pure Objective-C method a warning is raised.
&lt;/p&gt;
&lt;p&gt;
However, it would be more Ruby-ish if remove_method and undef_method would replace the methods with a stub method which raises a NoMethodError.
&lt;/p&gt;
&lt;p&gt;
This way the user will still get a sensible error message when the application crashes, but will not constantly be warned when removing methods.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/197#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/204</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/204</guid>
        <title>#204: Private methods redefined public are still in private_methods</title>
        <pubDate>Sat, 10 Jan 2009 04:29:22 GMT</pubDate>
          <dc:creator>vincent.isambart@…</dc:creator>
        <description>&lt;p&gt;
All classes have a private puts method. However, if you redefine publically puts in a class, puts is still in its private methods list (but it's also in the public methods). It should only be in the public methods.
&lt;/p&gt;
&lt;pre class="wiki"&gt;class A; end
p A.private_instance_methods.grep(/puts/)
p A.public_instance_methods.grep(/puts/)
class A
  def puts
  end
end
p A.private_instance_methods.grep(/puts/)
p A.public_instance_methods.grep(/puts/)
&lt;/pre&gt;&lt;p&gt;
displays:
&lt;/p&gt;
&lt;pre class="wiki"&gt;[:puts]
[]
[:puts]
[:puts]
&lt;/pre&gt;&lt;p&gt;
instead of: (Ruby 1.9)
&lt;/p&gt;
&lt;pre class="wiki"&gt;[:puts]
[]
[]
[:puts]
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/204#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/207</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/207</guid>
        <title>#207: Kernel#framework calls global #copy method while loading Cocoa.</title>
        <pubDate>Wed, 14 Jan 2009 13:37:06 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;p&gt;
This is something I stumbled across when playing with Rake. I have isolated it to the following:
&lt;/p&gt;
&lt;pre class="wiki"&gt;% macirb
irb(main):001:0&amp;gt; module Kernel
irb(main):002:1&amp;gt; def copy(*args) p args; end
irb(main):003:1&amp;gt; end
=&amp;gt; nil
irb(main):004:0&amp;gt; framework "Foundation"
=&amp;gt; true
irb(main):005:0&amp;gt; framework "Cocoa"
[]
[]
[]
[]
[]
[]
=&amp;gt; true
&lt;/pre&gt;&lt;p&gt;
It also breaks if the arity of the #copy method is specified:
&lt;/p&gt;
&lt;pre class="wiki"&gt;% macirb
irb(main):001:0&amp;gt; module Kernel
irb(main):002:1&amp;gt; def copy(one_arg); end
irb(main):003:1&amp;gt; end
=&amp;gt; nil
irb(main):004:0&amp;gt; framework 'Cocoa'
ArgumentError: wrong number of arguments (0 for 1)
	from (irb):4:in `framework'
	from (irb):4
	from /usr/local/bin/macirb:12:in `&amp;lt;main&amp;gt;'
&lt;/pre&gt;&lt;p&gt;
So it seems like something is being evaluated which calls a #copy method while loading frameworks.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/207#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/235</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/235</guid>
        <title>#235: Problems with adding objects to scriptable applications via scripting bridge</title>
        <pubDate>Fri, 20 Mar 2009 11:39:45 GMT</pubDate>
          <dc:creator>i.script@…</dc:creator>
        <description>&lt;p&gt;
hi,
&lt;/p&gt;
&lt;p&gt;
lately I've tried to get some exerience in scripting DEVONthink using the ScriptingBridge. This works overall very well. Only the "create a record with in" command crates headaches for me. The following code-snippet exemplifies the problem:
&lt;/p&gt;
&lt;pre class="wiki"&gt;#!/usr/local/bin/macruby
framework  "Cocoa"
framework  "Foundation"
framework  "ScriptingBridge"
devon =  SBApplication.applicationWithBundleIdentifier("com.devon-technologies.thinkpro2")
theGroup = devon.createLocation '/root/scripts/myscript', :in =&amp;gt; '/'
theRecord =devon.classForScriptingClass("record").alloc.initWithProperties({'type'=&amp;gt;'text','plainText'=&amp;gt;"Hallo Welt!",'name' =&amp;gt;"helloworld"})
puts theRecord.description
#  Scripting Bridge does not actually create an object in the target application until you add the allocated and
#  initialized object to an appropriate element array (SBElementArray), such as records in my example.
#  thats's the way it should be done, but its not working
puts devon.databases[0].records.insertObject(theRecord, :atIndex =&amp;gt; 11)
#  or : puts devon.databases[0].records.addObject(theRecord)
theRecord.createRecordWithIn resultRecord
&lt;/pre&gt;&lt;p&gt;
While working with this code snippet I've found out that:
&lt;/p&gt;
&lt;p&gt;
1. if i use: "puts theRecord" instead of "puts theRecord.description" the script runs out of time
&lt;/p&gt;
&lt;p&gt;
2. the attempt to instantiate a scripting object within DEVONthink creates this error:
&lt;/p&gt;
&lt;pre class="wiki"&gt;
/Users/stereocle/Documents/devonruby.rb:24:in `insertObject:atIndex:': NSGenericException: Apple event returned an error.  Event = 'core'\'crel'{ 'kocl':'DTrc', 'insh':'insl'{ 'kobj':'obj '{ 'want':'DTrc', 'from':'obj '{ 'want':'DTkb', 'from':'null'(), 'form':'indx', 'seld':1 }, 'form':'indx', 'seld':1 }, 'kpos':'befo' }, 'prdt':{ 'DTpl':'utxt'("Hallo Welt"), 'pnam':'utxt'("helloworld"), 'DTty':'utxt'("text") } } (RuntimeError)
Error info = {
    ErrorNumber = -10000;
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/235#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/265</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/265</guid>
        <title>#265: 'include' on 'class Class' doesn't define methods on future classes</title>
        <pubDate>Wed, 27 May 2009 00:01:16 GMT</pubDate>
          <dc:creator>nate@…</dc:creator>
        <description>&lt;p&gt;
Greetings, the following code sample works on ruby 1.8 and 1.9 but is giving an error in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.0.4.
&lt;/p&gt;
&lt;pre class="wiki"&gt;module B
  def whisper(a)
    puts a.downcase
  end
end
class Class
  include B
  def say(a)
    puts a
  end
end
class A
  say("hi")
  whisper("BYE")
end
# ruby 1.8.* &amp;amp; 1.9.* =&amp;gt;
# hi
# bye
#
# macruby 0.0.4 =&amp;gt;
# hi
# class.rb:16:in `&amp;lt;class:A&amp;gt;': undefined method `whisper' for A:Class (NoMethodError)
#  from class.rb:14:in `&amp;lt;main&amp;gt;'
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/265#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/288</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/288</guid>
        <title>#288: miniruby bench on 32 bit fails</title>
        <pubDate>Mon, 29 Jun 2009 12:38:51 GMT</pubDate>
          <dc:creator>bobstevenson@…</dc:creator>
        <description>&lt;p&gt;
I have a mac-mini core-duo.  I'm receiving this error after building the latest experimental release; with the specified llvm.
&lt;/p&gt;
&lt;p&gt;
./miniruby -I./lib bench.rb
Assertion failed: (castIsValid(getOpcode(), S, Ty) &amp;amp;&amp;amp; "Illegal BitCast"), function BitCastInst, file Instructions.cpp, line 2493.
rake aborted!
Command failed with status (): &lt;a class="missing ticket"&gt;-I./lib bench.rb...&lt;/a&gt;
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/288#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/324</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/324</guid>
        <title>#324: improve bench.rb</title>
        <pubDate>Thu, 03 Sep 2009 21:26:26 GMT</pubDate>
          <dc:creator>jordan.breeding@…</dc:creator>
        <description>&lt;p&gt;
Currently bench.rb has a few inconsistencies (number printed to screen is not the number of times looped) and doesn't work well under ruby 1.8 or 1.9.
&lt;/p&gt;
&lt;p&gt;
Having it work on multiple versons of ruby is useful for benchmarking regressions against other ruby versions.
&lt;/p&gt;
&lt;p&gt;
I am including a patch I use locally to use able to run bench.rb under all ruby versions (by catching errors).
&lt;/p&gt;
&lt;pre class="wiki"&gt;diff --git a/bench.rb b/bench.rb
index e05833b..2c47c62 100644
--- a/bench.rb
+++ b/bench.rb
@@ -7,6 +7,16 @@
 # The same script can also be executed using /usr/bin/ruby or ruby19 to
 # compare the implementations.
+def executeWithErrorHandling
+  if (block_given?)
+    begin
+      yield
+    rescue Exception =&amp;gt; e
+      print(" ************* BENCHMARK FAILED ************* ")
+    end
+  end
+end
+
 def fib(n)
   if n &amp;lt; 3
     1
@@ -80,168 +90,248 @@ Benchmark.bm(30) do |bm|
   # Fixnum arithmetic.
   bm.report('10 fib(30)') do
-    i=0; while i&amp;lt;10; fib(30); i+=1; end
+    executeWithErrorHandling do
+      i=0; while i&amp;lt;10; fib(30); i+=1; end
+    end
   end
   bm.report('10 fib(35)') do
-    i=0; while i&amp;lt;10; fib(35); i+=1; end
+    executeWithErrorHandling do
+      i=0; while i&amp;lt;10; fib(35); i+=1; end
+    end
+  end
+  bm.report('tak') do
+    executeWithErrorHandling do
+      tak(18,9,0)
+    end
+  end
+  bm.report('tarai') do
+    executeWithErrorHandling do
+      tarai(12,6,0)
+    end
   end
-  bm.report('tak') { tak(18,9,0) }
-  bm.report('tarai') { tarai(12,6,0) }
-  if RUBY_VERSION.to_f &amp;gt; 1.8
-    # Ruby 1.8 is too weak for this benchmark.
-    bm.report('ackermann') { ack(3,9) }
+  bm.report('ackermann') do
+    executeWithErrorHandling do
+      ack(3,9)
+    end
   end
   # Loops.
   bm.report('10000000 times loop') do
-    3000000.times {}
+    executeWithErrorHandling do
+      10000000.times {}
+    end
   end
   bm.report('30000000 times loop') do
-    30000000.times {}
+    executeWithErrorHandling do
+      30000000.times {}
+    end
   end
   bm.report('10000000 while loop') do
-    i=0; while i&amp;lt;10000000; i+=1; end
+    executeWithErrorHandling do
+      i=0; while i&amp;lt;10000000; i+=1; end
+    end
   end
   bm.report('60000000 while loop') do
-    i=0; while i&amp;lt;60000000; i+=1; end
+    executeWithErrorHandling do
+      i=0; while i&amp;lt;60000000; i+=1; end
+    end
   end
   # Messages.
   bm.report('30000000 msg w/ 0 arg') do
-    o = Class1.new
-    i=0; while i&amp;lt;10000000; o.method1; o.method1; o.method1; i+=1; end
+    executeWithErrorHandling do
+      o = Class1.new
+      i=0; while i&amp;lt;30000000; o.method1; o.method1; o.method1; i+=1; end
+    end
   end
   bm.report('30000000 msg w/ 1 arg') do
-    o = Class1.new
-    i=0; while i&amp;lt;10000000; o.method2(i); o.method2(i); o.method2(i); i+=1; end
+    executeWithErrorHandling do
+      o = Class1.new
+      i=0; while i&amp;lt;30000000; o.method2(i); o.method2(i); o.method2(i); i+=1; end
+    end
   end
   bm.report('10000000 super w/ 0 arg') do
-    o = Class2.new
-    i=0; while i&amp;lt;10000000; o.method1; i+=1; end
+    executeWithErrorHandling do
+      o = Class2.new
+      i=0; while i&amp;lt;10000000; o.method1; i+=1; end
+    end
   end
   bm.report('10000000 super w/ 1 arg') do
-    o = Class2.new
-    i=0; while i&amp;lt;10000000; o.method2(i); i+=1; end
+    executeWithErrorHandling do
+      o = Class2.new
+      i=0; while i&amp;lt;10000000; o.method2(i); i+=1; end
+    end
   end
   bm.report('10000000 #send') do
-    o = Class1.new
-    i=0; while i&amp;lt;10000000; o.send(:method1); i+=1; end
+    executeWithErrorHandling do
+      o = Class1.new
+      i=0; while i&amp;lt;10000000; o.send(:method1); i+=1; end
+    end
   end
   bm.report('30000000 tail calls') do
-    tail(30000000)
+    executeWithErrorHandling do
+      tail(30000000)
+    end
   end
   # Instance variables.
-  bm.report('10000000 ivar read') { bench_ivar_read(10000000) }
-  bm.report('30000000 ivar read') { bench_ivar_read(30000000) }
-  bm.report('10000000 ivar write') { bench_ivar_write(10000000) }
-  bm.report('30000000 ivar write') { bench_ivar_write(30000000) }
+  bm.report('10000000 ivar read') do
+    executeWithErrorHandling do
+      bench_ivar_read(10000000)
+    end
+  end
+  bm.report('30000000 ivar read') do
+    executeWithErrorHandling do
+      bench_ivar_read(30000000)
+    end
+  end
+  bm.report('10000000 ivar write') do
+    executeWithErrorHandling do
+      bench_ivar_write(10000000)
+    end
+  end
+  bm.report('30000000 ivar write') do
+    executeWithErrorHandling do
+      bench_ivar_write(30000000)
+    end
+  end
   # Const lookup.
   bm.report('30000000 const') do
-    i=0; while i&amp;lt;30000000; i+=ConstantOne; end
+    executeWithErrorHandling do
+      i=0; while i&amp;lt;30000000; i+=ConstantOne; end
+    end
   end
   # Blocks
   bm.report('30000000 yield') do
-    o = Class1.new
-    o.yield1(30000000) {}
+    executeWithErrorHandling do
+      o = Class1.new
+      o.yield1(30000000) {}
+    end
   end
   bm.report('30000000 msg w/ block+yield') do
-    o = Class1.new
-    i=0; while i&amp;lt;30000000; o.yield2 {}; i+=1; end
+    executeWithErrorHandling do
+      o = Class1.new
+      i=0; while i&amp;lt;30000000; o.yield2 {}; i+=1; end
+    end
   end
   bm.report('30000000 Proc#call') do
-    o = proc {}
-    i=0; while i&amp;lt;30000000; o.call; i+=1; end
+    executeWithErrorHandling do
+      o = proc {}
+      i=0; while i&amp;lt;30000000; o.call; i+=1; end
+    end
   end
   bm.report('30000000 dvar write') do
-    i=0
-    30000000.times { i=1 }
+    executeWithErrorHandling do
+      i=0
+      30000000.times { i=1 }
+    end
   end
   # Eval
   bm.report('1000 eval') do
-    i=0
-    s = "#{1+1}+#{20+20}"
-    while i&amp;lt;1000
-      eval(s)
-      i+=1
+    executeWithErrorHandling do
+      i=0
+      s = "#{1+1}+#{20+20}"
+      while i&amp;lt;1000
+        eval(s)
+        i+=1
+      end
     end
   end
   bm.report('30000000 binding-var write') do
-    i=0
-    eval('while i&amp;lt;30000000; i+=1; end')
+    executeWithErrorHandling do
+      i=0
+      eval('while i&amp;lt;30000000; i+=1; end')
+    end
   end
   # Break
   bm.report('30000000 while break') do
-    i=0; while i&amp;lt;30000000; while true; i+=1; break; end; end
+    executeWithErrorHandling do
+      i=0; while i&amp;lt;30000000; while true; i+=1; break; end; end
+    end
   end
   bm.report('10000000 block break') do
-    i=0; while i&amp;lt;10000000; 1.times { i+=1; break }; end
+    executeWithErrorHandling do
+      i=0; while i&amp;lt;10000000; 1.times { i+=1; break }; end
+    end
   end
   # Next
   bm.report('30000000 while next') do
-    i=0; while i&amp;lt;30000000; i+=1; next; exit; end
+    executeWithErrorHandling do
+      i=0; while i&amp;lt;30000000; i+=1; next; exit; end
+    end
   end
   bm.report('10000000 block next') do
-    i=0; while i&amp;lt;10000000; 1.times { i+=1; next; exit; }; end
+    executeWithErrorHandling do
+      i=0; while i&amp;lt;10000000; 1.times { i+=1; next; exit; }; end
+    end
   end
   # Exception handlers.
   bm.report('60000000 begin w/o exception') do
-    i=0
-    while i&amp;lt;60000000
-      begin
-        i+=1
-      rescue
+    executeWithErrorHandling do
+      i=0
+      while i&amp;lt;60000000
+        begin
+          i+=1
+        rescue
+        end
       end
     end
   end
   bm.report('60000000 ensure w/o exception') do
-    i=0
-    while i&amp;lt;60000000
-      begin
+    executeWithErrorHandling do
+      i=0
+      while i&amp;lt;60000000
         begin
+          begin
+          ensure
+            i+=1
+          end
         ensure
           i+=1
         end
-      ensure
-        i+=1
       end
     end
   end
   bm.report('50000 raise') do
-    i=0
-    while i&amp;lt;50000
-      begin
-        raise
-      rescue
-        i+=1
+    executeWithErrorHandling do
+      i=0
+      while i&amp;lt;50000
+        begin
+          raise
+        rescue
+          i+=1
+        end
       end
     end
   end
   # Method
   bm.report('3000000 Method#call w/ 0 arg') do
-    o = Class1.new
-    m = o.method(:method1)
-    i=0
-    while i&amp;lt;3000000
-      m.call
-      i+=1
+    executeWithErrorHandling do
+      o = Class1.new
+      m = o.method(:method1)
+      i=0
+      while i&amp;lt;3000000
+        m.call
+        i+=1
+      end
     end
   end
   bm.report('3000000 Method#call w/ 1 arg') do
-    o = Class1.new
-    m = o.method(:method2)
-    i=0
-    while i&amp;lt;3000000
-      m.call(i)
-      i+=1
+    executeWithErrorHandling do
+      o = Class1.new
+      m = o.method(:method2)
+      i=0
+      while i&amp;lt;3000000
+        m.call(i)
+        i+=1
+      end
     end
   end
-
 end
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/324#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/354</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/354</guid>
        <title>#354: Bundling framework in SL release build will not run on Leopard</title>
        <pubDate>Tue, 29 Sep 2009 01:31:17 GMT</pubDate>
          <dc:creator>jtc331@…</dc:creator>
        <description>&lt;p&gt;
I have an app that has the embed macruby target include when I do a release build (Xcode is set to release for 10.5) but the generated release will only work on SL machines not Leopard machines. Neither machine tested has macruby installed. It crashes with the following error in the console:
&lt;/p&gt;
&lt;p&gt;
9/28/09 5:50:59 PM [0x0-0x22022].com.yourcompany.&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;-Sim8086&lt;a class="missing changeset" title="No changeset 18769 in the repository"&gt;[18769]&lt;/a&gt; dyld: Library not loaded: @executable_path/../Frameworks/MacRuby.framework/Versions/0.5/usr/lib/libmacruby.dylib
9/28/09 5:50:59 PM [0x0-0x22022].com.yourcompany.&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;-Sim8086&lt;a class="missing changeset" title="No changeset 18769 in the repository"&gt;[18769]&lt;/a&gt;   Referenced from: /Volumes/UNTITLED/MacRuby-Sim8086.app/Contents/MacOS/MacRuby-Sim8086
9/28/09 5:50:59 PM [0x0-0x22022].com.yourcompany.&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;-Sim8086&lt;a class="missing changeset" title="No changeset 18769 in the repository"&gt;[18769]&lt;/a&gt;   Reason: no suitable image found.  Did find:
9/28/09 5:50:59 PM [0x0-0x22022].com.yourcompany.&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;-Sim8086&lt;a class="missing changeset" title="No changeset 18769 in the repository"&gt;[18769]&lt;/a&gt;  /Volumes/UNTITLED/MacRuby-Sim8086.app/Contents/MacOS/../Frameworks/MacRuby.framework/Versions/0.5/usr/lib/libmacruby.dylib: unknown required load command 0x80000022
9/28/09 5:50:59 PM [0x0-0x22022].com.yourcompany.&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;-Sim8086&lt;a class="missing changeset" title="No changeset 18769 in the repository"&gt;[18769]&lt;/a&gt;  /Volumes/UNTITLED/MacRuby-Sim8086.app/Contents/MacOS/../Frameworks/MacRuby.framework/Versions/0.5/usr/lib/libmacruby.dylib: unknown required load command 0x80000022
9/28/09 5:50:59 PM com.apple.launchd&lt;a class="changeset" href="http://www.macruby.org/trac/changeset/72" title="fix for #31"&gt;[72]&lt;/a&gt; ([0x0-0x22022].com.yourcompany.&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;-Sim8086&lt;a class="missing changeset" title="No changeset 18769 in the repository"&gt;[18769]&lt;/a&gt;) Exited abnormally: Trace/BPT trap
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/354#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/371</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/371</guid>
        <title>#371: Module methods included in the class Module are not visible to other classes.</title>
        <pubDate>Fri, 09 Oct 2009 11:09:40 GMT</pubDate>
          <dc:creator>mred@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;module A
  def b
    puts 'b'
  end
end
class Module
  include A
end
class C
  b()
end
&lt;/pre&gt;&lt;p&gt;
Running the above on Ruby 1.9 prints out 'b'.  Running it on &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.5 generates an "undefined method `b' for C:Class (NoMethodError)"
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/371#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/404</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/404</guid>
        <title>#404: Segfault with ObjectSpace#each_object</title>
        <pubDate>Mon, 26 Oct 2009 15:04:13 GMT</pubDate>
          <dc:creator>keith.gautreaux@…</dc:creator>
        <description>&lt;p&gt;
The following code causes a segfault on my machine (MacBookPro3,1):
&lt;/p&gt;
&lt;pre class="wiki"&gt; #!/usr/local/bin/macruby
ObjectSpace.each_object { |o| puts o }
&lt;/pre&gt;&lt;p&gt;
Unfortunately, I am running the nightly build of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; from &lt;a class="ext-link" href="http://macruby.icoretech.org"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://macruby.icoretech.org&lt;/a&gt; and it doesn't seem to allow backtrace generation with gdb when compiled with:
&lt;/p&gt;
&lt;pre class="wiki"&gt;macrubyc -o macruby_test -a x86_64 macruby_test.rb
&lt;/pre&gt;&lt;p&gt;
I also get a segfault when the code is run under macirb.
&lt;/p&gt;
&lt;p&gt;
If someone who can generate backtraces could try that method and reproduce the segfault that would be great.  If no one becomes available I can try compiling macruby from source and running a backtrace.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/404#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/406</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/406</guid>
        <title>#406: Can't load gem grit.</title>
        <pubDate>Wed, 28 Oct 2009 04:28:30 GMT</pubDate>
          <dc:creator>hungerandthirst@…</dc:creator>
        <description>&lt;p&gt;
Sorry to be so specific about not being able to load a specific gem.
I do this:
&lt;/p&gt;
&lt;pre class="wiki"&gt;require 'rubygems'
require 'grit'
include Grit
&lt;/pre&gt;&lt;p&gt;
and get
&lt;/p&gt;
&lt;pre class="wiki"&gt;in `require:': undefined method `[]' for nil:NilClass (NoMethodError).
&lt;/pre&gt;&lt;p&gt;
It seems to be coming from the
&lt;/p&gt;
&lt;pre class="wiki"&gt;require 'rubygems'
&lt;/pre&gt;&lt;p&gt;
inside of grit.rb. If I disable this line, it includes it with the following warnings:
&lt;/p&gt;
&lt;pre class="wiki"&gt;unknown: warning: already initialized constant VERSION
unknown: warning: already initialized constant MEDIA_TYPE_RE
unknown: warning: already initialized constant UNREG_RE
unknown: warning: already initialized constant ENCODING_RE
unknown: warning: already initialized constant PLATFORM_RE
unknown: warning: already initialized constant SIGNATURES
unknown: warning: already initialized constant IANA_URL
unknown: warning: already initialized constant RFC_URL
unknown: warning: already initialized constant DRAFT_URL
unknown: warning: already initialized constant LTSW_URL
unknown: warning: already initialized constant CONTACT_URL
unknown: warning: can't register `extensions' as an KVO setter on class `MIME::Type' (method `setExtensions:')
unknown: warning: can't register `encoding' as an KVO setter on class `MIME::Type' (method `setEncoding:')
unknown: warning: can't register `system' as an KVO setter on class `MIME::Type' (method `setSystem:')
unknown: warning: can't register `obsolete' as an KVO setter on class `MIME::Type' (method `setObsolete:')
unknown: warning: can't register `docs' as an KVO setter on class `MIME::Type' (method `setDocs:')
unknown: warning: can't register `url' as an KVO setter on class `MIME::Type' (method `setUrl:')
unknown: warning: can't register `registered' as an KVO setter on class `MIME::Type' (method `setRegistered:')
unknown: warning: already initialized constant VERSION
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/406#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/422</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/422</guid>
        <title>#422: Kernel#caller compatibilty</title>
        <pubDate>Wed, 04 Nov 2009 06:06:24 GMT</pubDate>
          <dc:creator>mattaimonetti@…</dc:creator>
        <description>&lt;p&gt;
In a file:
&lt;/p&gt;
&lt;p&gt;
Example:
&lt;/p&gt;
&lt;pre class="wiki"&gt;class Foo
  def self.bar
    baz do
      puts caller(1)
    end
  end
  def self.baz(&amp;amp;block)
     block.call
  end
end
Foo.bar
&lt;/pre&gt;&lt;p&gt;
macruby:
&lt;/p&gt;
&lt;pre class="wiki"&gt;core:in `caller:'
caller_proc.rb:9:in `baz'
caller_proc.rb:3:in `bar'
caller_proc.rb:13:in `&amp;lt;main&amp;gt;'
&lt;/pre&gt;&lt;p&gt;
ruby1.9:
&lt;/p&gt;
&lt;pre class="wiki"&gt;caller_proc.rb:9:in `call'
caller_proc.rb:9:in `baz'
caller_proc.rb:3:in `bar'
caller_proc.rb:13:in `&amp;lt;main&amp;gt;
&lt;/pre&gt;&lt;p&gt;
Files attached.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/422#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/424</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/424</guid>
        <title>#424: performance regression from ruby 1.8 and 1.9</title>
        <pubDate>Fri, 06 Nov 2009 01:57:49 GMT</pubDate>
          <dc:creator>jordan.breeding@…</dc:creator>
        <description>&lt;p&gt;
I have some code that previously ran incorrectly on &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.4, and until recently crashed &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; trunk. Now that it works I would like to report that the performance of it is not as fast as 1.8 or 1.9.
&lt;/p&gt;
&lt;p&gt;
I know that &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; working is a primary consideration and speed only comes after that, but as people start looking at speed more and more I wanted to get this on the radar.
&lt;/p&gt;
&lt;p&gt;
This also supersedes &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/348" title="defect: macruby is slower than ruby 1.9 for priority queue work (closed: duplicate)"&gt;#348&lt;/a&gt; which was a smaller also based on this code, but was a reduced file since the main code would not run.
&lt;/p&gt;
&lt;p&gt;
Performance of Ruby 1.8, Ruby 1.9, and &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; compared using a faster and a slower version of the same basic algorithm:
&lt;/p&gt;
&lt;pre class="wiki"&gt;35 jordan@thetourist ~/priority_queue_bug &amp;gt; for LOOP in ruby ruby1.9 macruby; do for LOOP2 in ./search.pqueue ./search_slow.pqueue; do eval time "${LOOP}" "${LOOP2}" -m -c a-star input_files/input13_7.txt &amp;gt;/dev/null; done; done
ruby ./search.pqueue -m -c a-star input_files/input13_7.txt  4.51s user 0.10s system 98% cpu 4.657 total
ruby ./search_slow.pqueue -m -c a-star input_files/input13_7.txt  9.84s user 0.15s system 98% cpu 10.087 total
ruby1.9 ./search.pqueue -m -c a-star input_files/input13_7.txt  2.74s user 0.08s system 98% cpu 2.851 total
ruby1.9 ./search_slow.pqueue -m -c a-star input_files/input13_7.txt  5.80s user 0.11s system 99% cpu 5.960 total
macruby ./search.pqueue -m -c a-star input_files/input13_7.txt  14.30s user 0.69s system 171% cpu 8.722 total
macruby ./search_slow.pqueue -m -c a-star input_files/input13_7.txt  27.30s user 0.88s system 150% cpu 18.745 total
&lt;/pre&gt;&lt;p&gt;
performance of various versions of the script specific to &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;:
&lt;/p&gt;
&lt;pre class="wiki"&gt;36 jordan@thetourist ~/priority_queue_bug &amp;gt; for LOOP in *.cocoa; do eval time macruby "${LOOP}" -c -m a-star input_files/input13_7.txt &amp;gt;/dev/null; done
macruby search.cocoa -c -m a-star input_files/input13_7.txt  14.38s user 0.79s system 161% cpu 9.392 total
macruby search_group_add.cocoa -c -m a-star input_files/input13_7.txt  13.61s user 0.71s system 171% cpu 8.345 total
macruby search_group_add_slow.cocoa -c -m a-star input_files/input13_7.txt  26.97s user 0.92s system 146% cpu 19.027 total
macruby search_slow.cocoa -c -m a-star input_files/input13_7.txt  27.34s user 0.94s system 150% cpu 18.730 total
&lt;/pre&gt;&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; information:
&lt;/p&gt;
&lt;pre class="wiki"&gt;37 jordan@thetourist ~/priority_queue_bug &amp;gt; macruby -e 'p MACRUBY_VERSION'
"0.5"
38 jordan@thetourist ~/priority_queue_bug &amp;gt; macruby -e 'p MACRUBY_REVISION'
"git commit 19b2d7811662bf636cbcc2fe1ae99afef3243225"
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/424#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/436</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/436</guid>
        <title>#436: Strange pair(?) of bugs (floats)</title>
        <pubDate>Mon, 16 Nov 2009 21:06:46 GMT</pubDate>
          <dc:creator>macruby@…</dc:creator>
        <description>&lt;p&gt;
I am writing some code, see attached, in ruby and have run into a strange pair of bugs, I think. I'm using '&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; version 0.5 (ruby 1.9.0) [universal-darwin10.0, x86_64]'
&lt;/p&gt;
&lt;p&gt;
When I go to execute the attached code I have come across two problems which I think are bugs. First when I run this line [line 20] of code 'd = Test.new(9.1)' I get the following response '##-&amp;lt;Test:0x200274f20 @min=9.09999999999999&amp;gt;' which is wrong.
&lt;/p&gt;
&lt;p&gt;
Second, when I execute this line [line 24] of code 'c &amp;lt;&amp;lt; d' I get '&lt;a class="new ticket" href="http://www.macruby.org/trac/ticket/436##-&amp;lt;Test:0x2000e5e60" title="defect: Strange pair(?) of bugs (floats) (new)"&gt;@min=10.0&amp;gt;, ##-&amp;lt;Test:0x20020d2e0 @min=10.1&amp;gt;, ##-&amp;lt;Test:0x200274f20 @min=9.09999999999999&amp;gt;&lt;/a&gt;' which is also wrong. It should look like this '&lt;a class="new ticket" href="http://www.macruby.org/trac/ticket/436##-&amp;lt;Test:0x200274f20" title="defect: Strange pair(?) of bugs (floats) (new)"&gt;@min=9.09999999999999&amp;gt;, ##-&amp;lt;Test:0x2000e5e60 @min=10.0&amp;gt;, ##-&amp;lt;Test:0x20020d2e0 @min=10.1&amp;gt;&lt;/a&gt;' which it does if I execute this line of code 'c.sort!'.
&lt;/p&gt;
&lt;p&gt;
Executing all of this in 'ruby 1.8.7 (2008-08-11 patchlevel 72) [universal-darwin10.0]' returns the expected results.
&lt;/p&gt;
&lt;p&gt;
- AYAL
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/436#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/469</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/469</guid>
        <title>#469: Time#to_f gives wrong results on 32-bit architecture</title>
        <pubDate>Mon, 30 Nov 2009 19:11:47 GMT</pubDate>
          <dc:creator>pwilson@…</dc:creator>
        <description>&lt;p&gt;
Running the latest &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; nightly on a 32-bit machine, I get incorrect results back from Time#to_f.  The value is always an integral value and increments in steps of 512 seconds.  The integer value is in fact an even multiple of 512.  The ruby1.9 trunk behaves correctly as does &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; running in 64-bit mode:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby -e "puts Time.now.to_f, Time.now.to_i"
1259608064.0
1259608103
$ ruby1.9 -e "puts Time.now.to_f, Time.now.to_i"
1259608104.176155
1259608104
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/469#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/471</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/471</guid>
        <title>#471: Problems with the simple-rss library</title>
        <pubDate>Tue, 01 Dec 2009 12:32:22 GMT</pubDate>
          <dc:creator>sergio@…</dc:creator>
        <description>&lt;p&gt;
Hiya!
&lt;/p&gt;
&lt;p&gt;
I'm having some problems using simple-rss library with macruby. The attached snippet works both in ruby1.9 and ruby1.8. &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; does not yield the same results.
&lt;/p&gt;
&lt;p&gt;
Thanks!
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/471#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/472</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/472</guid>
        <title>#472: built-in rss library doesn't work in HEAD</title>
        <pubDate>Tue, 01 Dec 2009 12:51:36 GMT</pubDate>
          <dc:creator>sergio@…</dc:creator>
        <description>&lt;p&gt;
Hiya!
&lt;/p&gt;
&lt;p&gt;
Having problems using de built-in rss library. Snippet attached.
&lt;/p&gt;
&lt;p&gt;
Thanks!
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/472#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/505</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/505</guid>
        <title>#505: ivars are not collected after they are re-assigned by an immediate value</title>
        <pubDate>Tue, 15 Dec 2009 02:16:41 GMT</pubDate>
          <dc:creator>lsansonetti@…</dc:creator>
        <description>&lt;p&gt;
Good:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ./miniruby -e "@foo = 'hey'; ocid = @foo.object_id; @foo = 'ok'; 1000.times { GC.start }; p ObjectSpace._id2ref(ocid)"
Segmentation fault
&lt;/pre&gt;&lt;p&gt;
Not good:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ./miniruby -e "@foo = 'hey'; ocid = @foo.object_id; @foo = nil; 1000.times { GC.start }; p ObjectSpace._id2ref(ocid)"
"hey"
&lt;/pre&gt;&lt;p&gt;
Re-assigning an instance variable (slot-based) using an immediate value doesn't emit a GC write barrier, therefore the old variable leaks.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/505#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/513</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/513</guid>
        <title>#513: MacRuby gets confused about inheritance under certain conditions</title>
        <pubDate>Fri, 18 Dec 2009 05:02:54 GMT</pubDate>
          <dc:creator>matthew@…</dc:creator>
        <description>&lt;p&gt;
Given the following code,
&lt;/p&gt;
&lt;pre class="wiki"&gt;module Foo
  module Baz
    def initialize(a, b)
    end
  end
end
module Foo
  module Bar
    module Baz
      include Foo::Baz
      def initialize(a, b, c, d)
        super(a, b)
      end
    end
  end
end
module Foo
  module Bar
    module Quux
      include Baz
    end
  end
end
module Foo
  module Bar
    module Baz
      class Bat
        include Foo::Bar::Baz
        include Foo::Bar::Quux
      end
    end
  end
end
&lt;/pre&gt;&lt;p&gt;
There are two related errors associated with this piece of code.
&lt;/p&gt;
&lt;p&gt;
1.
&lt;/p&gt;
&lt;p&gt;
&lt;tt&gt;Foo::Bar::Baz::Bat.new&lt;/tt&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;strong&gt;Expected result (Ruby 1.9.1)&lt;/strong&gt;
&lt;/p&gt;
&lt;p&gt;
ArgumentError: wrong number of arguments (0 for 4)
&lt;/p&gt;
&lt;p&gt;
&lt;strong&gt;Actual result (&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.5b2)&lt;/strong&gt;
&lt;/p&gt;
&lt;p&gt;
=&amp;gt; #&amp;lt;Foo::Bar::Baz::Bat:0x200252380&amp;gt;
&lt;/p&gt;
&lt;p&gt;
Note the difference in response from &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/512" title="defect: MacRuby misreports #initialize argument count in error messages (closed: fixed)"&gt;#512&lt;/a&gt;!
&lt;/p&gt;
&lt;p&gt;
2.
&lt;/p&gt;
&lt;p&gt;
&lt;tt&gt;Foo::Bar::Baz::Bat.new(nil, nil, nil, nil)&lt;/tt&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;strong&gt;Expected result (Ruby 1.9.1)&lt;/strong&gt;
&lt;/p&gt;
&lt;p&gt;
=&amp;gt; #&amp;lt;Foo::Bar::Baz::Bat:0x913598&amp;gt;
&lt;/p&gt;
&lt;p&gt;
&lt;strong&gt;Actual result (&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.5b2)&lt;/strong&gt;
&lt;/p&gt;
&lt;p&gt;
ArgumentError: wrong number of arguments (4 for 2)
&lt;/p&gt;
&lt;p&gt;
It seems that &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; is becoming confused.  Here are a few ways to make it understand that Foo::Bar::Baz::Bat#initialize should accept 4 arguments.
&lt;/p&gt;
&lt;p&gt;
- Comment out Foo::Bar::Baz::Bat's second include statement (line 33)&lt;br /&gt;
- Comment out Foo::Bar::Quux's include statement (line 23)&lt;br /&gt;
- Comment out Foo::Bar::Baz's include statement (line 11) and Foo::Bar::Baz#initialize's super call (line 14)
&lt;/p&gt;
&lt;p&gt;
Of course, for my application I need the original functionality, so none of those will work for me.  :-)  If you find a workaround while investigating, please let me know.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/513#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/554</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/554</guid>
        <title>#554: Please implement IO#read_nonblock and IO#write_nonblock</title>
        <pubDate>Tue, 12 Jan 2010 23:01:31 GMT</pubDate>
          <dc:creator>ernest.prabhakar@…</dc:creator>
        <description>&lt;p&gt;
&lt;a class="ext-link" href="http://ruby-doc.org/core/classes/IO.html#M002267"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://ruby-doc.org/core/classes/IO.html#M002267&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;a class="ext-link" href="http://ruby-doc.org/core/classes/IO.html#M002268"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://ruby-doc.org/core/classes/IO.html#M002268&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
These are extremely useful for doing non-blocking async IO via Dispatch::Source
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/554#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/562</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/562</guid>
        <title>#562: Including a module into class Class or class Module</title>
        <pubDate>Tue, 19 Jan 2010 21:05:59 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;p&gt;
I saw that when you open class Class and define a method, it's automatically defined as a class method on NSObject. This does not happen when you include a module into class Class. Or class Module for that matter.
&lt;/p&gt;
&lt;p&gt;
My preliminary patch does this for both Class and Module. However, as the test in &lt;a class="missing ticket"&gt;#3300&lt;/a&gt; shows, using the two behaviors together still leads to a problem.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/562#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/563</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/563</guid>
        <title>#563: Retrieving the singleton class of a class seems to return Class.</title>
        <pubDate>Tue, 19 Jan 2010 21:19:02 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;p&gt;
For example:
&lt;/p&gt;
&lt;pre class="wiki"&gt;% cat t.rb
class A
  def self.singleton_class
    (class &amp;lt;&amp;lt; self; self; end)
  end
end
p A.singleton_class
% ruby19 t.rb
#&amp;lt;Class:A&amp;gt;
% macruby t.rb
Class
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/563#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/572</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/572</guid>
        <title>#572: ConditionVariable#wait should accept a timeout argument</title>
        <pubDate>Thu, 21 Jan 2010 23:51:25 GMT</pubDate>
          <dc:creator>honglilai@…</dc:creator>
        <description>&lt;p&gt;
Right now, ConditionVariable#wait waits forever until the condition is signaled. There should be a way to wait on a condition variable for a bounded time. A typical use case is as follows:
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
There is a background thread which performs some cleaning function every x seconds. We also want to be able to tell the thread to clean now, or to exit (i.e. quitting its main loop so that we can join the thread). This thread waits on a condition variable for x seconds, and then checks whether there was a timeout on the wait, or whether the wait as signaled. In case of the former it will run the cleanup code. In case of the latter it'll check whether @quit is set, and then either stop the loop or run the cleanup code.
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
This support for bounded waiting should be implemented by supporting an extra 'timeout' argument in ConditionVariable#wait. In fact JRuby and MRI 1.9.2dev already support it, though differenly. The call seqs are as follows:
&lt;/p&gt;
&lt;pre class="wiki"&gt;MRI &amp;lt;= 1.9.1: ConditionVariable#wait(mutex)
   No native support for bounded time waiting. In Phusion Passenger
   we emulate this with timeout.rb which is very hacky, though it
   seems to work.
MRI 1.9.2dev: ConditionVariable#wait(mutex, timeout)   =&amp;gt; integer
   Waits for at most 'timeout' time. 'timeout' may be a floating
   point number.
   Returns the number of *seconds* spent waiting. So even if it
   actually spent 3.5 seconds waiting, it'll either return 3 or 4.
   There is no way to check whether the wait was signaled or
   timed out, you have to guess based on the time waited.
JRuby: ConditionVariable#wait(mutex, timeout)   =&amp;gt; boolean
   Waits for at most 'timeout' time. 'timeout' may be a floating
   point number.
   Returns true if condition was signaled, false if it timed out.
&lt;/pre&gt;&lt;p&gt;
I think the JRuby approach makes most sense. We should also convince the MRI developers to change the behavior to match JRuby's before 1.9.2 is released.
&lt;/p&gt;
&lt;p&gt;
Bounded wait can be implemented with pthread_cond_timedwait.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/572#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/574</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/574</guid>
        <title>#574: macgem should install binaries to /usr/local/bin</title>
        <pubDate>Fri, 22 Jan 2010 13:40:47 GMT</pubDate>
          <dc:creator>honglilai@…</dc:creator>
        <description>&lt;p&gt;
macgem currently installs binaries to /usr/bin. This was fine when all the binaries were prefixed with "mac", but that change has been reverted. Installing any gem binaries with macgem now overwrites the ones previously installed by MRI.
&lt;/p&gt;
&lt;p&gt;
The attached patch changes the gem bindir to /usr/local/bin.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/574#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/585</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/585</guid>
        <title>#585: FFI , attach_variable missing?</title>
        <pubDate>Mon, 01 Feb 2010 08:12:02 GMT</pubDate>
          <dc:creator>rob@…</dc:creator>
        <description>&lt;p&gt;
Hi,
&lt;/p&gt;
&lt;p&gt;
I was really happy to hear that FFI shipped with &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; but then I ended up a little disappointed :-P
&lt;/p&gt;
&lt;pre class="wiki"&gt;require 'ffi'
extend FFI::Library
method(:attach_function).owner # =&amp;gt; TopLevel
method(:attach_variable).owner # =&amp;gt; NoMethodError
&lt;/pre&gt;&lt;p&gt;
I guess this could be intentional? I'm not sure. For my case I should be okay because I'm trying to read from a constant I know the value of, but just throwin' it out there.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/585#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/600</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/600</guid>
        <title>#600: hash access</title>
        <pubDate>Wed, 03 Feb 2010 19:53:59 GMT</pubDate>
          <dc:creator>mattaimonetti@…</dc:creator>
        <description>&lt;p&gt;
Here are a couple of examples that probably should not behave like that.
&lt;/p&gt;
&lt;pre class="wiki"&gt;&amp;gt;&amp;gt; NSUserDefaults.standardUserDefaults['oreilly.owned_books'] = [{:topic =&amp;gt; 'macruby', :isbn =&amp;gt; '9781449380373'}]
=&amp;gt; [{:topic=&amp;gt;"macruby", :isbn=&amp;gt;"9781449380373"}]
&amp;gt;&amp;gt; NSUserDefaults.standardUserDefaults['oreilly.owned_books'].first[:isbn]
=&amp;gt; nil
&amp;gt;&amp;gt; NSUserDefaults.standardUserDefaults['oreilly.owned_books'].first['isbn']
=&amp;gt; "9781449380373"
&lt;/pre&gt;&lt;p&gt;
problem: The hash item defined by a key being a symbol is only available using a string key.
&lt;/p&gt;
&lt;pre class="wiki"&gt;% macirb
irb(main):001:0&amp;gt; { 'foo' =&amp;gt; 'foo', :foo =&amp;gt; :foo }
=&amp;gt; {"foo"=&amp;gt;"foo", :foo=&amp;gt;:foo}
irb(main):002:0&amp;gt; h = _
=&amp;gt; {"foo"=&amp;gt;"foo", :foo=&amp;gt;:foo}
irb(main):003:0&amp;gt; NSDictionary.dictionaryWithDictionary(h)
=&amp;gt; {"foo"=&amp;gt;"foo"}
&lt;/pre&gt;&lt;p&gt;
Entries using a symbol or a string key should not be merged.
&lt;/p&gt;
&lt;p&gt;
During an offline discussion, Laurent said:
Very likely a problem with the copy functionality of symbol.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/600#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/626</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/626</guid>
        <title>#626: macruby fails Class.class_eval in macruby but not in 1.8 &amp; 1.9?</title>
        <pubDate>Fri, 26 Feb 2010 15:02:00 GMT</pubDate>
          <dc:creator>rebotfc@…</dc:creator>
        <description>&lt;p&gt;
Macruby fails executing the below, but it works fine in ruby 1.8 and ruby 1.9, any ideas why?
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="k"&gt;module&lt;/span&gt; &lt;span class="nn"&gt;Macro&lt;/span&gt;
  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foofoo&lt;/span&gt;
    &lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"barbar"&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="no"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;class_eval &lt;span class="k"&gt;do&lt;/span&gt;
  &lt;span class="kp"&gt;include&lt;/span&gt; &lt;span class="no"&gt;Macro&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="nb"&gt;Array&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;foofoo
&lt;/pre&gt;&lt;/div&gt;&lt;pre class="wiki"&gt;class_eval_test.rb:7:in `&amp;lt;main&amp;gt;': undefined method `foofoo' for NSMutableArray:Class (NoMethodError)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/626#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/648</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/648</guid>
        <title>#648: (TypeError) "unrecognized runtime type" when receiving a CGEventTapProxy</title>
        <pubDate>Tue, 06 Apr 2010 07:59:45 GMT</pubDate>
          <dc:creator>kingding@…</dc:creator>
        <description>&lt;p&gt;
I'm trying to set up an Event Tap that watches KeyDown events:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;framework &lt;span class="s2"&gt;"ApplicationServices"&lt;/span&gt;
framework &lt;span class="s2"&gt;"CoreFoundation"&lt;/span&gt;
callback &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;lambda&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;failing_tap_proxy&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; event&lt;span class="p"&gt;,&lt;/span&gt; refcon&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"Never get here."&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
mask &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;KCGEventKeyDown&lt;/span&gt;
event_tap &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;CGEventTapCreate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;KCGSessionEventTap&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="no"&gt;KCGHeadInsertEventTap&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                             &lt;span class="no"&gt;KCGEventTapOptionDefault&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; mask&lt;span class="p"&gt;,&lt;/span&gt; callback&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kp"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="k"&gt;unless&lt;/span&gt; event_tap
run_loop_source &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;CFMachPortCreateRunLoopSource&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;KCFAllocatorDefault&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; event_tap&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="no"&gt;CFRunLoopAddSource&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;CFRunLoopGetCurrent&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; run_loop_source&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="no"&gt;KCFRunLoopCommonModes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="no"&gt;CGEventTapEnable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;event_tap&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="no"&gt;CFRunLoopRun&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
As soon as a key is pressed and the callback receives a CGEventTapProxy as its first argument, the following error is raised:
&lt;/p&gt;
&lt;pre class="wiki"&gt;tap_demo.rb:1:in `&amp;lt;main&amp;gt;': unrecognized runtime type `{__CGEventTapProxy=}' (TypeError)
&lt;/pre&gt;&lt;p&gt;
Thanks for &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;!
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/648#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/657</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/657</guid>
        <title>#657: Calling super without args results in an ArgumentError in specific situations</title>
        <pubDate>Mon, 19 Apr 2010 10:04:47 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;p&gt;
I have unfortunately been unable to reduce the bug to a simple script… Laurent has my app so he can check it out by removing the explicit argument given to super on line FTVerticalScrollLayerView.rb:50 in #setFrameSize.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/657#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/664</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/664</guid>
        <title>#664: MacRuby Crashes When Scheduling a Block to Run on the Main Thread from a Background Thread</title>
        <pubDate>Thu, 22 Apr 2010 17:53:06 GMT</pubDate>
          <dc:creator>dylan@…</dc:creator>
        <description>&lt;p&gt;
Code:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main_thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;block &lt;span class="p"&gt;)&lt;/span&gt;
  block&lt;span class="o"&gt;.&lt;/span&gt;performSelectorOnMainThread&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;'call'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; withObject&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; waitUntilDone&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="k"&gt;do&lt;/span&gt;
  main_thread &lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;each &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;i&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nb"&gt;puts&lt;/span&gt; i &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Expected result:
&lt;/p&gt;
&lt;p&gt;
Output numbers to the console.
&lt;/p&gt;
&lt;p&gt;
Actual result:
&lt;/p&gt;
&lt;p&gt;
-Terminal-
&lt;/p&gt;
&lt;pre class="wiki"&gt;$&amp;gt; macruby test.rb
Assertion failed: (errorcode == 0), function setInstance, file ThreadLocal.cpp, line 61.
Abort trap
&lt;/pre&gt;&lt;p&gt;
-XCode (have to run the code twice for some reason, first time works) -
&lt;/p&gt;
&lt;pre class="wiki"&gt;Assertion failed: ((b-&amp;gt;flags &amp;amp; flags) == flags), function rb_vm_prepare_block, file dispatcher.cpp, line 1786.
Program received signal:  “SIGABRT”.
&lt;/pre&gt;&lt;p&gt;
Backtrace (note that this was pasted into a ruby cocoa application and is triggered from a menu click):
&lt;/p&gt;
&lt;pre class="wiki"&gt;#0  0x00007fff81b35fe6 in __kill ()
#1  0x00007fff81bd6e32 in abort ()
#2  0x00007fff81bc3e74 in __assert_rtn ()
#3  0x00000001001427e8 in rb_vm_prepare_block ()
#4  0x000000010115a149 in ?? ()
#5  0x0000000100149331 in rb_vm_block_eval ()
#6  0x00007fff87ddc647 in __NSThreadPerformPerform ()
#7  0x00007fff869c9271 in __CFRunLoopDoSources0 ()
#8  0x00007fff869c7469 in __CFRunLoopRun ()
#9  0x00007fff869c6c2f in CFRunLoopRunSpecific ()
#10 0x00007fff80ca5a75 in _NSUnhighlightCarbonMenu ()
#11 0x00007fff80f250b8 in -[NSMenu _internalPerformActionForItemAtIndex:] ()
#12 0x00007fff80dd79d5 in -[NSCarbonMenuImpl _carbonCommandProcessEvent:handlerCallRef:] ()
#13 0x00007fff80c84b60 in NSSLMMenuEventHandler ()
#14 0x00007fff886f1bd7 in DispatchEventToHandlers ()
#15 0x00007fff886f1126 in SendEventToEventTargetInternal ()
#16 0x00007fff8870ed49 in SendEventToEventTarget ()
#17 0x00007fff8873dd45 in SendHICommandEvent ()
#18 0x00007fff8876aa1a in SendMenuCommandWithContextAndModifiers ()
#19 0x00007fff8876a9d4 in SendMenuItemSelectedEvent ()
#20 0x00007fff8876a8dc in FinishMenuSelection ()
#21 0x00007fff8874bcf9 in MenuSelectCore ()
#22 0x00007fff8874b461 in _HandleMenuSelection2 ()
#23 0x00007fff80b55b79 in _NSHandleCarbonMenuEvent ()
#24 0x00007fff80b296a2 in _DPSNextEvent ()
#25 0x00007fff80b28b41 in -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] ()
#26 0x00007fff80aee747 in -[NSApplication run] ()
#27 0x00007fff80ae7468 in NSApplicationMain ()
#28 0x0000000101147870 in ?? ()
#29 0x000000010014c806 in rb_vm_dispatch ()
#30 0x00000001011263e4 in ?? ()
#31 0x000000010016115f in rb_vm_run ()
#32 0x00000001000462a9 in ruby_run_node ()
#33 0x00000001001614dc in macruby_main ()
#34 0x0000000100001d40 in main (argc=1, argv=0x7fff5fbff5f0) at
main.m:13
&lt;/pre&gt;&lt;p&gt;
Macruby Version:
&lt;/p&gt;
&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; version 0.6 (ruby 1.9.0) [universal-darwin10.0, x86_64]
Nightly from 04/20/2010.
&lt;/p&gt;
&lt;p&gt;
test.rb attached
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/664#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/682</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/682</guid>
        <title>#682: files delivered in site_ruby; should be in vendor_ruby</title>
        <pubDate>Tue, 04 May 2010 13:16:40 GMT</pubDate>
          <dc:creator>marick@…</dc:creator>
        <description>&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.7: There are files delivered in site_ruby:
&lt;/p&gt;
&lt;pre class="wiki"&gt;bigdecimal/		openssl/		ripper.rb
digest/			openssl.rb		universal-darwin10.0/
digest.rb		ripper/
&lt;/pre&gt;&lt;p&gt;
Shouldn't they be in vendor_ruby? I can't run a program without site-specific files by stripping site_ruby out of the path. If I do, macruby crashes with an Abort trap when it tries to load gems.
&lt;/p&gt;
&lt;p&gt;
I know that macruby_deploy -embed copies site_ruby into the application, so this causes no real problem other than wasted space, so maybe it's not worth fixing. But it'll cause more problems when macruby ships with OSX and people stop embedding.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/682#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/705</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/705</guid>
        <title>#705: Have to_s() use -description</title>
        <pubDate>Mon, 10 May 2010 22:34:03 GMT</pubDate>
          <dc:creator>jordan.breeding@…</dc:creator>
        <description>&lt;p&gt;
Whenever to_s has gone all the way to a base class like Object or NSObject, &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; should see if -description is implemented and defer to it if possible, this will make compatibility with Cocoa more straight forward.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/705#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/713</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/713</guid>
        <title>#713: Growl is broken on MacRuby 0.6</title>
        <pubDate>Thu, 13 May 2010 19:15:36 GMT</pubDate>
          <dc:creator>ylphcm@…</dc:creator>
        <description>&lt;p&gt;
Contrary to &lt;a class="ext-link" href="http://www.macruby.org/trac/ticket/662"&gt;&lt;span class="icon"&gt; &lt;/span&gt;ticket #662&lt;/a&gt;, the demos in /Developer/Examples/Ruby/MacRuby/Scripts/growl are broken for me on &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.6.
&lt;/p&gt;
&lt;p&gt;
E.g., the calls to Growl::Notifier#notify in the two growl_*_samples return a NSLocalNotificationCenter object, but no Growl notification is shown.
&lt;/p&gt;
&lt;p&gt;
Installing 0.5 over the existing 0.6 makes both samples work again. (Except for a callback bug in the block sample that is unrelated to &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;.)
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/713#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/714</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/714</guid>
        <title>#714: Hide certain methods on Symbol which are inherited from NSString.</title>
        <pubDate>Fri, 14 May 2010 21:24:12 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;p&gt;
An example is #include? but there might be others.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/714#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/715</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/715</guid>
        <title>#715: public_method_defined? on a metaclass doesn't work</title>
        <pubDate>Fri, 14 May 2010 21:39:13 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;% cat t.rb
class X
  def self.metaclass
    class &amp;lt;&amp;lt; self; self; end
  end
  class &amp;lt;&amp;lt; self
    def public_method; end
  end
end
p X.metaclass.public_method_defined?(:public_method)
% ruby19 t.rb
true
% macruby t.rb
false
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/715#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/717</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/717</guid>
        <title>#717: Including a module into class Object makes it impossible to override methods, from modules, in class Class or class Module</title>
        <pubDate>Fri, 14 May 2010 23:06:24 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;% cat t.rb
module ObjectMethods
  def foo
    ObjectMethods
  end
end
module ModuleMethods
  def foo
    ModuleMethods
  end
end
module ClassMethods
  def foo
    ClassMethods
  end
end
class Object
  include ObjectMethods
end
class Module
  include ModuleMethods
end
class Class
  include ClassMethods
end
p Object.new.foo
p Module.new.foo
p Class.new.foo
% ruby19 t.rb
ObjectMethods
ModuleMethods
ClassMethods
% macruby t.rb
ObjectMethods
ObjectMethods
ObjectMethods
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/717#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/718</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/718</guid>
        <title>#718: Defining a method on class Class also defines it on Module and vice versa</title>
        <pubDate>Fri, 14 May 2010 23:18:21 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;% cat t.rb
class Module
  def foo
    Module
  end
end
class Class
  def foo
    Class
  end
end
p Module.new.foo
p Class.new.foo
% macruby t.rb
Class
Class
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/718#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/720</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/720</guid>
        <title>#720: dynamically defined method called by menu items bug</title>
        <pubDate>Mon, 17 May 2010 06:20:57 GMT</pubDate>
          <dc:creator>mattaimonetti@…</dc:creator>
        <description>&lt;p&gt;
Here is a reduction of the bug encountered when a menu item calls a dynamically defined method.
&lt;/p&gt;
&lt;p&gt;
Run the following code and click on one of the two first menu items to reproduce the bug.
&lt;/p&gt;
&lt;pre class="wiki"&gt;framework 'AppKit'
app = NSApplication.sharedApplication
class ItemDelegate
  def define_actions(actions)
    actions.each do |command|
      self.class.send(:define_method, command) do |sender|
        puts command
      end
    end
  end
  def quit(sender)
    exit
  end
end
@menu = NSMenu.alloc.init
actions = ['test', 'test2']
menu_delegate = ItemDelegate.new
menu_delegate.define_actions(actions)
actions.each do |action|
  item = @menu.addItemWithTitle(action, action: action, keyEquivalent: "")
  item.target = menu_delegate
end
item = @menu.addItemWithTitle("Quit", action: 'quit:', keyEquivalent: "q")
item.toolTip = "Click to close this App"
item.target = menu_delegate
bar = NSStatusBar.systemStatusBar.statusItemWithLength(NSSquareStatusItemLength)
bar.title = "test"
bar.menu = @menu
bar.highlightMode = true
app.run
&lt;/pre&gt;&lt;p&gt;
&lt;a class="ext-link" href="http://gist.github.com/403462"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://gist.github.com/403462&lt;/a&gt;
&lt;/p&gt;
&lt;pre class="wiki"&gt;2010-05-16 23:15:19.037 macruby[29001:903] HIToolbox: ignoring exception '/Users/mattetti/bug.rb:1:in `&amp;lt;main&amp;gt;': wrong number of arguments (5393856 for 1) (ArgumentError)
' that raised inside Carbon event dispatch
(
	0   CoreFoundation                      0x00007fff86dbad24 __exceptionPreprocess + 180
	1   libobjc.A.dylib                     0x00007fff851440f3 objc_exception_throw + 45
	2   libmacruby.dylib                    0x0000000100160a4f rb_vm_raise + 335
	3   libmacruby.dylib                    0x0000000100045cf9 rb_exc_raise + 9
	4   libmacruby.dylib                    0x0000000100044234 rb_raise + 308
	5   libmacruby.dylib                    0x0000000100148cf8 rb_vm_block_eval2 + 2104
	6   ???                                 0x0000000101101380 0x0 + 4312798080
	7   AppKit                              0x00007fff8324d8ea -[NSApplication sendAction:to:from:] + 95
	8   AppKit                              0x00007fff83271e5a -[NSMenuItem _corePerformAction] + 365
	9   AppKit                              0x00007fff83271bc4 -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] + 121
	10  AppKit                              0x00007fff834f593d -[NSMenu _internalPerformActionForItemAtIndex:] + 35
	11  AppKit                              0x00007fff833a7729 -[NSCarbonMenuImpl _carbonCommandProcessEvent:handlerCallRef:] + 136
	12  AppKit                              0x00007fff832543b0 NSSLMMenuEventHandler + 321
	13  HIToolbox                           0x00007fff85664b57 _ZL23DispatchEventToHandlersP14EventTargetRecP14OpaqueEventRefP14HandlerCallRec + 1002
	14  HIToolbox                           0x00007fff856640a6 _ZL30SendEventToEventTargetInternalP14OpaqueEventRefP20OpaqueEventTargetRefP14HandlerCallRec + 395
	15  HIToolbox                           0x00007fff85681d85 SendEventToEventTarget + 45
	16  HIToolbox                           0x00007fff856b0e61 _ZL18SendHICommandEventjPK9HICommandjjhPKvP20OpaqueEventTargetRefS5_PP14OpaqueEventRef + 387
	17  HIToolbox                           0x00007fff856ddbf6 SendMenuCommandWithContextAndModifiers + 56
	18  HIToolbox                           0x00007fff856ddbae SendMenuItemSelectedEvent + 101
	19  HIToolbox                           0x00007fff856ddabe _ZL19FinishMenuSelectionP13SelectionDataP10MenuResultS2_ + 150
	20  HIToolbox                           0x00007fff857e6acb _ZL19PopUpMenuSelectCoreP8MenuData5PointdS1_tjPK4RecttjS4_S4_PK10__CFStringPP13OpaqueMenuRefPt + 1618
	21  HIToolbox                           0x00007fff857e6e24 _HandlePopUpMenuSelection7 + 665
	22  AppKit                              0x00007fff833a46db _NSSLMPopUpCarbonMenu3 + 3720
	23  AppKit                              0x00007fff835d41b5 -[NSStatusBarButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 162
	24  AppKit                              0x00007fff832d7c59 -[NSControl mouseDown:] + 624
	25  AppKit                              0x00007fff831f1f1b -[NSWindow sendEvent:] + 5409
	26  AppKit                              0x00007fff835d4f54 -[NSStatusBarWindow sendEvent:] + 68
	27  AppKit                              0x00007fff83127662 -[NSApplication sendEvent:] + 4719
	28  AppKit                              0x00007fff830be0aa -[NSApplication run] + 474
	29  ???                                 0x0000000101101ac7 0x0 + 4312799943
	30  libmacruby.dylib                    0x000000010014b5c0 rb_vm_dispatch + 3184
	31  ???                                 0x0000000101100834 0x0 + 4312795188
	32  libmacruby.dylib                    0x000000010015f35f rb_vm_run + 351
	33  libmacruby.dylib                    0x0000000100045f59 ruby_run_node + 73
	34  macruby                             0x0000000100000d28 main + 152
	35  macruby                             0x0000000100000c88 start + 52
)
&lt;/pre&gt;&lt;p&gt;
(tested with &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.6 final)
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/720#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/726</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/726</guid>
        <title>#726: Methods added to String do not get added to all strings</title>
        <pubDate>Fri, 21 May 2010 18:18:06 GMT</pubDate>
          <dc:creator>dylan@…</dc:creator>
        <description>&lt;p&gt;
Methods added to the string class are not being added to the string returned from NSMutableString. I've also seen this with stringValue from NSTextFieldCell.
&lt;/p&gt;
&lt;p&gt;
The following will generate an error, even though the classes of the two objects are both 'String'.
&lt;/p&gt;
&lt;p&gt;
I'm not sure if this occurs with other open classes.
&lt;/p&gt;
&lt;pre class="wiki"&gt;class String
  def cook
    puts 'Bacon!'
  end
  def to_mutable_attributed_string
    NSMutableAttributedString.alloc.initWithString( self )
  end
end
base_string = 'breakfast'
puts base_string.class
base_string.cook
mutable = base_string.to_mutable_attributed_string
puts mutable.string.class
mutable.string.cook
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/726#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/733</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/733</guid>
        <title>#733: Proc as callback function for CoreAudio(AudioDeviceCreateIOProcID) isn't called</title>
        <pubDate>Mon, 31 May 2010 14:37:38 GMT</pubDate>
          <dc:creator>nagachika00@…</dc:creator>
        <description>&lt;p&gt;
I'm trying to output arbitrary waveform data to audio device with CoreAudio Framework, and confront a callback function problem. I attach sample scripts.
&lt;/p&gt;
&lt;p&gt;
At first, I have to apply a small dirty patch to &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; to avoid &lt;tt&gt;"unrecognized runtime type `?'"&lt;/tt&gt; exception. The function AudioDeviceStart/Stop take an argument has type &lt;tt&gt;"^?"&lt;/tt&gt;, but &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; doesn't allow that type. I attach the patch too.
&lt;/p&gt;
&lt;p&gt;
In my sample, register Proc as callback function with AudioDeviceCreateIOProcID() seems success. Then call AudioDeviceStart() to start playback, but the Proc object seems never called.
The sample script intends play silent waveform, so make no sound is OK, but log message to stdout with Kernel#p method isn't available.
&lt;/p&gt;
&lt;p&gt;
The callback function in CoreAudio is called from CoreAudio internal thread. Is that the cause of the problem?
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby -I. coreaudio_sample.rb
Default Output Device ID = 268
#&amp;lt;Pointer:0x2002565a0&amp;gt;
start
sleep
macruby(19434,0x103cc7000) malloc: *** auto malloc[19434]: error: GC operation on unregistered thread. Thread registered implicitly. Break on auto_zone_thread_registration_error() to debug.
stop
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/733#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/742</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/742</guid>
        <title>#742: Encoding is always UTF-8 (?)</title>
        <pubDate>Tue, 08 Jun 2010 15:25:30 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test code:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ cat a.rb
# coding: us-ascii
p __ENCODING__        #=&amp;gt; #&amp;lt;Encoding:US-ASCII&amp;gt;
p "abc".encoding      #=&amp;gt; #&amp;lt;Encoding:US-ASCII&amp;gt;
p "\x80".encoding     #=&amp;gt; #&amp;lt;Encoding:ASCII-8BIT&amp;gt;
&lt;/pre&gt;&lt;p&gt;
Result on Ruby 1.9.2 preview3:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby -v a.rb
ruby 1.9.2dev (2010-05-31 revision 28117) [x86_64-darwin10.3.0]
#&amp;lt;Encoding:US-ASCII&amp;gt;
#&amp;lt;Encoding:US-ASCII&amp;gt;
#&amp;lt;Encoding:ASCII-8BIT&amp;gt;
&lt;/pre&gt;&lt;p&gt;
Result on &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby a.rb
#&amp;lt;Encoding:US-ASCII&amp;gt;
#&amp;lt;Encoding:UTF-8&amp;gt;
#&amp;lt;Encoding:UTF-8&amp;gt;
&lt;/pre&gt;&lt;p&gt;
When script encoding is "us-ascii", I think that literal encoding should return "ASCII-8BIT".
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/742#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/762</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/762</guid>
        <title>#762: Some regexp returns "compilation error: U_REGEX_RULE_SYNTAX".</title>
        <pubDate>Fri, 25 Jun 2010 14:20:04 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
I attach a UnitTest of Ruby 1.9.2 preview 3.
Some regexp returns "compilation error" in this UnitTest.
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_regexp.rb
test_regexp.rb:76: regexp `&amp;amp;(?&amp;lt;foo&amp;gt;.*?);' compilation error: U_REGEX_RULE_SYNTAX
test_regexp.rb:84: regexp `&amp;amp;(?&amp;lt;foo&amp;gt;.*?);' compilation error: U_REGEX_RULE_SYNTAX
test_regexp.rb:87: regexp `&amp;amp;(?&amp;lt;foo&amp;gt;.*?); (y)' compilation error: U_REGEX_RULE_SYNTAX
test_regexp.rb:91: regexp `&amp;amp;(?&amp;lt;foo&amp;gt;.*?); (?&amp;lt;bar&amp;gt;y)' compilation error: U_REGEX_RULE_SYNTAX
test_regexp.rb:93: regexp `&amp;amp;(?&amp;lt;foo&amp;gt;.*?); (?&amp;lt;foo&amp;gt;y)' compilation error: U_REGEX_RULE_SYNTAX
test_regexp.rb:95: regexp `(?&amp;lt;id&amp;gt;[A-Za-z_]+)' compilation error: U_REGEX_RULE_SYNTAX
---- snip ----
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/762#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/769</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/769</guid>
        <title>#769: String::ord with packed array in MacRuby</title>
        <pubDate>Wed, 30 Jun 2010 23:47:54 GMT</pubDate>
          <dc:creator>babs.devs@…</dc:creator>
        <description>&lt;p&gt;
When attempting to get the ordinal from a character of an array packed to a binary string, &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; returns inconsistent values, and sometimes seg. faults.
&lt;/p&gt;
&lt;pre class="wiki"&gt;sha1 = ["94f389bf5d9af4511597d035e69d1be9510b50c7"].pack("H*")
sha1[0].ord
#Macirb has returned:
#  63, 96, 65428(most often), 65535, and seg. faults
#Irb returns: 148
foo = ['bar'].pack('H*')
foo[1].ord
#Macirb:65456 Irb:176
"cat"[0].ord
#Works as expected
&lt;/pre&gt;&lt;p&gt;
Tested with Ruby 1.9.1 and Macruby 6/23/10 nightly.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/769#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/772</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/772</guid>
        <title>#772: Assertion fails with 4 bytes non-BMP UTF-8.</title>
        <pubDate>Tue, 06 Jul 2010 10:38:08 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Assertion fails when I use UTF-8 charactor from U+010000 to U+10FFFF (4 bytes UTF-8).
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macirb
irb(main):001:0&amp;gt; p "\u{010000}".chop
Assertion failed: (beg.start_offset_in_bytes != -1), function str_splice, file string.c, line 754.
zsh: abort      macirb
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ macirb
irb(main):001:0&amp;gt; p "\u{10FFFF}".chop
Assertion failed: (beg.start_offset_in_bytes != -1), function str_splice, file string.c, line 754.
zsh: abort      macirb
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ macirb
irb(main):001:0&amp;gt; p "\u{010000}".reverse
Assertion failed: (U_SUCCESS(err)), function str_ucnv_make_data_binary, file ucnv.c, line 96.
zsh: abort      macirb
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ macirb
irb(main):001:0&amp;gt; p "\u{10FFFF}".reverse
Assertion failed: (U_SUCCESS(err)), function str_ucnv_make_data_binary, file ucnv.c, line 96.
zsh: abort      macirb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/772#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/781</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/781</guid>
        <title>#781: Segfault on #inspect with Classes sans :allocate.</title>
        <pubDate>Fri, 09 Jul 2010 07:08:50 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ cat test_alloc.rb
# '[ruby-core:30843]'
s = Symbol.dup
class &amp;lt;&amp;lt; s
end
begin
  p s.allocate
rescue
end
s = Symbol.dup
class &amp;lt;&amp;lt; s
end
begin
  s.allocate.to_s
rescue
end
$SAFE=4
s = Symbol.dup
s.define_singleton_method(:allocate, -&amp;gt;{ super() })
begin
  p s.new
rescue
end
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ macruby test_alloc.rb
zsh: segmentation fault  macruby test_alloc.rb
&lt;/pre&gt;&lt;p&gt;
I referred to Ruby's &lt;a class="ext-link" href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/30843"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/30843&lt;/a&gt;
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/781#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/786</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/786</guid>
        <title>#786: MacRuby does not finish when more exceptions is generated on same Thread almost at the same time.</title>
        <pubDate>Tue, 13 Jul 2010 13:42:36 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;# [ruby-dev:31371]&lt;/span&gt;
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;times &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;i&lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="k"&gt;begin&lt;/span&gt;
      th &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;start&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;current&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;u&lt;span class="o"&gt;|&lt;/span&gt; u&lt;span class="o"&gt;.&lt;/span&gt;raise &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="k"&gt;raise&lt;/span&gt;
    &lt;span class="k"&gt;rescue&lt;/span&gt;
    &lt;span class="k"&gt;ensure&lt;/span&gt;
      th&lt;span class="o"&gt;.&lt;/span&gt;join
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;rescue&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
I referred to Ruby's &lt;a class="ext-link" href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-dev/31371"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-dev/31371&lt;/a&gt; .
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/786#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/789</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/789</guid>
        <title>#789: An Error does not occur when DeadLock occurred in Thread/Mutex.</title>
        <pubDate>Wed, 14 Jul 2010 03:26:07 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ cat test_deadlock_1.rb
Thread.new { Thread.stop }
Thread.stop
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ cat test_deadlock_2.rb
Thread.current.join
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ cat test_deadlock_3.rb
m1 = Mutex.new
m2 = Mutex.new
Thread.new {
  m1.lock
  sleep 1
  m2.lock
}
p "m2.lock"
m2.lock
p "sleep 1"
sleep 1
p "m1.lock"
m1.lock
&lt;/pre&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_deadlock_1.rb
test_deadlock_1.rb:2:in `stop': deadlock detected (fatal)
        from test_deadlock_1.rb:2:in `&amp;lt;main&amp;gt;'
$ ruby test_deadlock_2.rb
test_deadlock_2.rb:1:in `join': deadlock detected (fatal)
        from test_deadlock_2.rb:1:in `&amp;lt;main&amp;gt;'
$ ruby test_deadlock_3.rb
"m2.lock"
"sleep 1"
"m1.lock"
test_deadlock_3.rb:17:in `lock': deadlock detected (fatal)
        from test_deadlock_3.rb:17:in `&amp;lt;main&amp;gt;'
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/789#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/791</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/791</guid>
        <title>#791: Array#hash is broken.</title>
        <pubDate>Wed, 14 Jul 2010 14:51:43 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ cat test_array_hash.rb
a1 = [ 'cat',   1, 'dog' ]
a2 = [ 'cat', 1.0, 'dog' ]
a3 = [ 'dog',   1, 'cat' ]
p "a1 : #{a1.hash}"
p "a2 : #{a2.hash}"
p "a3 : #{a3.hash}"
p (a1 == a2)
p (a1.hash != a2.hash)
p (a1 != a3)
p (a1.hash != a3.hash)
&lt;/pre&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_array_hash.rb
"a1 : 3881081910"
"a2 : 2335851546"
"a3 : 8388414684"
true
true
true
true
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_array_hash.rb
"a1 : 3"
"a2 : 3"
"a3 : 3"
true
false
true
false
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/791#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/794</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/794</guid>
        <title>#794: `pthread_mutex_unlock(&amp;t-&gt;sleep_mutex)' failed: Invalid argument (22)</title>
        <pubDate>Thu, 15 Jul 2010 09:15:59 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
I atach the Test Script of Ruby 1.9.2 RC2.
An Error occurs when executed "test_require.rb":
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_require.rb
Loaded suite test_require
Started
pthread command `pthread_mutex_unlock(&amp;amp;t-&amp;gt;sleep_mutex)' failed: Invalid argument (22)
zsh: abort      macruby test_require.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/794#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/798</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/798</guid>
        <title>#798: Processing after Proc is not executed when use Proc in lambda, and when calls `return' in Proc.</title>
        <pubDate>Fri, 16 Jul 2010 16:16:40 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat test_proc&lt;span class="o"&gt;.&lt;/span&gt;rb
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test_lambda_lambda&lt;/span&gt;
  &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"test_lambda_lambda"&lt;/span&gt;
  &lt;span class="nb"&gt;lambda&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nb"&gt;lambda&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="ss"&gt;:ng&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;call
  &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;call
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="ss"&gt;:ok&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test_lambda_proc&lt;/span&gt;
  &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"test_lambda_proc"&lt;/span&gt;
  &lt;span class="nb"&gt;lambda&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="no"&gt;Proc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="ss"&gt;:ng&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;call
  &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;call
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="ss"&gt;:ok&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test_proc_proc&lt;/span&gt;
  &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"test_proc_proc"&lt;/span&gt;
  &lt;span class="no"&gt;Proc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="no"&gt;Proc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="ss"&gt;:ok&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;call
  &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;call
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="ss"&gt;:ng&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; test_lambda_lambda
&lt;span class="nb"&gt;p&lt;/span&gt; test_lambda_proc
&lt;span class="nb"&gt;p&lt;/span&gt; test_proc_proc
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;"test_lambda_lambda"
:ok
"test_lambda_proc"
:ok
"test_proc_proc"
:ok
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_proc.rb
"test_lambda_lambda"
:ok
"test_lambda_proc"
:ng
"test_proc_proc"
:ok
&lt;/pre&gt;&lt;p&gt;
Ruby 1.8:
&lt;/p&gt;
&lt;pre class="wiki"&gt;"test_lambda_lambda"
:ok
"test_lambda_proc"
:ng
"test_proc_proc"
:ok
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/798#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/799</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/799</guid>
        <title>#799: Abort occurs when will raise LocalJumpError with Proc.</title>
        <pubDate>Fri, 16 Jul 2010 16:54:28 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ cat test_proc_2.rb
def get_me_a_return
  Proc.new { return 42 }
end
get_me_a_return.call  # =&amp;gt; LocalJumpError: unexpected return
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_proc_2.rb
uncaught Objective-C/C++ exception...
terminate called after throwing an instance of 'RoxorReturnFromBlockException*'
zsh: abort      macruby test_proc_2.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/799#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/800</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/800</guid>
        <title>#800: MacRuby throws an exception of "LocalJumpError" when use the `yield' in Proc.</title>
        <pubDate>Sat, 17 Jul 2010 13:14:02 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat test_proc_3&lt;span class="o"&gt;.&lt;/span&gt;rb
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;
  a &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
  m2 &lt;span class="p"&gt;{&lt;/span&gt;
    a
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;m2&lt;/span&gt;
  b &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
  &lt;span class="no"&gt;Proc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="k"&gt;yield&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; b&lt;span class="o"&gt;]&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; m&lt;span class="o"&gt;.&lt;/span&gt;call &lt;span class="c1"&gt;# =&amp;gt; expected "[1, 2]"&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_proc_3.rb
[1, 2]
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_proc_3.rb
no block given (LocalJumpError)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/800#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/801</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/801</guid>
        <title>#801: The eval is broken when calls eval with Class/Proc's binding.</title>
        <pubDate>Sat, 17 Jul 2010 15:07:47 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat test_eval_1&lt;span class="o"&gt;.&lt;/span&gt;rb
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"** 1"&lt;/span&gt;
a1 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;:ng&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;
  a1 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;:ok&lt;/span&gt;
  &lt;span class="vg"&gt;$b1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;binding&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
m
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="nb"&gt;eval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'a1'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="vg"&gt;$b1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;#----------&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"** 2"&lt;/span&gt;
b &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;proc&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
  a2 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;:ok&lt;/span&gt;
  &lt;span class="nb"&gt;binding&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;call
a2 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;:ng&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="nb"&gt;eval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'a2'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; b&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;#----------&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"** 3"&lt;/span&gt;
&lt;span class="no"&gt;INFO&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;:ng&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C1&lt;/span&gt;
  &lt;span class="no"&gt;INFO&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;:ok&lt;/span&gt;
  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;
    &lt;span class="nb"&gt;binding&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="nb"&gt;eval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'INFO'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="no"&gt;C1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="o"&gt;.&lt;/span&gt;m&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;#----------&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"** 4"&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C2&lt;/span&gt;
  &lt;span class="vg"&gt;$b2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;binding&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="nb"&gt;eval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sx"&gt;%q{
  def m
    :ok
  end
}&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="vg"&gt;$b2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="no"&gt;C2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="o"&gt;.&lt;/span&gt;m
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_eval_1.rb
"** 1"
:ok
"** 2"
:ok
"** 3"
:ok
"** 4"
:ok
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_eval_1.rb
"** 1"
:ok
"** 2"
:ng
"** 3"
:ng
"** 4"
/Users/watson/test/ruby/macruby/test_eval_1.rb:1:in `&amp;lt;main&amp;gt;': private method `m' called for #&amp;lt;C2:0x2000c69a0&amp;gt; (NoMethodError)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/801#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/812</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/812</guid>
        <title>#812: Eval with binding is not able to retrieve local_variables</title>
        <pubDate>Sun, 25 Jul 2010 10:30:00 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;$ cat t.rb
toplevel = :ok
p local_variables
p eval('local_variables', TOPLEVEL_BINDING)
b = Object.new.instance_eval { binding }
p b
eval('not_toplevel = :ok', b)
p eval('local_variables', b)
$ ruby19 t.rb
[:toplevel, :b]
[:toplevel, :b]
#&amp;lt;Binding:0x00000100864bf0&amp;gt;
[:not_toplevel, :toplevel, :b]
$ macruby t.rb
[:toplevel, :b]
[]
#&amp;lt;Binding:0x2000c5ea0&amp;gt;
[]
&lt;/pre&gt;&lt;p&gt;
This is needed by dietrb in order to complete lvars or methods on a lvar.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/812#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/823</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/823</guid>
        <title>#823: ActiveSupport 3 RC1 Not working</title>
        <pubDate>Wed, 04 Aug 2010 21:23:51 GMT</pubDate>
          <dc:creator>maccman@…</dc:creator>
        <description>&lt;p&gt;
The following code:
&lt;/p&gt;
&lt;p&gt;
require "active_support/all"
&lt;/p&gt;
&lt;p&gt;
Raises:
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
incompatible character encodings: UTF-8 and ASCII-8BIT (Encoding::CompatibilityError)
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
I'm afraid I can't give you a stack trace, as &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; isn't giving me one.
&lt;/p&gt;
&lt;p&gt;
I'm using the nightly build (tonights).
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/823#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/827</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/827</guid>
        <title>#827: Assertion fails when calls String#tr and String#tr! with replace string to above-mentioned "\u0000FFFF".</title>
        <pubDate>Thu, 05 Aug 2010 08:25:52 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat test_string&lt;span class="o"&gt;.&lt;/span&gt;rb
string &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"abcd"&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; string&lt;span class="o"&gt;.&lt;/span&gt;tr&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"d"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"\u0000FFFE"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; string&lt;span class="o"&gt;.&lt;/span&gt;tr&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"d"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"\u0000FFFF"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; string&lt;span class="o"&gt;.&lt;/span&gt;tr!&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"d"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"\u0000FFFE"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; string&lt;span class="o"&gt;.&lt;/span&gt;tr!&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"d"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"\u0000FFFF"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_string.rb
"abcþ"
"abcÿ"
"abcþ"
nil
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_string.rb
"abc\xFFFE"
Assertion failed: (repl_buflen &amp;gt; 0), function create_translate_charset_table, file string.c, line 5152.
zsh: abort      macruby test_string.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/827#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/828</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/828</guid>
        <title>#828: A NameError, raised from evalling, gets the wrong constant name.</title>
        <pubDate>Thu, 05 Aug 2010 08:34:54 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;% macruby -e 'module X; eval("Lost", TOPLEVEL_BINDING); end'
/Users/eloy/Documents/DEVELOPMENT/MacRuby/interactive-macruby/-e:1:in `block': uninitialized constant X::Lost (NameError)
	from /Users/eloy/Documents/DEVELOPMENT/MacRuby/interactive-macruby/-e:1:in `&amp;lt;main&amp;gt;'
% ruby19 -e 'module X; eval("Lost", TOPLEVEL_BINDING); end'
-e:1:in `eval': uninitialized constant Object::Lost (NameError)
	from -e:1:in `eval'
	from -e:1:in `&amp;lt;module:X&amp;gt;'
	from -e:1:in `&amp;lt;main&amp;gt;'
% ruby -e 'module X; eval("Lost", TOPLEVEL_BINDING); end'
-e:1:in `eval': (eval):1: uninitialized constant Lost (NameError)
&lt;/pre&gt;&lt;p&gt;
I should note that on 1.9.3 (trunk), it's changed back to 1.8's behavior, which is to report simply ‘Lost’, not prefixed with ‘Object::’. I think we should try to do that as well. This is from Thibault on 1.9.3:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$&amp;gt; ruby19 -e 'module X; eval("Lost", TOPLEVEL_BINDING); end'
&amp;lt;main&amp;gt;:in `&amp;lt;main&amp;gt;': uninitialized constant Lost (NameError)
	from -e:1:in `eval'
	from -e:1:in `&amp;lt;module:X&amp;gt;'
	from -e:1:in `&amp;lt;main&amp;gt;'
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/828#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/829</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/829</guid>
        <title>#829: Retrieving a list of local variables from a Binding instance fails</title>
        <pubDate>Thu, 05 Aug 2010 08:42:31 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;% macruby -e "b = Object.new.instance_eval { binding }; eval('x = :ok', b); eval('p local_variables', b)"
[]
% ruby19 -e "b = Object.new.instance_eval { binding }; eval('x = :ok', b); eval('p local_variables', b)"
[:x, :b]
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/829#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/831</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/831</guid>
        <title>#831: Received request header with Webrick HTTPD is broken after GC is executed.</title>
        <pubDate>Thu, 05 Aug 2010 17:10:03 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat &lt;span class="nb"&gt;test&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;rb
&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s1"&gt;'open-uri'&lt;/span&gt;
&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s1"&gt;'webrick'&lt;/span&gt;
&lt;span class="no"&gt;NullLog&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nc"&gt;NullLog&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;arg&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;with_http&lt;/span&gt;
  &lt;span class="no"&gt;Dir&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;mktmpdir &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;dr&lt;span class="o"&gt;|&lt;/span&gt;
    srv &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;WEBrick&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;HTTPServer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="p"&gt;({&lt;/span&gt;
        &lt;span class="ss"&gt;:DocumentRoot&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; dr&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="ss"&gt;:ServerType&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="ss"&gt;:Logger&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="no"&gt;WEBrick&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;NullLog&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="ss"&gt;:AccessLog&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt;&lt;span class="no"&gt;NullLog&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;""&lt;/span&gt;&lt;span class="o"&gt;]]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="ss"&gt;:BindAddress&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;'127.0.0.1'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="ss"&gt;:Port&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;8080&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
    _&lt;span class="p"&gt;,&lt;/span&gt; port&lt;span class="p"&gt;,&lt;/span&gt; _&lt;span class="p"&gt;,&lt;/span&gt; host &lt;span class="o"&gt;=&lt;/span&gt; srv&lt;span class="o"&gt;.&lt;/span&gt;listeners&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;addr
    &lt;span class="k"&gt;begin&lt;/span&gt;
      th &lt;span class="o"&gt;=&lt;/span&gt; srv&lt;span class="o"&gt;.&lt;/span&gt;start
      &lt;span class="k"&gt;yield&lt;/span&gt; srv&lt;span class="p"&gt;,&lt;/span&gt; dr&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"http://&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;host&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;:&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;port&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
    &lt;span class="k"&gt;ensure&lt;/span&gt;
      srv&lt;span class="o"&gt;.&lt;/span&gt;shutdown
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
myheader1 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'hello world'&lt;/span&gt;
myheader2 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kp"&gt;nil&lt;/span&gt;
with_http &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;srv&lt;span class="p"&gt;,&lt;/span&gt; dr&lt;span class="p"&gt;,&lt;/span&gt; url&lt;span class="o"&gt;|&lt;/span&gt;
  srv&lt;span class="o"&gt;.&lt;/span&gt;mount_proc&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"/h/"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;req&lt;span class="p"&gt;,&lt;/span&gt; res&lt;span class="o"&gt;|&lt;/span&gt;
    myheader2 &lt;span class="o"&gt;=&lt;/span&gt; req&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'myheader'&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"recv [1] : before GC : &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;myheader2&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
    &lt;span class="no"&gt;GC&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;start
    &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"recv [2] :  after GC : &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;myheader2&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
    res&lt;span class="o"&gt;.&lt;/span&gt;body &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"foo"&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;url&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/h/"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'MyHeader'&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;myheader1&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;f&lt;span class="o"&gt;|&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
GC Eabled:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test.rb
"recv [1] : before GC : hello world"
"recv [2] :  after GC : \xA1i\x00\x00\x00\x00\x00\x00\xE0n)"
&lt;/pre&gt;&lt;p&gt;
GC Disabled:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ GC_DISABLE=true macruby test.rb
"recv [1] : before GC : hello world"
"recv [2] :  after GC : hello world"
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/831#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/832</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/832</guid>
        <title>#832: “Thread.abort_on_exception = true” does not raise the exception in the main thread.</title>
        <pubDate>Fri, 06 Aug 2010 17:44:23 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;% ruby19 -e 'Thread.abort_on_exception = true; Thread.new { foo }; sleep 1; p :ok'
-e:1:in `block in &amp;lt;main&amp;gt;': undefined local variable or method `foo' for main:Object (NameError)
% macruby -e 'Thread.abort_on_exception = true; Thread.new { foo }; sleep 1; p :ok'
:ok
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/832#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/834</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/834</guid>
        <title>#834: Inspecting a string with multibyte characters from an application prints escaped characters</title>
        <pubDate>Sat, 07 Aug 2010 21:14:26 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;p&gt;
When printing these from a running Cocoa app:
&lt;/p&gt;
&lt;pre class="wiki"&gt;p "いえい"
puts "いえい"
&lt;/pre&gt;&lt;p&gt;
It comes out like this:
&lt;/p&gt;
&lt;pre class="wiki"&gt;"\x3044\x3048\x3044"
いえい
&lt;/pre&gt;&lt;p&gt;
Note that this problem only occurs when ran from a Cocoa app, from the command-line it prints the characters as expected.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/834#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/837</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/837</guid>
        <title>#837: Abort occurs that it is displayed "unrecognized dispatch arg node: 76 (NODE_BLOCK_PASS)".</title>
        <pubDate>Tue, 10 Aug 2010 00:09:30 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat &lt;span class="nb"&gt;test&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;rb
o &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; o&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nb"&gt;self&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;end&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;instance_eval &lt;span class="k"&gt;do&lt;/span&gt;
  define_method&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:[]=&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;|*&lt;/span&gt;r&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;b&lt;span class="o"&gt;|&lt;/span&gt; b&lt;span class="o"&gt;.&lt;/span&gt;call&lt;span class="p"&gt;(&lt;/span&gt;r&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
r &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kp"&gt;nil&lt;/span&gt;
&lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class="no"&gt;END&lt;/span&gt;
&lt;span class="sh"&gt;  o[&amp;amp;proc{|x| r = x }] = 1
&lt;/span&gt;&lt;span class="no"&gt;END
&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; r
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test.rb
[1]
&lt;/pre&gt;&lt;p&gt;
Result of Ruby 1.8.7:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ usr/bin/ruby test.rb
test.rb:6: (eval):1: compile error (SyntaxError)
(eval):1: syntax error, unexpected tAMPER, expecting ']'
  o[&amp;amp;proc{|x| r = x }] = 1
     ^
(eval):1: syntax error, unexpected ']', expecting $end
  o[&amp;amp;proc{|x| r = x }] = 1
                      ^
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test.rb
unrecognized dispatch arg node: 76 (NODE_BLOCK_PASS)zsh: abort      macruby test.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/837#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/842</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/842</guid>
        <title>#842: setting $SAFE inside Proc should not override top-level $SAFE</title>
        <pubDate>Tue, 10 Aug 2010 07:56:31 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat test_safe&lt;span class="o"&gt;.&lt;/span&gt;rb
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt;
  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;
    &lt;span class="vg"&gt;$SAFE&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;block&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    block&lt;span class="o"&gt;.&lt;/span&gt;call
  &lt;span class="k"&gt;rescue&lt;/span&gt; &lt;span class="no"&gt;SecurityError&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; e
    &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"ok : &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;e&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
  &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"ng"&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"** level 1"&lt;/span&gt;
b &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;lambda&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="vg"&gt;$SAFE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
  &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="s2"&gt;"1 + 1"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;taint
&lt;span class="p"&gt;}&lt;/span&gt;
run&lt;span class="p"&gt;{&lt;/span&gt; b&lt;span class="o"&gt;.&lt;/span&gt;call &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"** level 2"&lt;/span&gt;
b &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;lambda&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="vg"&gt;$SAFE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
  &lt;span class="no"&gt;Dir&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;chdir&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;".."&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
run&lt;span class="p"&gt;{&lt;/span&gt; b&lt;span class="o"&gt;.&lt;/span&gt;call &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"** level 3"&lt;/span&gt;
b &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;lambda&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="vg"&gt;$SAFE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
  &lt;span class="s2"&gt;"1 + 1"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;untaint
&lt;span class="p"&gt;}&lt;/span&gt;
run&lt;span class="p"&gt;{&lt;/span&gt; b&lt;span class="o"&gt;.&lt;/span&gt;call &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"** level 4"&lt;/span&gt;
d &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;lambda&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="vg"&gt;$SAFE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
  dclass &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="p"&gt;(&lt;/span&gt;C&lt;span class="p"&gt;)&lt;/span&gt;
  dclass&lt;span class="o"&gt;.&lt;/span&gt;send&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:alias_method&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:mm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:m&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  dclass&lt;span class="o"&gt;.&lt;/span&gt;new
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;call
run&lt;span class="p"&gt;{&lt;/span&gt; d&lt;span class="o"&gt;.&lt;/span&gt;mm &lt;span class="p"&gt;}&lt;/span&gt;
b &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;lambda&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  d &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Dir&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;open&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'.'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="vg"&gt;$SAFE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
  d&lt;span class="o"&gt;.&lt;/span&gt;close
&lt;span class="p"&gt;}&lt;/span&gt;
run&lt;span class="p"&gt;{&lt;/span&gt; b&lt;span class="o"&gt;.&lt;/span&gt;call &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_safe.rb
** level 1
"ok : Insecure operation - eval"
** level 2
"ok : Insecure operation `chdir' at level 2"
** level 3
"ok : Insecure operation `untaint' at level 3"
** level 4
"ok : calling insecure method: mm"
"ok : Insecure: operation on trusted Dir"
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_safe.rb
** level 1
"ok : Insecure operation: -r"
** level 2
"ok : Insecure operation at level 2"
** level 3
"ok : Insecure operation at level 3"
** level 4
/Users/watson/test/ruby/macruby/test_safe.rb:9:in `run': Insecure operation at level 4 (SecurityError)
	from /Users/watson/test/ruby/macruby/test_safe.rb:1:in `&amp;lt;main&amp;gt;'
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/842#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/849</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/849</guid>
        <title>#849: MacRuby throws the exception of "Encoding::CompatibilityError" with various cases.</title>
        <pubDate>Thu, 12 Aug 2010 02:48:57 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
In the range that I understood, I collected the test-cases from Ruby 1.9.2 RC2 that &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; throws the exception of "Encoding::CompatibilityError".&lt;br /&gt;
I atach the test-cases.
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_fileutils.rb
Loaded suite test_fileutils
Started
EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE
Finished in 2.835229 seconds.
  1) Error:
test_cd(TestFileUtils):
Encoding::CompatibilityError: incompatible character encodings: UTF-8 and ASCII-8BIT
    /Users/watson/tmp/test_encode/test_fileutils.rb:116:in `prepare_data_file'
--- snip ---
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ macruby test_encode_error.rb
Loaded suite test_encode_error
Started
EEEEEEEEEEEEEEEEEE
Finished in 1.792149 seconds.
  1) Error:
test_cgi_unescape(CGIUtilTest):
Encoding::CompatibilityError: incompatible character encodings: UTF-8 and ASCII-8BIT
    /Users/watson/tmp/test_encode/test_encode_error.rb:20:in `test_cgi_unescape'
--- snip ---
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/849#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/856</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/856</guid>
        <title>#856: String#count and #tr are broken, contain escaped '-' or '^' in those arguments.</title>
        <pubDate>Wed, 18 Aug 2010 08:45:35 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat t&lt;span class="o"&gt;.&lt;/span&gt;rb
tmp &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"qwerty^&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;-"&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; tmp&lt;span class="o"&gt;.&lt;/span&gt;size           &lt;span class="c1"&gt;# =&amp;gt; 9&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; tmp&lt;span class="o"&gt;.&lt;/span&gt;count&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"a-z"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;span class="c1"&gt;# =&amp;gt; 6&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; tmp&lt;span class="o"&gt;.&lt;/span&gt;count&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"a&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;-z"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# =&amp;gt; 1&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; tmp&lt;span class="o"&gt;.&lt;/span&gt;count&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"^y"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;    &lt;span class="c1"&gt;# =&amp;gt; 8&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; tmp&lt;span class="o"&gt;.&lt;/span&gt;count&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;^y"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# =&amp;gt; 2&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; tmp&lt;span class="o"&gt;.&lt;/span&gt;count&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"y^&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# =&amp;gt; 3&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"abcdefghijxyz"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;tr&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"a&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;-z"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'A Z'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;span class="c1"&gt;# =&amp;gt; "AbcdefghijxyZ"&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"abcdefghijxyz"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;tr&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"a&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;-z"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'A\\-Z'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# =&amp;gt; "AbcdefghijxyZ"&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ VM_DISABLE_RBO=true DYLD_LIBRARY_PATH=. ./macruby -I./lib t.rb
9
6
8
8
3
3
"ZZZZZZZZZZZZZ"
invalid string transliteration (ArgumentError)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/856#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/860</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/860</guid>
        <title>#860: Assertion fails in pop_current_exception when catch/throw used in rescue</title>
        <pubDate>Fri, 20 Aug 2010 06:46:44 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat test_catch_throw&lt;span class="o"&gt;.&lt;/span&gt;rb
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="k"&gt;raise&lt;/span&gt;
&lt;span class="k"&gt;rescue&lt;/span&gt;
  &lt;span class="kp"&gt;catch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:ambiguous&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="kp"&gt;throw&lt;/span&gt; &lt;span class="ss"&gt;:ambiguous&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="ss"&gt;:ok&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_catch_throw.rb
:ok
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_catch_throw.rb
Assertion failed: ((size_t)pos &amp;lt; current_exceptions.size()), function pop_current_exception, file vm.cpp, line 3343.
zsh: abort      macruby test_opt.rb
&lt;/pre&gt;&lt;p&gt;
Original report (involving optparse) which was deleted:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ cat test_opt.rb
require 'optparse'
opt = OptionParser.new
flag = self.class
opt.def_option("--open") {|x|}
opt.def_option("-x") {|x| flag = x}
opt.def_option("--option") {|x| flag = x}
begin
  opt.parse!(%w"--op")
rescue =&amp;gt; e
  p e
end
begin
  opt.parse!(%w"-o")
rescue =&amp;gt; e
  p e
end
&lt;/pre&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_opt.rb
#&amp;lt;OptionParser::AmbiguousOption: --op&amp;gt;
#&amp;lt;OptionParser::AmbiguousOption: -o&amp;gt;
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_opt.rb
#&amp;lt;OptionParser::AmbiguousOption: --op&amp;gt;
Assertion failed: ((size_t)pos &amp;lt; current_exceptions.size()), function
pop_current_exception, file vm.cpp, line 3343.
zsh: abort      macruby test_opt.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/860#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/861</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/861</guid>
        <title>#861: Abort occurs when throws an exception within Signal handler.</title>
        <pubDate>Fri, 20 Aug 2010 07:23:43 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;cat t&lt;span class="o"&gt;.&lt;/span&gt;rb
&lt;span class="k"&gt;begin&lt;/span&gt;
  &lt;span class="no"&gt;Signal&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;trap&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:INT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="s2"&gt;"Interrupt"&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="no"&gt;Process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;kill &lt;span class="ss"&gt;:INT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="no"&gt;Process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;pid
  &lt;span class="nb"&gt;sleep&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="k"&gt;rescue&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; e
  &lt;span class="nb"&gt;p&lt;/span&gt; e
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby t.rb
#&amp;lt;RuntimeError: Interrupt&amp;gt;
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ DYLD_LIBRARY_PATH=. ./macruby -I./lib t.rb
2010-08-20 16:22:32.883 macruby[88979:903] *** Terminating app due to uncaught exception 'RuntimeError', reason: '/Users/watson/src/MacRuby/t.rb:2:in `block': Interrupt (RuntimeError)
        from /Users/watson/src/MacRuby/t.rb:2:in `&amp;lt;main&amp;gt;'
'
*** Call stack at first throw:
(
        0   CoreFoundation                      0x00007fff81865cc4 __exceptionPreprocess + 180
        1   libobjc.A.dylib                     0x00007fff812050f3 objc_exception_throw + 45
        2   libmacruby.1.9.2.dylib              0x00000001001535e5 rb_vm_raise + 437
        3   libmacruby.1.9.2.dylib              0x00000001000400cb rb_f_raise + 43
        4   libmacruby.1.9.2.dylib              0x0000000100140c69 rb_vm_dispatch + 6841
        5   ???                                 0x0000000103e00780 0x0 + 4359980928
        6   ???                                 0x0000000103e00c5d 0x0 + 4359982173
        7   libmacruby.1.9.2.dylib              0x0000000100142569 rb_vm_block_eval + 1401
        8   libmacruby.1.9.2.dylib              0x0000000100140c69 rb_vm_dispatch + 6841
        9   libmacruby.1.9.2.dylib              0x0000000100100c95 rb_eval_cmd + 677
        10  libmacruby.1.9.2.dylib              0x00000001000bc62a sighandler + 266
        11  libSystem.B.dylib                   0x00007fff8158a35a _sigtramp + 26
        12  ???                                 0x0000000000000000 0x0 + 0
        13  libmacruby.1.9.2.dylib              0x0000000100140c69 rb_vm_dispatch + 6841
        14  ???                                 0x0000000103e00780 0x0 + 4359980928
        15  ???                                 0x0000000103e0023c 0x0 + 4359979580
        16  libmacruby.1.9.2.dylib              0x000000010014dbb8 rb_vm_run + 488
        17  libmacruby.1.9.2.dylib              0x000000010003f600 ruby_run_node + 80
        18  macruby                             0x0000000100000d28 main + 152
        19  macruby                             0x0000000100000c88 start + 52
        20  ???                                 0x0000000000000003 0x0 + 3
)
terminate called after throwing an instance of 'NSException'
zsh: abort      DYLD_LIBRARY_PATH=. ./macruby -I./lib t.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/861#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/871</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/871</guid>
        <title>#871: Segfault occurs when access to variable within Blocks of Thread and Loop.</title>
        <pubDate>Mon, 23 Aug 2010 10:15:19 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="sr"&gt;/tmp/&lt;/span&gt;t&lt;span class="o"&gt;.&lt;/span&gt;rb
c1 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"** case 1"&lt;/span&gt;
th &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kp"&gt;loop&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;sleep&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
th&lt;span class="o"&gt;.&lt;/span&gt;kill
&lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"** case 2"&lt;/span&gt;
th &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kp"&gt;loop&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    c1 &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;sleep&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Sometimes, Segfault occurs even when set AUTO_USE_TLC=0.
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ AUTO_USE_TLC=0 DYLD_LIBRARY_PATH=. ./macruby -I./lib ~/tmp/t.rb
macruby(21632) malloc: auto malloc[21632]: AUTO_USE_TLC = "0" in environment. Thread local collector [TLC] disabled.
** case 1
** case 2
zsh: segmentation fault  AUTO_USE_TLC=0 DYLD_LIBRARY_PATH=. ./macruby -I./lib ~/tmp/t.rb
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ AUTO_USE_TLC=0 DYLD_LIBRARY_PATH=. gdb --args ./macruby -I./lib ~/tmp/t.rb
GNU gdb 6.3.50-20050815 (Apple version gdb-1469) (Wed May  5 04:36:56 UTC 2010)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin"...Reading symbols for shared libraries ..... done
(gdb) r
Starting program: /Users/watson/src/MacRuby/macruby -I./lib /Users/watson/tmp/t.rb
Reading symbols for shared libraries .++++.......................... done
macruby(21660) malloc: auto malloc[21660]: AUTO_USE_TLC = "0" in environment. Thread local collector [TLC] disabled.
Reading symbols for shared libraries . done
** case 1
** case 2
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: 13 at address: 0x0000000000000000
[Switching to process 21660]
0x00007fff81200052 in _cache_getMethod ()
(gdb) bt
#0  0x00007fff81200052 in _cache_getMethod ()
#1  0x00007fff811ff823 in look_up_method ()
#2  0x000000010013f272 in rb_vm_dispatch (_vm=0x103924a60, cache=0x103cfa7b0, top=0, self=4295275234, klass=0xfffda5e8207b8b48, sel=0x101572d40, block=0x0, opt=0 '\0', argc=1, argv=0x103cd2828) at dispatcher.cpp:602
#3  0x0000000103b83970 in ?? ()
#4  0x0000000103b83faf in ?? ()
#5  0x0000000103b84181 in ?? ()
#6  0x00000001001437a3 in rb_vm_yield_args (_vm=0x103924a60, argc=&amp;lt;value temporarily unavailable, due to optimizations&amp;gt;, argv=0xfffda5e8207b8b48) at dispatcher.cpp:98
#7  0x00000001000fd96c in loop_i () at vm_eval.c:194
#8  0x000000010015183a in rb_rescue2 (b_proc=&amp;lt;value temporarily unavailable, due to optimizations&amp;gt;, data1=&amp;lt;value temporarily unavailable, due to optimizations&amp;gt;, r_proc=0, data2=0) at vm.cpp:3395
#9  0x0000000100140bc6 in rb_vm_dispatch (_vm=0x103924a60, cache=0x103cffc40, top=8590070432, self=8590070432, klass=0x200020f60, sel=0x1015cfc00, block=0x2000bf200, opt=2 '\002', argc=&amp;lt;value temporarily unavailable, due to optimizations&amp;gt;, argv=0x0) at dispatcher.cpp:159
#10 0x0000000103b83970 in ?? ()
#11 0x0000000103b840aa in ?? ()
#12 0x0000000100142569 in rb_vm_block_eval (b=0x103924a60, argc=&amp;lt;value temporarily unavailable, due to optimizations&amp;gt;, argv=0x0) at dispatcher.cpp:98
#13 0x00000001001568e0 in rb_vm_thread_run (thread=8590726816) at vm.cpp:4420
#14 0x00007fff81563456 in _pthread_start ()
#15 0x00007fff81563309 in thread_start ()
(gdb)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/871#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/874</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/874</guid>
        <title>#874: Abort occurs when calls Thread#raise / #kill when Thread#join is called in block of Thread.</title>
        <pubDate>Tue, 24 Aug 2010 00:37:17 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat &lt;span class="nb"&gt;test&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;rb
t1 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nb"&gt;sleep&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
t2 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt;
  t1&lt;span class="o"&gt;.&lt;/span&gt;join
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;sleep&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
t2&lt;span class="o"&gt;.&lt;/span&gt;raise
&lt;span class="c1"&gt;#t2.kill&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ DYLD_LIBRARY_PATH=. ./macruby -I./lib test.rb
terminate called after throwing an instance of 'RoxorThreadRaiseException*'
zsh: abort      DYLD_LIBRARY_PATH=. ./macruby -I./lib test.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/874#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/875</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/875</guid>
        <title>#875: super dispatches aren't cached</title>
        <pubDate>Tue, 24 Aug 2010 04:07:14 GMT</pubDate>
          <dc:creator>lsansonetti@…</dc:creator>
        <description>&lt;p&gt;
As in trunk, calls to the super dispatcher aren't cached. This needs to be fixed for 0.7.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/875#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/881</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/881</guid>
        <title>#881: Abort occurs when calls Array#sort with array including Object, Using 32bit arch.</title>
        <pubDate>Mon, 30 Aug 2010 12:11:59 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;# spec/frozen/core/array/sort_spec.rb&lt;/span&gt;
&lt;span class="c1"&gt;# it "does not deal with exceptions raised by unimplemented or incorrect #&amp;lt;=&amp;gt;" do&lt;/span&gt;
o &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new
&lt;span class="o"&gt;[&lt;/span&gt;o&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;sort
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ DYLD_LIBRARY_PATH=. ./macruby -v -I./lib t1.rb
MacRuby 0.7 (ruby 1.9.2) [universal-darwin10.0, i386]
terminate called without an active exception
zsh: abort      DYLD_LIBRARY_PATH=. ./macruby -v -I./lib t1.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/881#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/883</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/883</guid>
        <title>#883: Abort occurs when calls Thread#kill, Using 32bit arch.</title>
        <pubDate>Mon, 30 Aug 2010 12:47:38 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;# spec/frozen/core/thread/alive_spec.rb&lt;/span&gt;
&lt;span class="c1"&gt;# it "describes a running thread" do&lt;/span&gt;
t &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nb"&gt;sleep&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
t&lt;span class="o"&gt;.&lt;/span&gt;kill
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ DYLD_LIBRARY_PATH=. ./macruby -v -I./lib t.rb
MacRuby 0.7 (ruby 1.9.2) [universal-darwin10.0, i386]
terminate called after throwing an instance of 'RoxorThreadRaiseException*'
zsh: abort      DYLD_LIBRARY_PATH=. ./macruby -v -I./lib t.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/883#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/884</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/884</guid>
        <title>#884: Abort occurs when calls Thread#value after throw an exception to a thread, Using 32bit arch.</title>
        <pubDate>Mon, 30 Aug 2010 13:37:15 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;# spec/frozen/core/thread/raise_spec.rb&lt;/span&gt;
&lt;span class="c1"&gt;# it "can go unhandled" do&lt;/span&gt;
t &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="k"&gt;do&lt;/span&gt;
  &lt;span class="kp"&gt;loop&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
t&lt;span class="o"&gt;.&lt;/span&gt;raise
t&lt;span class="o"&gt;.&lt;/span&gt;value
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ DYLD_LIBRARY_PATH=. ./macruby -v -I./lib t.rb
MacRuby 0.7 (ruby 1.9.2) [universal-darwin10.0, i386]
terminate called after throwing an instance of 'RoxorThreadRaiseException*'
zsh: abort      DYLD_LIBRARY_PATH=. ./macruby -v -I./lib t.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/884#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/896</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/896</guid>
        <title>#896: U_REGEX_BAD_ESCAPE_SEQUENCE on unicode escape in literal regex</title>
        <pubDate>Sun, 12 Sep 2010 21:36:39 GMT</pubDate>
          <dc:creator>smparkes@…</dc:creator>
        <description>&lt;p&gt;
/\u{A6}/ gives regexp `\u{A6}' compilation error: U_REGEX_BAD_ESCAPE_SEQUENCE
&lt;/p&gt;
&lt;p&gt;
Works in 1.9.2. Regexp.new "\u{A6}" works.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/896#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/901</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/901</guid>
        <title>#901: exception occurs when calling defined?(super) outside method block</title>
        <pubDate>Mon, 13 Sep 2010 12:44:51 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;#$ cat t.rb &lt;/span&gt;
&lt;span class="k"&gt;module&lt;/span&gt; &lt;span class="nn"&gt;DefinedSpecs&lt;/span&gt;
  &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Superclass&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;super1&lt;/span&gt;
      defined? &lt;span class="k"&gt;super&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
    define_method&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:super2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; defined? &lt;span class="k"&gt;super&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Subclass&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;Superclass&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;super1&lt;/span&gt;
      defined? &lt;span class="k"&gt;super&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
    define_method&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:super2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; defined? &lt;span class="k"&gt;super&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
sup &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;DefinedSpecs&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Superclass&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new
&lt;span class="nb"&gt;p&lt;/span&gt; sup&lt;span class="o"&gt;.&lt;/span&gt;class
&lt;span class="nb"&gt;p&lt;/span&gt; sup&lt;span class="o"&gt;.&lt;/span&gt;super1
&lt;span class="nb"&gt;p&lt;/span&gt; sup&lt;span class="o"&gt;.&lt;/span&gt;super2
&lt;span class="nb"&gt;sub&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;DefinedSpecs&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Subclass&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="nb"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;class
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="nb"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;super1
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="nb"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;super2
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby -v t.rb
ruby 1.9.1p429 (2010-07-02 revision 28523) [i386-darwin10]
DefinedSpecs::Superclass
nil
nil
DefinedSpecs::Subclass
"super"
"super"
$ macruby -v t.rb
MacRuby 0.7 (ruby 1.9.2) [universal-darwin10.0, x86_64]
DefinedSpecs::Superclass
nil
zsh: segmentation fault  macruby -v t.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/901#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/903</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/903</guid>
        <title>#903: Can't load the file when calls autoload and require.</title>
        <pubDate>Tue, 14 Sep 2010 14:06:46 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;#$ cat t.rb&lt;/span&gt;
&lt;span class="no"&gt;FILE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"test-tmp-0001.rb"&lt;/span&gt;
&lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;FILE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"w"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;f&lt;span class="o"&gt;|&lt;/span&gt;
  f&lt;span class="o"&gt;.&lt;/span&gt;puts &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="no"&gt;END&lt;/span&gt;
&lt;span class="sh"&gt;class TEST
  def self.ok
    :ok
  end
end
&lt;/span&gt;&lt;span class="no"&gt;END
&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;autoload&lt;/span&gt; &lt;span class="ss"&gt;:TEST&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"./&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="no"&gt;FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s2"&gt;"./&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="no"&gt;FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="no"&gt;TEST&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;ok
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ /usr/bin/ruby -v t.rb
ruby 1.8.7 (2009-06-12 patchlevel 174) [universal-darwin10.0]
:ok
$ ruby -v t.rb
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]
:ok
$ macruby -v t.rb
MacRuby 0.7 (ruby 1.9.2) [universal-darwin10.0, x86_64]
/Users/watson/tmp/t.rb:3:in `&amp;lt;main&amp;gt;': uninitialized constant TEST (NameError)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/903#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/904</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/904</guid>
        <title>#904: Can't autoload with MultiThread.</title>
        <pubDate>Tue, 14 Sep 2010 14:23:17 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;#$ cat t1.rb &lt;/span&gt;
&lt;span class="no"&gt;FILE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"test-tmp-0001.rb"&lt;/span&gt;
&lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;FILE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"w"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;f&lt;span class="o"&gt;|&lt;/span&gt;
  f&lt;span class="o"&gt;.&lt;/span&gt;puts &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="no"&gt;END&lt;/span&gt;
&lt;span class="sh"&gt;class TEST
  def self.ok
    :ok
  end
end
&lt;/span&gt;&lt;span class="no"&gt;END
&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;autoload&lt;/span&gt; &lt;span class="ss"&gt;:TEST&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"./&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="no"&gt;FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
t1 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="no"&gt;TEST&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;ok &lt;span class="p"&gt;}&lt;/span&gt;
t2 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="no"&gt;TEST&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;ok &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; t1&lt;span class="o"&gt;.&lt;/span&gt;join&lt;span class="o"&gt;.&lt;/span&gt;value
&lt;span class="nb"&gt;p&lt;/span&gt; t2&lt;span class="o"&gt;.&lt;/span&gt;join&lt;span class="o"&gt;.&lt;/span&gt;value
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ /usr/bin/ruby -v t1.rb
ruby 1.8.7 (2009-06-12 patchlevel 174) [universal-darwin10.0]
:ok
:ok
$ ruby -v t1.rb
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]
t1.rb:15: warning: loading in progress, circular require considered harmful - /Users/watson/tmp/test-tmp-0001.rb
	from t1.rb:15:in `block in &amp;lt;main&amp;gt;'
:ok
:ok
$ macruby -v t1.rb
MacRuby 0.7 (ruby 1.9.2) [universal-darwin10.0, x86_64]
:ok
/Users/watson/tmp/t1.rb:3:in `&amp;lt;main&amp;gt;': uninitialized constant TEST (NameError)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/904#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/920</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/920</guid>
        <title>#920: macirb takes too long to launch</title>
        <pubDate>Tue, 28 Sep 2010 23:32:53 GMT</pubDate>
          <dc:creator>matt.massicotte@…</dc:creator>
        <description>&lt;p&gt;
macirb takes between 1 and 2 seconds to produce a prompt.  That's a very long time, and significantly longer than irb.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/920#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/930</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/930</guid>
        <title>#930: SIGABRT in MacRuby 0.7 with Sequel + SQLite3-Ruby gem</title>
        <pubDate>Tue, 05 Oct 2010 08:07:59 GMT</pubDate>
          <dc:creator>mario@…</dc:creator>
        <description>&lt;p&gt;
When using &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.7 official release, I attempt to cycle through a directory of files with MP3's in them, to gather the MP3 tags from them, using TagLibBundle.  The storage Medium I've choosen, is Sequel, and SQLite3.  After patching for Kernel#require issue in Sequel, I am able to load both Sequel, and SQLite3, with no problems.  But when I attempt to scan through the directory, and start creating new Entries in my Database, it crashes on the first song it runs into.  I've tested even with using generic strings, and it still remains the same.
&lt;/p&gt;
&lt;p&gt;
Attached, is the Backtrace, and the minimalistic version of the code.  Required libraries are Sequel (Patched for Kernel.require, instead of super in Sequel#self.require), and SQLite3-Ruby.  Checking through Backtrace, and rb_symbolicate, it seems that it is crashing on the inspect object, in which it returns the printable version of the Instance, specifically line 858:
&lt;/p&gt;
&lt;p&gt;
def inspect
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
"#&amp;lt;#{model.name} @values=#{inspect_values}&amp;gt;" &amp;lt;-- this line
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
end
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/930#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/937</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/937</guid>
        <title>#937: Rescuing Interrupt doesn't work</title>
        <pubDate>Wed, 06 Oct 2010 22:05:22 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;p&gt;
This is needed by IRB and used to work, iirc:
&lt;/p&gt;
&lt;pre class="wiki"&gt;% macruby -e 'begin; loop {}; rescue Interrupt; p :ok; end'
^C
% ruby19 -e 'begin; loop {}; rescue Interrupt; p :ok; end'
^C:ok
&lt;/pre&gt;&lt;p&gt;
Trap does work, though.
&lt;/p&gt;
&lt;pre class="wiki"&gt;% macruby -e 'trap("SIGINT") { p :ok; exit }; loop {}'
^C:ok
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/937#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/939</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/939</guid>
        <title>#939: $1, $2 ... should store the value of local scope.</title>
        <pubDate>Thu, 07 Oct 2010 03:03:33 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;str &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"info@example.com?subject=current-issue"&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;str&lt;span class="p"&gt;)&lt;/span&gt;
  str &lt;span class="o"&gt;=~&lt;/span&gt; &lt;span class="sr"&gt;/(.+)@(.+)/&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;str &lt;span class="o"&gt;=~&lt;/span&gt; &lt;span class="sr"&gt;/(.+)\?(.+)/&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="nb"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vg"&gt;$1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="vg"&gt;$1&lt;/span&gt;
  &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="vg"&gt;$2&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby -v test_regexp.rb
ruby 1.8.7 (2009-06-12 patchlevel 174) [universal-darwin10.0]
"info@example.com"
"subject=current-issue"
$ ruby19 -v test_regexp.rb
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]
"info@example.com"
"subject=current-issue"
$ macruby -v test_regexp.rb
MacRuby 0.8 (ruby 1.9.2) [universal-darwin10.0, x86_64]
"info"
"example.com"
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/939#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/941</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/941</guid>
        <title>#941: curb gem does not build under MacRuby</title>
        <pubDate>Fri, 08 Oct 2010 02:43:32 GMT</pubDate>
          <dc:creator>mrada@…</dc:creator>
        <description>&lt;p&gt;
Ripped almost verbatim from the macruby-dev mailing list:
&lt;/p&gt;
&lt;p&gt;
curb does not compile successfully for &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;. Normally you have to compile curb with a universal binary of libcurl to get it running on MRI, so I suspect that architecture incompatibility has something to do with why the build is failing. I get the following when I try to install with macgem:
&lt;/p&gt;
&lt;p&gt;
/usr/bin/gcc -I. -I/Library/Frameworks/MacRuby.framework/Versions/0.7/usr/include/ruby-1.9.2/universal-darwin10.0 -I/Library/Frameworks/MacRuby.framework/Versions/0.7/usr/include/ruby-1.9.2/ruby/backward -I/Library/Frameworks/MacRuby.framework/Versions/0.7/usr/include/ruby-1.9.2 -I. -DRUBY_EXTCONF_H=\"curb_config.h\"  -fno-common -arch i386 -arch x86_64 -fexceptions -fno-common -pipe -O3 -g -Wall -I/opt/local/include -g -Wall -arch i386 -arch x86_64 -o curb_multi.o -c curb_multi.c
curb_multi.c: In function ‘rb_curl_multi_mark_all_easy’:
curb_multi.c:38: warning: implicit declaration of function ‘rb_gc_mark’
curb_multi.c: In function ‘curl_multi_free’:
curb_multi.c:64: warning: implicit declaration of function ‘RHASH’
curb_multi.c:64: error: invalid type argument of ‘-&amp;gt;’
curb_multi.c: In function ‘rb_curl_multi_mark_all_easy’:
curb_multi.c:38: warning: implicit declaration of function ‘rb_gc_mark’
curb_multi.c: In function ‘curl_multi_free’:
curb_multi.c:64: warning: implicit declaration of function ‘RHASH’
curb_multi.c:64: error: invalid type argument of ‘-&amp;gt;’
lipo: can't open input file: /var/tmp//ccbAYK9V.out (No such file or directory)
make: *** [curb_multi.o] Error 1
&lt;/p&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
 It looks like this C extension is using an element of the MRI C API that we do not support yet. I am guessing it's poking at the RHASH structure, which we won't probably support any time soon.
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote class="citation"&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
 Should I create a ticket for this?
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;blockquote class="citation"&gt;
&lt;blockquote class="citation"&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
 Why not... but I don't think it will be ever fixed :(
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/941#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/947</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/947</guid>
        <title>#947: Wish CoreText Suport</title>
        <pubDate>Sat, 09 Oct 2010 02:35:36 GMT</pubDate>
          <dc:creator>niedhui@…</dc:creator>
        <description>&lt;p&gt;
wish The CoreText struct like CTLine ,CTRun should have a real class in macruby
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/947#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/948</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/948</guid>
        <title>#948: MacRuby should match with Regexp, distinguish between '\r' and '\n'.</title>
        <pubDate>Sat, 09 Oct 2010 04:25:29 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;pre class="wiki"&gt;p /^bar/.match("foo\rbar")   # =&amp;gt; nil
p /^bar/.match("foo\nbar")
p /^bar/.match("foo\r\nbar")
p "--"
p /foo$/.match("foo\rbar")   # =&amp;gt; nil
p /foo$/.match("foo\nbar")
p /foo$/.match("foo\r\nbar") # =&amp;gt; nil
&lt;/pre&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby19 test_regexp.rb
nil
#&amp;lt;MatchData "bar"&amp;gt;
#&amp;lt;MatchData "bar"&amp;gt;
"--"
nil
#&amp;lt;MatchData "foo"&amp;gt;
nil
$ macruby test_regexp.rb
#&amp;lt;MatchData "bar"&amp;gt;
#&amp;lt;MatchData "bar"&amp;gt;
#&amp;lt;MatchData "bar"&amp;gt;
"--"
#&amp;lt;MatchData "foo"&amp;gt;
#&amp;lt;MatchData "foo"&amp;gt;
#&amp;lt;MatchData "foo"&amp;gt;
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/948#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/951</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/951</guid>
        <title>#951: BridgeSupport - bug dereferencing a pointer</title>
        <pubDate>Mon, 11 Oct 2010 02:03:01 GMT</pubDate>
          <dc:creator>mattaimonetti@…</dc:creator>
        <description>&lt;p&gt;
I'm trying to use the Chipmunk physics engine &lt;a class="ext-link" href="http://files.slembcke.net/chipmunk/release/ChipmunkLatest-Docs/"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://files.slembcke.net/chipmunk/release/ChipmunkLatest-Docs/&lt;/a&gt; with &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;.
&lt;/p&gt;
&lt;p&gt;
I wrote a simple Cocoa framework with the C source and generated a BridgeSupport file using the new generator (preview 1).
&lt;/p&gt;
&lt;p&gt;
Here is the framework: &lt;a class="ext-link" href="http://github.com/mattetti/MacRuby-Chipmunk/"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://github.com/mattetti/MacRuby-Chipmunk/&lt;/a&gt;
Here is the BridgeSupport file: &lt;a class="ext-link" href="http://github.com/mattetti/MacRuby-Chipmunk/blob/master/Chipmunk/BridgeSupport/Chipmunk.bridgesupport"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://github.com/mattetti/MacRuby-Chipmunk/blob/master/Chipmunk/BridgeSupport/Chipmunk.bridgesupport&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
You can download the framework and reproduce the problem in MacIRB:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macirb --simple-prompt
&amp;gt;&amp;gt; framework File.expand_path('Chipmunk.framework')
=&amp;gt; true
&amp;gt;&amp;gt; cpInitChipmunk()
Initializing Chipmunk v5.3.2 (Debug Enabled)
Compile with -DNDEBUG defined to disable debug mode and runtime assertion checks
=&amp;gt; nil
&amp;gt;&amp;gt; space_ptr = cpSpaceNew()
=&amp;gt; #&amp;lt;Pointer:0x2002290e0&amp;gt;
&amp;gt;&amp;gt; space = space_ptr[0]
TypeError: unrecognized runtime type `{cpSpaceHash'
&lt;/pre&gt;&lt;p&gt;
Here is a direct link to the BS's cpSpaceNew function node:
&lt;a class="ext-link" href="http://github.com/mattetti/MacRuby-Chipmunk/blob/master/Chipmunk/BridgeSupport/Chipmunk.bridgesupport#L821-823"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://github.com/mattetti/MacRuby-Chipmunk/blob/master/Chipmunk/BridgeSupport/Chipmunk.bridgesupport#L821-823&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
Can it be that the runtime type looked up is {cpSpaceHash instead of cpSpaceHash?
&lt;/p&gt;
&lt;p&gt;
The BS file was generated using the new gen_bridge_metadata tool and &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.8 trunk was used.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/951#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/954</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/954</guid>
        <title>#954: Race condition: assertion fails with IO.pipe, when checks size of String which had read from pipe.</title>
        <pubDate>Tue, 12 Oct 2010 11:49:10 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;r&lt;span class="p"&gt;,&lt;/span&gt; w &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;IO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;pipe
s &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;""&lt;/span&gt;
t &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt; r&lt;span class="o"&gt;.&lt;/span&gt;read&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; s&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
w&lt;span class="o"&gt;.&lt;/span&gt;write &lt;span class="s2"&gt;"foobarbaz"&lt;/span&gt;
&lt;span class="kp"&gt;true&lt;/span&gt; &lt;span class="k"&gt;until&lt;/span&gt; s&lt;span class="o"&gt;.&lt;/span&gt;size &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="c1"&gt;# crash&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; t&lt;span class="o"&gt;.&lt;/span&gt;value
&lt;span class="nb"&gt;p&lt;/span&gt; s
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby19 -v test_io.rb
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]
"fooba"
"fooba"
$ macruby test_io.rb
Assertion failed: (IS_BSTR(str)), function rb_bstr_set_length, file string.c, line 6042.
zsh: abort      macruby test_io.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/954#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/974</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/974</guid>
        <title>#974: Failed assertion when creating pointer Pointers</title>
        <pubDate>Tue, 26 Oct 2010 23:02:38 GMT</pubDate>
          <dc:creator>mrada@…</dc:creator>
        <description>&lt;blockquote&gt;
&lt;p&gt;
# macirb
&lt;/sup&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
irb(main):001:0&amp;gt; Pointer.new '&lt;sup&gt;'
Assertion failed: (len &amp;gt; 0), function compile_const_global_string, file compiler.cpp, line 595.
zsh: abort      macirb
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/974#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/975</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/975</guid>
        <title>#975: macri requires superuser permissions to update cache</title>
        <pubDate>Tue, 26 Oct 2010 23:36:32 GMT</pubDate>
          <dc:creator>mrada@…</dc:creator>
        <description>&lt;p&gt;
Tonight I tried to use macri for the first time and I got an error:
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
# macri Pointer
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;
/Library/Frameworks/MacRuby.framework/Versions/0.7.1/usr/lib/ruby/1.9.2/rdoc/ri/driver.rb:383:in `create_class_cache': Permission denied - open() failed (Errno::EACCES)
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
from /Library/Frameworks/MacRuby.framework/Versions/0.7.1/usr/lib/ruby/1.9.2/rdoc/ri/driver.rb:342:in `class_cache'
from /Library/Frameworks/MacRuby.framework/Versions/0.7.1/usr/lib/ruby/1.9.2/rdoc/ri/driver.rb:596:in `block'
from /Library/Frameworks/MacRuby.framework/Versions/0.7.1/usr/lib/ruby/1.9.2/rdoc/ri/driver.rb:591:in `run'
from /usr/local/bin/macri:3:in `&amp;lt;main&amp;gt;'
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
zsh: exit 1     macri Pointer
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
When I ran macri as root it updated its cache and then started to "work" (not quite, but that is a separate issue).
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/975#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/976</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/976</guid>
        <title>#976: macri not paginating output and appears to skip a lot of output</title>
        <pubDate>Tue, 26 Oct 2010 23:38:56 GMT</pubDate>
          <dc:creator>mrada@…</dc:creator>
        <description>&lt;p&gt;
To see this, try ri for the Hash class and then macri for the Hash class.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/976#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/978</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/978</guid>
        <title>#978: macirb gives a weird error when I dereference a pointer to a CFArray</title>
        <pubDate>Tue, 26 Oct 2010 23:50:18 GMT</pubDate>
          <dc:creator>mrada@…</dc:creator>
        <description>&lt;p&gt;
The error is:
&lt;/p&gt;
&lt;p&gt;
TypeError: can't convert Class into String
&lt;/p&gt;
&lt;p&gt;
I have attached a short script to demo this. The message is not printed when you require the file or run it with macruby. If you copy and paste the code into macirb you will see the error message.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/978#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/992</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/992</guid>
        <title>#992: dynamic string in thread, in block causing a segfault</title>
        <pubDate>Mon, 08 Nov 2010 06:07:33 GMT</pubDate>
          <dc:creator>mattaimonetti@…</dc:creator>
        <description>&lt;p&gt;
The following code triggers a segfault:
&lt;/p&gt;
&lt;pre class="wiki"&gt;def slow_operation(n); end
n = 10
ths = []
10.times do |n| ths &amp;lt;&amp;lt; Thread.new{slow_operation("thread #{n}")} end; ths.each{|t| t.join}
&lt;/pre&gt;&lt;p&gt;
Renaming or removing the n variable fixes the problem.
&lt;/p&gt;
&lt;p&gt;
Offline Laurent said:
You build a dynamic string "thread #{n}" inside a thread. n refers to the block dvar or, at one point, we leave the times loop before the thread starts to use the variable
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/992#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/994</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/994</guid>
        <title>#994: Grit gem acts differently in macruby vs macruby app</title>
        <pubDate>Wed, 10 Nov 2010 04:14:45 GMT</pubDate>
          <dc:creator>hungerandthirst@…</dc:creator>
        <description>&lt;p&gt;
I'm trying to integrate the grit gem into a macruby app. If I try to create a Repo object and then do Grit::Status.new(repo) on the object, it claims all the objects in the repo are unversioned/untracked.
&lt;/p&gt;
&lt;p&gt;
However if I run the exact same code in macirb or place the code and run via macruby, it returns the correct status on the repo.
&lt;/p&gt;
&lt;p&gt;
Using &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 7.1 release.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/994#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/995</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/995</guid>
        <title>#995: NoMethodError for initialization on MacRuby but works fine on CRuby</title>
        <pubDate>Wed, 10 Nov 2010 19:37:05 GMT</pubDate>
          <dc:creator>mrada@…</dc:creator>
        <description>&lt;p&gt;
When using the jiraSOAP gem (version 0.4.0) and I try to create a new JIRA::JIRAService object with #new I always get a NoMethodError on &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;, but when I run the gem in CRuby the initialization works fine.
&lt;/p&gt;
&lt;p&gt;
The source for the gem is on github at github.com/Marketcircle/jiraSOAP
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/995#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/1001</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/1001</guid>
        <title>#1001: All future significant numbers should be novelty tickets</title>
        <pubDate>Wed, 17 Nov 2010 20:23:04 GMT</pubDate>
          <dc:creator>joshua.ballanco@…</dc:creator>
        <description>&lt;p&gt;
**SUMMARY**
&lt;/p&gt;
&lt;p&gt;
When a "nice big round number", like &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/1000" title="defect: Xcode fails to load bridgesupport file automatically for user created ... (closed: fixed)"&gt;#1000&lt;/a&gt;, &lt;a class="missing ticket"&gt;#5000&lt;/a&gt;, &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/42" title="defect: parallel make doesn't work (closed: fixed)"&gt;#42&lt;/a&gt;, etc. is approaching in the trac system of assigning bug numbers, this number should be used for a "novelty ticket"
&lt;/p&gt;
&lt;p&gt;
**STEPS TO REPRODUCE**
&lt;/p&gt;
&lt;p&gt;
1. Wait approximately a year and a half for the next "nice big round number" to come around. By my calculations this should be ticket &lt;a class="missing ticket"&gt;#2000&lt;/a&gt;.
2. Have Thibault file ticket &lt;a class="missing ticket"&gt;#1999&lt;/a&gt;.
3. Wait for Thibault to NOT notice that the next ticket is a "nice big round number".
4. Wait for Eloy to suggest to a user on the mailing list that they should file a ticket, also NOT noticing that the next ticket is a "nice big round number".
5. Wait for said user to file a ticket and ACTUALLY notice that said ticket is a "nice big round number", but still file a "real" ticket.
&lt;/p&gt;
&lt;p&gt;
**REGRESSION**
&lt;/p&gt;
&lt;p&gt;
This has been happening since ticket &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/1000" title="defect: Xcode fails to load bridgesupport file automatically for user created ... (closed: fixed)"&gt;#1000&lt;/a&gt;.
&lt;/p&gt;
&lt;p&gt;
**NOTES**
&lt;/p&gt;
&lt;p&gt;
It seems that when this bug occurs, Matt is inclined to make half-hearted and mostly-unfunny jokes about the situation. Hopefully, if the original issue is fixed then this other issue will disappear as well. If not, we may need a separate issue for Matt's jokes.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/1001#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/1011</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/1011</guid>
        <title>#1011: Sinatra fails silently on MacRuby 0.8 nightly builds</title>
        <pubDate>Thu, 25 Nov 2010 17:48:11 GMT</pubDate>
          <dc:creator>mrada@…</dc:creator>
        <description>&lt;p&gt;
Trying to run the 'Hello, world' example from the Sinatra website does not seem to work on &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;.
&lt;/p&gt;
&lt;p&gt;
However, when I try the example in macirb it does work! I can even get the Control Tower Sinatra example to work.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/1011#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/1014</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/1014</guid>
        <title>#1014: Unhelpful error message when loading the restclient gem</title>
        <pubDate>Sun, 28 Nov 2010 06:59:36 GMT</pubDate>
          <dc:creator>mrada@…</dc:creator>
        <description>&lt;p&gt;
Tried with &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.8 nightly build (Nov. 27) and restclient 1.6.1.
&lt;/p&gt;
&lt;p&gt;
When I try to load the gem I get the following error:
&lt;/p&gt;
&lt;p&gt;
ArgumentError: invalid string transliteration
&lt;/p&gt;
&lt;p&gt;
There is a thread on the macruby-devel mailing list about this problem "restclient gem with &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;".
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/1014#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/1016</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/1016</guid>
        <title>#1016: Regular expression 'negative look-ahead' not working properly</title>
        <pubDate>Wed, 01 Dec 2010 14:37:30 GMT</pubDate>
          <dc:creator>yasuimao@…</dc:creator>
        <description>&lt;p&gt;
I'm not sure if I'm doing this properly, but let me try.
&lt;/p&gt;
&lt;p&gt;
It's hard to describe, but there seems to be a bug in regular expression negative look-ahead (?! ).  The regular expression below might not be optimal, but what it tries to do is a wild card text search for expressions with 0-2 words in between "it is" and "interesting" excluding "not".
&lt;/p&gt;
&lt;pre class="wiki"&gt;text = "It is interesting. It is very interesting. It is very very interesting. It is not interesting. It is not very interesting."
p text.scan(/it is(?:\ *(?!\bnot\b)\w+)?(?:\ *(?!\bnot\b)\w+)? interesting/i)
&lt;/pre&gt;&lt;p&gt;
Results
&lt;/p&gt;
&lt;p&gt;
Ruby 1.8.7/RubyCocoa
&lt;/p&gt;
&lt;pre class="wiki"&gt;=&amp;gt; ["It is interesting", "It is very interesting", "It is very very interesting"]
&lt;/pre&gt;&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.7.1
&lt;/p&gt;
&lt;pre class="wiki"&gt;=&amp;gt; ["It is interesting", "It is very interesting"]
&lt;/pre&gt;&lt;p&gt;
If I don't use negative look-ahead, both return the same array.
&lt;/p&gt;
&lt;pre class="wiki"&gt;text = "It is interesting. It is very interesting. It is very very interesting. It is not interesting. It is not very interesting."
p text.scan(/\bit is(?:\ *\w+)?(?:\ *\w+)? interesting\b/i)
&lt;/pre&gt;&lt;p&gt;
Result - Ruby 1.8.7/RubyCocoa, &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;
&lt;/p&gt;
&lt;pre class="wiki"&gt;=&amp;gt; ["It is interesting", "It is very interesting", "It is very very interesting", "It is not interesting", "It is not very interesting"]
&lt;/pre&gt;&lt;p&gt;
I also tried this at &lt;a class="ext-link" href="http://demo.icu-project.org/icu-bin/redemo"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://demo.icu-project.org/icu-bin/redemo&lt;/a&gt; and the result was the same as Ruby 1.8.7/RubyCocoa.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/1016#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/1017</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/1017</guid>
        <title>#1017: macgem intall error</title>
        <pubDate>Thu, 02 Dec 2010 08:35:45 GMT</pubDate>
          <dc:creator>tglee@…</dc:creator>
        <description>&lt;p&gt;
$ macruby -e 'p MACRUBY_VERSION, MACRUBY_REVISION'
"0.8"
"svn revision 4962 from &lt;a class="ext-link" href="http://svn.macosforge.org/repository/ruby/MacRuby/trunk"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://svn.macosforge.org/repository/ruby/MacRuby/trunk&lt;/a&gt;"
$ sudo macgem i gsl
Password:
Building native extensions.  This could take a while...
ERROR:  While executing gem ... (TypeError)
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
can't convert Float into String
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
$
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/1017#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/1018</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/1018</guid>
        <title>#1018: Regexp compilation error</title>
        <pubDate>Thu, 02 Dec 2010 08:40:06 GMT</pubDate>
          <dc:creator>tglee@…</dc:creator>
        <description>&lt;p&gt;
$ macirb
&lt;/p&gt;
&lt;p&gt;
irb(main):001:0&amp;gt; pattern = /(?&amp;lt;test&amp;gt;Ruby|Perl)/
&lt;/p&gt;
&lt;p&gt;
=&amp;gt; SyntaxError: (irb):1: regexp `(?&amp;lt;test&amp;gt;Ruby|Perl)' compilation error: U_REGEX_RULE_SYNTAX
irb(main):002:0&amp;gt;
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/1018#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/211</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/211</guid>
        <title>#211: Automatic loading of bridgesupport files with embedded MacRuby does not work.</title>
        <pubDate>Tue, 20 Jan 2009 13:22:16 GMT</pubDate>
          <dc:creator>dognotdog@…</dc:creator>
        <description>&lt;p&gt;
&lt;a class="changeset" href="http://www.macruby.org/trac/changeset/762" title="BridgeSupport files and dylibs can now be located inside the executable ..."&gt;r762&lt;/a&gt; indicates that .bridgesupport files placed in Resources/bridgeSupport/ should be loaded automatically, but they are not &lt;i&gt;correctly&lt;/i&gt; loaded: declared functions and types do not appear in the global namespace. Trying to load the bridgeSupport file manually when it's in bridgeSupport/ results in a hang, moving it to Resources/ and loading manually via -loadBridgeSupportFileAtPath: appears to work though.
&lt;/p&gt;
&lt;p&gt;
As of &lt;a class="changeset" href="http://www.macruby.org/trac/changeset/789" title="Added workarounds for NSCFNumber to Float conversion on the NSRect ..."&gt;r789&lt;/a&gt;
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/211#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/530</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/530</guid>
        <title>#530: Net::SSH doesn't work with MacRuby</title>
        <pubDate>Thu, 31 Dec 2009 05:05:59 GMT</pubDate>
          <dc:creator>sk8tr1981@…</dc:creator>
        <description>&lt;p&gt;
It's sad to say but net-ssh (Net::SSH) doesn't work with &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; (yes, I did install it through macgems) for some reason, but does work fine in pure ruby. The error is below:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby -v
MacRuby version 0.5 (ruby 1.9.0) [universal-darwin10.0, x86_64]
$ macirb
irb(main):001:0&amp;gt; require 'rubygems'
=&amp;gt; true
irb(main):002:0&amp;gt; require 'net/ssh'
=&amp;gt; true
irb(main):003:0&amp;gt; Net::SSH.start('my-server', 'user', :password =&amp;gt; "password")
NoMethodError: protected method `initialize_ssh' called for #&amp;lt;TCPSocket:0x2003be380&amp;gt;
	from /Library/Frameworks/MacRuby.framework/Versions/0.5/usr/lib/ruby/Gems/1.9.0/gems/net-ssh-2.0.17/lib/net/ssh/transport/packet_stream.rb:20:in `extended:'
	from core:in `extend:'
	from /Library/Frameworks/MacRuby.framework/Versions/0.5/usr/lib/ruby/Gems/1.9.0/gems/net-ssh-2.0.17/lib/net/ssh/transport/session.rb:57:in `initialize:'
	from core:in `__new__:'
	from /Library/Frameworks/MacRuby.framework/Versions/0.5/usr/lib/ruby/Gems/1.9.0/gems/net-ssh-2.0.17/lib/net/ssh.rb:155:in `start:'
&lt;/pre&gt;&lt;p&gt;
Any ideas why this is happening, and when a fix can be expected?
&lt;/p&gt;
&lt;p&gt;
Thanks a lot!
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/530#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/576</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/576</guid>
        <title>#576: It's possible to close STDOUT (and presumably other standard IO streams)</title>
        <pubDate>Tue, 26 Jan 2010 02:42:04 GMT</pubDate>
          <dc:creator>matthew@…</dc:creator>
        <description>&lt;p&gt;
Run the following in irb, then macirb:
&lt;/p&gt;
&lt;pre class="wiki"&gt;STDOUT.close
&lt;/pre&gt;&lt;p&gt;
&lt;strong&gt;Expected (Ruby 1.9.1):&lt;/strong&gt;
&lt;/p&gt;
&lt;pre class="wiki"&gt;=&amp;gt; nil
&lt;/pre&gt;&lt;p&gt;
&lt;strong&gt;Actual (&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.5 beta 2):&lt;/strong&gt;
&lt;/p&gt;
&lt;pre class="wiki"&gt;(closes interpreter)
&lt;/pre&gt;&lt;p&gt;
The expected behavior is to ignore close requests to standard IO streams.  Ruby does this, but &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; does not.  When using macirb, calling &lt;tt&gt;STDOUT.close&lt;/tt&gt; simply closes the interpreter, whereas in Ruby it returns nil.
&lt;/p&gt;
&lt;p&gt;
This has important real-world implications when dealing with logging.  Consider logging to STDOUT; Logger#close actually closes the STDOUT stream!
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/576#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/594</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/594</guid>
        <title>#594: Not all methods visible to objective-c calls</title>
        <pubDate>Tue, 02 Feb 2010 22:38:06 GMT</pubDate>
          <dc:creator>michael@…</dc:creator>
        <description>&lt;p&gt;
The following code is taken from &lt;a class="ext-link" href="http://code.reflectivepixel.com/post/103638573/require-hotcocoa-framework-webkit-class"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://code.reflectivepixel.com/post/103638573/require-hotcocoa-framework-webkit-class&lt;/a&gt; and is just a short example of showing the problem:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s1"&gt;'hotcocoa'&lt;/span&gt;
framework &lt;span class="s1"&gt;'webkit'&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Application&lt;/span&gt;
&lt;span class="kp"&gt;include&lt;/span&gt; &lt;span class="no"&gt;HotCocoa&lt;/span&gt;
&lt;span class="no"&gt;FULL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="ss"&gt;:expand&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:width&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="ss"&gt;:height&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="no"&gt;BASE&lt;/span&gt;&lt;span class="o"&gt;=&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class="no"&gt;END&lt;/span&gt;
&lt;span class="sh"&gt;  &amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;style type="text/css"&amp;gt;
  * { font-family: Monaco; }
  &amp;lt;/style&amp;gt;&amp;lt;script type="text/javascript"&amp;gt;
  function say(arg) { window.TheBridge.click(arg);}
  &amp;lt;/script&amp;gt;
  &amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;h3&amp;gt;Ruby JavaScript Bridge&amp;lt;/h3&amp;gt;
  &amp;lt;a href="#" onclick="say('hi')"&amp;gt;tell&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;
&lt;/span&gt;&lt;span class="no"&gt;END
&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;click&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;arg&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#called from javascript&lt;/span&gt;
  root &lt;span class="o"&gt;=&lt;/span&gt; document&lt;span class="o"&gt;.&lt;/span&gt;createElement&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"div"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  root&lt;span class="o"&gt;.&lt;/span&gt;innerHTML&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"javascript tells ruby: &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;arg&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
  document&lt;span class="o"&gt;.&lt;/span&gt;body&lt;span class="o"&gt;.&lt;/span&gt;appendChild&lt;span class="p"&gt;(&lt;/span&gt;root&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;document&lt;/span&gt;
  &lt;span class="vi"&gt;@web_view&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;mainFrame&lt;span class="o"&gt;.&lt;/span&gt;DOMDocument
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nc"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;webScriptNameForSelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;sel&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#hide : in name&lt;/span&gt;
  sel&lt;span class="o"&gt;.&lt;/span&gt;to_s&lt;span class="o"&gt;.&lt;/span&gt;sub&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/:$/&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; is_available_selector?&lt;span class="p"&gt;(&lt;/span&gt;sel&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nc"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;isSelectorExcludedFromWebScript&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;sel&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="o"&gt;!&lt;/span&gt; is_available_selector?&lt;span class="p"&gt;(&lt;/span&gt;sel&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nc"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;isKeyExcludedFromWebScript&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;key&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="kp"&gt;true&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nc"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;is_available_selector?&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;sel&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'click:'&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;include?&lt;span class="p"&gt;(&lt;/span&gt;sel&lt;span class="o"&gt;.&lt;/span&gt;to_s&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;start&lt;/span&gt;
  application &lt;span class="ss"&gt;:name&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;"MyBridge"&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;app&lt;span class="o"&gt;|&lt;/span&gt;
    app&lt;span class="o"&gt;.&lt;/span&gt;delegate &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;self&lt;/span&gt;
    window &lt;span class="ss"&gt;:title&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;"MyBridge"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="ss"&gt;:frame&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;620&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;330&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;win&lt;span class="o"&gt;|&lt;/span&gt;
      win &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="vi"&gt;@web_view&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;web_view&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:layout&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="no"&gt;FULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;wv&lt;span class="o"&gt;|&lt;/span&gt;
        wv&lt;span class="o"&gt;.&lt;/span&gt;mainFrame&lt;span class="o"&gt;.&lt;/span&gt;loadHTMLString &lt;span class="no"&gt;BASE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; baseURL&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;nil&lt;/span&gt;
        wv&lt;span class="o"&gt;.&lt;/span&gt;frameLoadDelegate&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;self&lt;/span&gt;
        wso&lt;span class="o"&gt;=&lt;/span&gt;wv&lt;span class="o"&gt;.&lt;/span&gt;windowScriptObject &lt;span class="c1"&gt;#make visible to JS&lt;/span&gt;
        wso&lt;span class="o"&gt;.&lt;/span&gt;setValue&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; forKey&lt;span class="ss"&gt;:"TheBridge"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;
      win&lt;span class="o"&gt;.&lt;/span&gt;will_close &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="no"&gt;Application&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="o"&gt;.&lt;/span&gt;start
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
In this example, clicking on "tell" does not work. It seems, that the selector for "click:" is not found. When logging for example the selector values in
&lt;/p&gt;
&lt;pre class="wiki"&gt;self.isSelectorExcludedFromWebScript(sel)
&lt;/pre&gt;&lt;p&gt;
the "click:" selector is not amongst the results.
&lt;/p&gt;
&lt;p&gt;
This is not related to hotcocoa, this example can be simply reworked without using hotcocoa, just with a simple WebView embedded in a NSWindow from Interface Builder.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/594#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/795</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/795</guid>
        <title>#795: macirb: GCD inconsistently copies local variables inside blocks</title>
        <pubDate>Thu, 15 Jul 2010 20:47:56 GMT</pubDate>
          <dc:creator>ernest.prabhakar@…</dc:creator>
        <description>&lt;p&gt;
The expectation is that Ruby blocks will have their local variables copied before being passed to GCD, to avoid errors from accessing them after they are destroyed.
&lt;/p&gt;
&lt;p&gt;
However, that does not seem to always happen.  For example:
&lt;/p&gt;
&lt;pre class="wiki"&gt;    $ macruby -e 'i=0; Dispatch::Queue.new("i").sync {i = 42}; puts i'
&lt;/pre&gt;&lt;p&gt;
returns '0' as expected.  However, this does not:
&lt;/p&gt;
&lt;pre class="wiki"&gt;    $ macirb
    irb(main):001:0&amp;gt; i=0; Dispatch::Queue.new("i").sync {i = 42}; puts i
    42
    =&amp;gt; nil
&lt;/pre&gt;&lt;p&gt;
It appears to be copied properly in the block_spec.rb test:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;    it &lt;span class="s2"&gt;"should create const copies of dynamic (local) variables"&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
      i &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt;
      &lt;span class="vi"&gt;@q&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;sync &lt;span class="p"&gt;{&lt;/span&gt;i &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
      i&lt;span class="o"&gt;.&lt;/span&gt;should &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
But not in the README.rdoc for the dispatch module (aka dispatch_methods.rb sample):
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;    n &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    job &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Dispatch&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Job&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new &lt;span class="p"&gt;{&lt;/span&gt; n &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
    job&lt;span class="o"&gt;.&lt;/span&gt;join
    &lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"n (after): &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;n&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; =&amp;gt; 0?!?"&lt;/span&gt; &lt;span class="c1"&gt;# [returns 21, not 0]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Any suggestions?
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/795#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/876</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/876</guid>
        <title>#876: EXC_BAD_ACCESS using IOBluetooth</title>
        <pubDate>Thu, 26 Aug 2010 01:13:07 GMT</pubDate>
          <dc:creator>matt.wizeman@…</dc:creator>
        <description>&lt;p&gt;
This is using &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; built from the SVN Head on 2010-08-21 (revision 4438).
&lt;/p&gt;
&lt;p&gt;
Program received signal:  “EXC_BAD_ACCESS”.
&lt;a class="missing ticket"&gt;#0&lt;/a&gt;  0x00007fff80bbc5f0 in object_getClass ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/1" title="defect: Object#methods crashes (closed: fixed)"&gt;#1&lt;/a&gt;  0x00000001000ed2d3 in rb_objc_nsnumber2numeric ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/2" title="defect: function 'WebInitForCarbon' return value defined more than once (closed: fixed)"&gt;#2&lt;/a&gt;  0x00000001036ccce0 in ?? ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/3" title="defect: &amp;#34;broken US-ASCII string&amp;#34; during RI generation (closed: fixed)"&gt;#3&lt;/a&gt;  0x00007fff86c1ddd6 in -[IOBluetoothL2CAPChannel processIncomingData:] ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/4" title="defect: if .ext/rdoc exists, ruby/rdoc sometimes crashes (closed: fixed)"&gt;#4&lt;/a&gt;  0x00007fff86c1c767 in -[IOBluetoothL2CAPChannel handleMachMessage:] ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/5" title="defect: Problem in readline.c with filename_completion_function (closed: wontfix)"&gt;#5&lt;/a&gt;  0x00007fff820bf07f in &lt;span class="underline"&gt;NSFireMachPort ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/6" title="enhancement: add support for loading custom bridgesupport files (closed: fixed)"&gt;#6&lt;/a&gt;  0x00007fff831b7bce in &lt;/span&gt;CFMachPortPerform ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/7" title="defect: crash when doing [NSDecimalNumber -decimalValue] (closed: fixed)"&gt;#7&lt;/a&gt;  0x00007fff83190171 in &lt;span class="underline"&gt;CFRunLoopRun ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/8" title="defect: getting NSSize from NSImage from artwork doesn't work (closed: fixed)"&gt;#8&lt;/a&gt;  0x00007fff8318e84f in CFRunLoopRunSpecific ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/9" title="defect: Crash on Module.superclass (closed: fixed)"&gt;#9&lt;/a&gt;  0x00007fff8766491a in RunCurrentEventLoopInMode ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/10" title="enhancement: also look for frameworks in /Developer/Local/Frameworks (closed: fixed)"&gt;#10&lt;/a&gt; 0x00007fff8766471f in ReceiveNextEventCommon ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/11" title="defect: Move Objective-C bits of Kernel#framework to ruby (closed: wontfix)"&gt;#11&lt;/a&gt; 0x00007fff876645d8 in BlockUntilNextEventMatchingListInMode ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/12" title="enhancement: Support DYLD_FRAMEWORK_PATH for loading (closed: fixed)"&gt;#12&lt;/a&gt; 0x00007fff838ed29e in _DPSNextEvent ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/13" title="defect: dispatcher goes into infinite loop, crashes rather than throwing ... (closed: fixed)"&gt;#13&lt;/a&gt; 0x00007fff838ecbed in -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/14" title="defect: getting format from artwork doesn't work (closed: fixed)"&gt;#14&lt;/a&gt; 0x00007fff838b28d3 in -[NSApplication run] ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/15" title="defect: Crash when setting an ivar to an alloc/init'ed object (closed: fixed)"&gt;#15&lt;/a&gt; 0x00007fff838ab5f8 in NSApplicationMain ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/16" title="defect: ^C (SIGINT) doesn't interrupt the cocoa runloop (closed: fixed)"&gt;#16&lt;/a&gt; 0x00000001036c5dcd in ?? ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/17" title="defect: Sending 'super' inside an objc overriden method provokes an infinite loop (closed: fixed)"&gt;#17&lt;/a&gt; 0x0000000100140c94 in rb_vm_dispatch ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/18" title="defect: NSZeroSize Causes Abort (closed: fixed)"&gt;#18&lt;/a&gt; 0x00000001036c4260 in ?? ()
&lt;a class="new ticket" href="http://www.macruby.org/trac/ticket/19" title="defect: Problems with method_missing (new)"&gt;#19&lt;/a&gt; 0x00000001036c3a1b in ?? ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/20" title="defect: Extending an Objective-C class before referencing it replaces it (closed: fixed)"&gt;#20&lt;/a&gt; 0x000000010014ec08 in rb_vm_run ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/21" title="defect: Cocoa primitive classes do not respond to the Ruby interfaces. (closed: fixed)"&gt;#21&lt;/a&gt; 0x0000000100040650 in ruby_run_node ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/22" title="defect: NSPredicate doesn't work (closed: fixed)"&gt;#22&lt;/a&gt; 0x000000010014f06d in macruby_main ()
&lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/23" title="defect: CircleView.app leaks memory while animating (closed: fixed)"&gt;#23&lt;/a&gt; 0x0000000100000efe in main (argc=1, argv=0x7fff5fbff640)
&lt;/span&gt;&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/876#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/966</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/966</guid>
        <title>#966: MacRuby encoding error with Mail gem</title>
        <pubDate>Sun, 24 Oct 2010 21:52:52 GMT</pubDate>
          <dc:creator>andre.lewis@…</dc:creator>
        <description>&lt;p&gt;
With &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.71 and mail (2.2.7), I get:
&lt;/p&gt;
&lt;pre class="wiki"&gt;irb(main):002:0&amp;gt; require "rubygems"
=&amp;gt; true
irb(main):003:0&amp;gt; require "mail"
Encoding::CompatibilityError: incompatible character encodings: UTF-8 and ASCII-8BIT
&lt;/pre&gt;&lt;p&gt;
It seems to come down to an encoding issue in &lt;a class="ext-link" href="http://github.com/mikel/mail/commits/master/lib/mail/patterns.rb"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://github.com/mikel/mail/commits/master/lib/mail/patterns.rb&lt;/a&gt;, specifically forcing encoding on 'control'.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/966#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/977</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/977</guid>
        <title>#977: macri has no documentation for the Pointer class</title>
        <pubDate>Tue, 26 Oct 2010 23:41:03 GMT</pubDate>
          <dc:creator>mrada@…</dc:creator>
        <description>&lt;p&gt;
I was having a hard time finding documentation for the Pointer class in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; so I tried macri. Unfortunately, it had none, and then exited with a non-zero exit code.
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
# macri Pointer
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
Nothing known about Pointer
/Library/Frameworks/MacRuby.framework/Versions/0.7.1/usr/lib/ruby/1.9.2/rdoc/ri/driver.rb:591:in `run': Nothing known about Pointer (SystemExit)
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
from /usr/local/bin/macri:3:in `&amp;lt;main&amp;gt;'
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
zsh: exit 1     macri Pointer
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/977#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/988</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/988</guid>
        <title>#988: Unable to get rack::basic::auth to function as demonstrated via sinatra page.</title>
        <pubDate>Thu, 04 Nov 2010 00:32:18 GMT</pubDate>
          <dc:creator>jhamor@…</dc:creator>
        <description>&lt;p&gt;
While following the sinatra docs, i've tried all the possible combinations to get rack::basic::auth to function. When i use regular ruby-1.9 and sinatra 1.1.0 and rack 1.2.1, all seems well. When i switch back to macruby 0.7/controltower 1.0, i get a endless cycling of the basic authentication boxes and auth.credentials is some weird utf-8 string.
&lt;/p&gt;
&lt;p&gt;
Not really sure where to file this bug or what details are needed for reproduction, other than following the basic auth example for rack.
&lt;/p&gt;
&lt;p&gt;
Below works on ruby-1.9.2-p0/sinatra/rack:
&lt;/p&gt;
&lt;p&gt;
use Rack::Auth::Basic do |username, password|
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
puts "user: #{username} pass: #{password}"
username == 'admin' &amp;amp;&amp;amp; password == 'secret'
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
end
&lt;/p&gt;
&lt;p&gt;
Where this same example does not work on macruby/controltower.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/988#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/91</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/91</guid>
        <title>#91: rss module doesn't work - problem in dublincore.rb or module_eval</title>
        <pubDate>Wed, 25 Jun 2008 22:32:54 GMT</pubDate>
          <dc:creator>jakub.suder@…</dc:creator>
        <description>&lt;p&gt;
Module rss doesn't work in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.2 - calling "require 'rss' " causes an exception:
&lt;/p&gt;
&lt;p&gt;
SyntaxError: /Library/Frameworks/MacRuby.framework/Versions/0.2/usr/lib/ruby/1.9.0/rss/dublincore.rb:123: syntax error, unexpected $end, expecting keyword_end&lt;br /&gt;
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
target.new_
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
from /Library/Frameworks/MacRuby.framework/Versions/0.2/usr/lib/ruby/1.9.0/rss/dublincore.rb:88:in `module_eval'&lt;br /&gt;
from /Library/Frameworks/MacRuby.framework/Versions/0.2/usr/lib/ruby/1.9.0/rss/dublincore.rb:88:in `block (1 levels) in &amp;lt;module:DublinCoreModel&amp;gt;'&lt;br /&gt;
from /Library/Frameworks/MacRuby.framework/Versions/0.2/usr/lib/ruby/1.9.0/rss/dublincore.rb:87:in `each'&lt;br /&gt;
from /Library/Frameworks/MacRuby.framework/Versions/0.2/usr/lib/ruby/1.9.0/rss/dublincore.rb:87:in `&amp;lt;module:DublinCoreModel&amp;gt;'&lt;br /&gt;
from /Library/Frameworks/MacRuby.framework/Versions/0.2/usr/lib/ruby/1.9.0/rss/dublincore.rb:54:in `&amp;lt;module:RSS&amp;gt;'&lt;br /&gt;
from /Library/Frameworks/MacRuby.framework/Versions/0.2/usr/lib/ruby/1.9.0/rss/dublincore.rb:3:in `&amp;lt;top (required)&amp;gt;'&lt;br /&gt;
from /Library/Frameworks/MacRuby.framework/Versions/0.2/usr/lib/ruby/1.9.0/rss.rb:11:in `require'&lt;br /&gt;
from /Library/Frameworks/MacRuby.framework/Versions/0.2/usr/lib/ruby/1.9.0/rss.rb:11:in `&amp;lt;top (required)&amp;gt;'&lt;br /&gt;
from (irb):1:in `require'&lt;br /&gt;
from (irb):1&lt;br /&gt;
from /usr/local/bin/macirb:12:in `&amp;lt;main&amp;gt;'&lt;br /&gt;
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
The same happens when I download the latest version of dublincore.rb and try to include it in macirb.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/91#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/123</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/123</guid>
        <title>#123: macruby 0.3 - macgem 1.1.1</title>
        <pubDate>Sun, 07 Sep 2008 19:15:55 GMT</pubDate>
          <dc:creator>renard@…</dc:creator>
        <description>&lt;p&gt;
keep getting the following message with macgem commands that go to remoete;
&lt;/p&gt;
&lt;pre class="wiki"&gt;renard$ sudo macgem update --system
Password:
2008-09-07 14:25:02.516 macruby[7410:c0b] *** +[RFC2253DN module_function]: unrecognized selector sent to class 0x9311d50
Updating RubyGems
Bulk updating Gem source index for: http://gems.rubyforge.org/
Updating metadata for 826 gems from http://gems.github.com/
..........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
complete
Nothing to update
===============
did manage to install yahoofinance
renard$ macgem install yahoofinance
2008-09-07 14:17:09.193 macruby[7353:10b] *** +[RFC2253DN module_function]: unrecognized selector sent to class 0x9211c00
Bulk updating Gem source index for: http://gems.rubyforge.org/
Updating metadata for 826 gems from http://gems.github.com/
...........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................^C/Library/Frameworks/MacRuby.framework/Versions/0.3/usr/lib/ruby/1.9.0/rubygems/user_interaction.rb:181:in `write:': undefined method `write:' for NSMutableArray:Class (NoMethodError)
	from /Library/Frameworks/MacRuby.framework/Versions/0.3/usr/lib/ruby/1.9.0/rubygems/user_interaction.rb:181:in `puts'
	from /Library/Frameworks/MacRuby.framework/Versions/0.3/usr/lib/ruby/1.9.0/rubygems/user_interaction.rb:181:in `alert_error'
	from (eval):3:in `alert_error'
	from /Library/Frameworks/MacRuby.framework/Versions/0.3/usr/lib/ruby/1.9.0/rubygems/command_manager.rb:81:in `rescue in run'
	from /Library/Frameworks/MacRuby.framework/Versions/0.3/usr/lib/ruby/1.9.0/rubygems/command_manager.rb:74:in `run'
	from /Library/Frameworks/MacRuby.framework/Versions/0.3/usr/lib/ruby/1.9.0/rubygems/gem_runner.rb:39:in `run'
	from /usr/local/bin/macgem:24:in `&amp;lt;main&amp;gt;'
renard$ sudo macgem install yahoofinance
Password:
2008-09-07 14:19:37.805 macruby[7370:c0b] *** +[RFC2253DN module_function]: unrecognized selector sent to class 0x9311820
Bulk updating Gem source index for: http://gems.rubyforge.org/
Updating metadata for 826 gems from http://gems.github.com/
..............................................................................................................................................................................................................................................................................................................................................................................................................................................................................Failed to download spec markcatley-google_analytics-1.0.20080720 from http://gems.github.com/:
	Gem::RemoteFetcher::FetchError: error when fetching data from http://gems.github.com/quick/markcatley-google_analytics-1.0.20080720.gemspec.rz reading http://gems.github.com/quick/markcatley-google_analytics-1.0.20080720.gemspec.rz
.Failed to download spec markcatley-validates_constancy-1.0.20080714 from http://gems.github.com/:
	Gem::RemoteFetcher::FetchError: error when fetching data from http://gems.github.com/quick/markcatley-validates_constancy-1.0.20080714.gemspec.rz reading http://gems.github.com/quick/markcatley-validates_constancy-1.0.20080714.gemspec.rz
Failed to download spec matta-globalite-0.5.0 from http://gems.github.com/:
	Gem::RemoteFetcher::FetchError: error when fetching data from http://gems.github.com/quick/matta-globalite-0.5.0.gemspec.rz reading http://gems.github.com/quick/matta-globalite-0.5.0.gemspec.rz
Failed to download spec matta-googlecharts-1.3.2 from http://gems.github.com/:
	Gem::RemoteFetcher::FetchError: error when fetching data from http://gems.github.com/quick/matta-googlecharts-1.3.2.gemspec.rz reading http://gems.github.com/quick/matta-googlecharts-1.3.2.gemspec.rz
Failed to download spec matta-sdruby-raffle-0.0.2 from http://gems.github.com/:
	Gem::RemoteFetcher::FetchError: error when fetching data from http://gems.github.com/quick/matta-sdruby-raffle-0.0.2.gemspec.rz reading http://gems.github.com/quick/matta-sdruby-raffle-0.0.2.gemspec.rz
Failed to download spec mattetti-globalite-0.5.1 from http://gems.github.com/:
	Gem::RemoteFetcher::FetchError: error when fetching data from http://gems.github.com/quick/mattetti-globalite-0.5.1.gemspec.rz reading http://gems.github.com/quick/mattetti-globalite-0.5.1.gemspec.rz
Failed to download spec mattetti-googlecharts-1.3.5 from http://gems.github.com/:
	Gem::RemoteFetcher::FetchError: error when fetching data from http://gems.github.com/quick/mattetti-googlecharts-1.3.5.gemspec.rz reading http://gems.github.com/quick/mattetti-googlecharts-1.3.5.gemspec.rz
Failed to download spec matthewrudy-RudeQ-0.1 from http://gems.github.com/:
	Gem::RemoteFetcher::FetchError: error when fetching data from http://gems.github.com/quick/matthewrudy-RudeQ-0.1.gemspec.rz reading http://gems.github.com/quick/matthewrudy-RudeQ-0.1.gemspec.rz
.Failed to download spec mattly-hpreserve-0.2.1 from http://gems.github.com/:
	Gem::RemoteFetcher::FetchError: error when fetching data from http://gems.github.com/quick/mattly-hpreserve-0.2.1.gemspec.rz reading http://gems.github.com/quick/mattly-hpreserve-0.2.1.gemspec.rz
Failed to download spec mattly-nginx_config_generator-0.5.3 from http://gems.github.com/:
	Gem::RemoteFetcher::FetchError: error when fetching data from http://gems.github.com/quick/mattly-nginx_config_generator-0.5.3.gemspec.rz reading http://gems.github.com/quick/mattly-nginx_config_generator-0.5.3.gemspec.rz
................................................................................................................................................................................................................................................................................................................................................................
complete
Successfully installed yahoofinance-1.2.2
1 gem installed
renard$ macgem query -n yahoofinance
*** LOCAL GEMS ***
yahoofinance (1.2.2)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/123#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/143</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/143</guid>
        <title>#143: macgem does not set chmod +x on files in archive</title>
        <pubDate>Wed, 22 Oct 2008 17:48:12 GMT</pubDate>
          <dc:creator>antonin@…</dc:creator>
        <description>&lt;p&gt;
I have created testing gem with file /build/Termite.app/Contents/MacOS/Termite which has +x flag.
&lt;/p&gt;
&lt;p&gt;
When installing classically using "gem install", this file gets correctly chmoded as executable (that is right!).
When installing using "macgem install", this file has no executable flag (bug!).
&lt;/p&gt;
&lt;p&gt;
Please check my gem file in attachement.
&lt;/p&gt;
&lt;p&gt;
This is blocker, because resulting Termite.app, cannot be opened in macgem case.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/143#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/174</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/174</guid>
        <title>#174: Allow embedding of arbitrary versions of MacRuby</title>
        <pubDate>Wed, 03 Dec 2008 10:21:47 GMT</pubDate>
          <dc:creator>self@…</dc:creator>
        <description>&lt;p&gt;
However the new embedding approach for &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; should work it should not be dependent upon the version of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; that is installed on the system (ideally it should not even be dependent upon there *being* a version of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; installed).
&lt;/p&gt;
&lt;p&gt;
The primary use case is anticipating needing 0.4, 0.5, or 1.0 installed for apps that I am running that depend upon &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; (e.g. LimeChat when it moves across) and wanting to deploy other versions (e.g. trunk) in my own application.
&lt;/p&gt;
&lt;p&gt;
I'm also not keen on the removal of the build_as_embeddable option and a new dependency upon Xcode.
&lt;/p&gt;
&lt;p&gt;
I would rather this problem were solved by keeping the build_as_embeddable rask task and having that task patch the dylibs and and embed them into MR itself (rather than into my application).
&lt;/p&gt;
&lt;p&gt;
The way things are going &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; is forcing its dependencies into my project. I want to treat it just like any other framework I link to.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/174#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/176</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/176</guid>
        <title>#176: timeout fails to raise a Timeout::Error</title>
        <pubDate>Tue, 09 Dec 2008 18:54:22 GMT</pubDate>
          <dc:creator>acangiano@…</dc:creator>
        <description>&lt;p&gt;
timeout should raise a Timeout::Error with message "execution expired" when the time is up. Right now
it doesn't.
&lt;/p&gt;
&lt;p&gt;
For example, you can try the following:
&lt;/p&gt;
&lt;pre class="wiki"&gt;require 'timeout'
timeout(2) do
  1+1 while true
end
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/176#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/190</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/190</guid>
        <title>#190: Easily checking the upstream ruby svn revision.</title>
        <pubDate>Wed, 24 Dec 2008 11:04:20 GMT</pubDate>
          <dc:creator>eloy.de.enige@…</dc:creator>
        <description>&lt;p&gt;
It would be a good thing imo if there was an easy way to check the revision of the upstream Ruby that the current &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; trunk is based on.
&lt;/p&gt;
&lt;p&gt;
Ruby itself contains a RUBY_REVISION constant, but it's 0 for some reason.
Maybe it would be an idea to make that work again?
&lt;/p&gt;
&lt;p&gt;
It's important because people should be able to easily check whether or not a something works on a vanilla Ruby of the same revision as &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;, before creating tickets etc.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/190#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/203</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/203</guid>
        <title>#203: Marshal.dump does not serialize an Exception's backtrace</title>
        <pubDate>Sat, 10 Jan 2009 04:25:54 GMT</pubDate>
          <dc:creator>vincent.isambart@…</dc:creator>
        <description>&lt;p&gt;
The following code:
&lt;/p&gt;
&lt;pre class="wiki"&gt;begin
  raise 'test'
rescue Exception =&amp;gt; e
  p e.backtrace
  p Marshal.load(Marshal.dump(e)).backtrace
end
&lt;/pre&gt;&lt;p&gt;
displays:
&lt;/p&gt;
&lt;pre class="wiki"&gt;["untitled.rb:2:in `&amp;lt;main&amp;gt;'"]
nil
&lt;/pre&gt;&lt;p&gt;
instead of: (Ruby 1.9)
&lt;/p&gt;
&lt;pre class="wiki"&gt;["untitled.rb:2:in `&amp;lt;main&amp;gt;'"]
["untitled.rb:2:in `&amp;lt;main&amp;gt;'"]
&lt;/pre&gt;&lt;p&gt;
If you look at the (binary) result of Marshal.dump(e), you can indeed see that it does not include the backtrace in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/203#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/220</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/220</guid>
        <title>#220: Ruby ranges should be usable whenever an NSRange is required</title>
        <pubDate>Wed, 04 Feb 2009 23:36:20 GMT</pubDate>
          <dc:creator>carl@…</dc:creator>
        <description>&lt;p&gt;
It seems to me that any Objective-C method that requires an NSRange should be able to accept a ruby range. Also, NSRanges should be usable as ruby ranges (enumerable,  to_a, etc..).
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/220#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/253</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/253</guid>
        <title>#253: Fibers are unsupported</title>
        <pubDate>Thu, 14 May 2009 19:16:20 GMT</pubDate>
          <dc:creator>jvoorhis@…</dc:creator>
        <description>&lt;p&gt;
An example of macruby 0.4 segfaulting on Fibers follows. Matt Aimonetti reports similar findings at &lt;a class="ext-link" href="http://lists.macosforge.org/pipermail/macruby-devel/2009-May/001717.html"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://lists.macosforge.org/pipermail/macruby-devel/2009-May/001717.html&lt;/a&gt;, including a failure to require 'fiber' in the 0.5 branch.
&lt;/p&gt;
&lt;p&gt;
~ % macruby -v
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; version 0.4 (ruby 1.9.1) [universal-darwin9.5, x86_64]
~ % macruby -e 'Fiber.new{puts"hey"}.resume'
hey
-e:1: [BUG] Segmentation fault
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; version 0.4 (ruby 1.9.1) [universal-darwin9.5, x86_64]
&lt;/p&gt;
&lt;p&gt;
-- stack frame ------------
0000 (0xc08000060): 00000004
0001 (0xc08000068): 00000000
0002 (0xc08000070): 00000004
0003 (0xc08000078): 00000000
0004 (0xc08000080): 00000004
0005 (0xc08000088): 8000867c0
0006 (0xc08000090): 800030800
0007 (0xc08000098): 00000004
0008 (0xc080000a0): 00000000 &amp;lt;- lfp &amp;lt;- dfp
-- control frame ----------
c:0004 p:---- s:0009 b:0009 l:000008 d:000008 CFUNC  :resume
c:0003 p:0019 s:0006 b:0006 l:002348 d:002348 TOP    -e:1
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH :inherited:
c:0001 p:0000 s:0002 b:0002 l:000001 d:000001 TOP
&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;
DBG&amp;gt; : "-e:1:in `resume'"
DBG&amp;gt; : "-e:1:in `&amp;lt;main&amp;gt;'"
-- backtrace of native function call (Use addr2line) --
0x10010f301
0x100029544
0x100029628
0x1000c245d
0x7fff82bf13aa
0x7fff5fc328d8
&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;
zsh: abort      macruby -e 'Fiber.new{puts"hey"}.resume'
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/253#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/281</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/281</guid>
        <title>#281: Bundles pointing to local MacRuby installation instead of embedded</title>
        <pubDate>Sun, 07 Jun 2009 22:13:03 GMT</pubDate>
          <dc:creator>reborg@…</dc:creator>
        <description>&lt;p&gt;
After embedding the &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; framework with 'macrake deploy' is not possible to distribute the application to computers without &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; installed if the application uses native bundles.
&lt;/p&gt;
&lt;p&gt;
Try this:
- hotcocoa test; cd test
- macrake deploy
- otool -L Test.app/Contents/Frameworks/MacRuby.framework/Versions/0.4/usr/lib/ruby/1.9.1/universal-darwin9.5/stringio.bundle
&lt;/p&gt;
&lt;p&gt;
The last command gives an absolute reference to libmacruby.dylib:
Test.app/Contents/Frameworks/MacRuby.framework/Versions/0.4/usr/lib/ruby/1.9.1/universal-darwin9.5/stringio.bundle:
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
/Library/Frameworks/MacRuby.framework/Versions/0.4/usr/lib/libmacruby.dylib (compatibility version 0.4.0, current version 0.4.0)
/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 111.1.3)
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
Another test:
- open lib/application.rb and require 'stringio' at the top
- save and close, macrake clean; macrake deploy
- move the &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; installation dir in /Library/Frameworks to another name
- run the app
&lt;/p&gt;
&lt;p&gt;
This is the output from the console:
&lt;/p&gt;
&lt;p&gt;
6/7/09 5:08:47 PM [0x0-0xdb8db8].com.yourcompany.Test&lt;a class="missing changeset" title="No changeset 54737 in the repository"&gt;[54737]&lt;/a&gt; /Users/reborg/tmp/test/Test.app/Contents/Resources/lib/application.rb:1:in `require': dlopen(/Users/reborg/tmp/test/Test.app/Contents/Frameworks/MacRuby.framework/Versions/0.4/usr/lib/ruby/1.9.1/universal-darwin9.5/stringio.bundle, 9): Library not loaded: /Library/Frameworks/MacRuby.framework/Versions/0.4/usr/lib/libmacruby.dylib (LoadError)
6/7/09 5:08:47 PM [0x0-0xdb8db8].com.yourcompany.Test&lt;a class="missing changeset" title="No changeset 54737 in the repository"&gt;[54737]&lt;/a&gt;   Referenced from: /Users/reborg/tmp/test/Test.app/Contents/Frameworks/MacRuby.framework/Versions/0.4/usr/lib/ruby/1.9.1/universal-darwin9.5/stringio.bundle
6/7/09 5:08:47 PM [0x0-0xdb8db8].com.yourcompany.Test&lt;a class="missing changeset" title="No changeset 54737 in the repository"&gt;[54737]&lt;/a&gt;   Reason: image not found - /Users/reborg/tmp/test/Test.app/Contents/Frameworks/MacRuby.framework/Versions/0.4/usr/lib/ruby/1.9.1/universal-darwin9.5/stringio.bundle
6/7/09 5:08:47 PM [0x0-0xdb8db8].com.yourcompany.Test&lt;a class="missing changeset" title="No changeset 54737 in the repository"&gt;[54737]&lt;/a&gt;  from /Users/reborg/tmp/test/Test.app/Contents/Resources/lib/application.rb:1:in `&amp;lt;top (required)&amp;gt;'
6/7/09 5:08:47 PM [0x0-0xdb8db8].com.yourcompany.Test&lt;a class="missing changeset" title="No changeset 54737 in the repository"&gt;[54737]&lt;/a&gt;  from /Users/reborg/tmp/test/Test.app/Contents/Resources/rb_main.rb:3:in `load'
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/281#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/307</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/307</guid>
        <title>#307: eval destroys a singleton attribute (Segmentation fault)</title>
        <pubDate>Sat, 08 Aug 2009 19:29:13 GMT</pubDate>
          <dc:creator>dev@…</dc:creator>
        <description>&lt;p&gt;
hotconsole crashes after entering at least one expression and calling the 'clear'-command from menu
&lt;/p&gt;
&lt;p&gt;
so I tried to narrow the problem to:
&lt;/p&gt;
&lt;pre class="wiki"&gt;require 'hotcocoa'
include HotCocoa
class Test
  def initialize
    @win = window( :title =&amp;gt; "HotConsole") do |win|
#      win.will_close { exit }
    end
    class &amp;lt;&amp;lt; @win
      attr_accessor :target
    end
    @win.target = self
   end
  def run
    $stderr.puts @win.target.inspect
# the eval in the next line destroys the @win.target. Disable it and everything works fine!
    $stderr.puts eval("42", TOPLEVEL_BINDING.dup, 'hotconsole', 100)
# the next line crashes with: unknown: [BUG] Segmentation fault
    $stderr.puts @win.target.inspect
    $stderr.puts "everything is fine!"
    exit
  end
end
class Application
  def start
    application :name =&amp;gt; "HotConsole" do |app|
      app.delegate = self
      Test.new.run
    end
  end
end
Application.new.start
&lt;/pre&gt;&lt;p&gt;
gives the result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;#-&amp;lt;Test:0x8004450a0&amp;gt;
42
unknown: [BUG] Segmentation fault
MacRuby version 0.5 (ruby 1.9.0) [universal-darwin9.0, x86_64]
Abort trap
&lt;/pre&gt;&lt;p&gt;
Unfortunately enabling the "win.will_close..." causes the Segmentation fault to disappear on my system, so I hope other people will see the same behaviour! (obvisously this is memory layout dependant)
&lt;/p&gt;
&lt;p&gt;
BTW, I didn´t use NSLog because it crashes on my system:
&lt;/p&gt;
&lt;pre class="wiki"&gt;macruby -e "framework 'Cocoa'; NSLog 'test'"
&lt;/pre&gt;&lt;p&gt;
gives:
&lt;/p&gt;
&lt;pre class="wiki"&gt;unknown: [BUG] Segmentation fault
MacRuby version 0.5 (ruby 1.9.0) [universal-darwin9.0, x86_64]
Abort trap
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/307#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/330</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/330</guid>
        <title>#330: forwardingTargetForSelector not working properly in Objective-C classes loaded in MR</title>
        <pubDate>Wed, 09 Sep 2009 16:40:26 GMT</pubDate>
          <dc:creator>diffengr@…</dc:creator>
        <description>&lt;p&gt;
When using forwardingTargetForSelector: to create a wrapper class in
ObjC, it does not work in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;.
&lt;/p&gt;
&lt;p&gt;
It's kind of a complicated setup, so I've created a minimal-ish project in github containing ObjC and &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; code to illustrate the problem. It's here:
&lt;/p&gt;
&lt;p&gt;
&lt;a class="ext-link" href="http://github.com/diffengr/macruby_forwarding_invocation_example"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://github.com/diffengr/macruby_forwarding_invocation_example&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
That contains an XCode project and a rakefile. It has the ObjC classes Candy and CandyWrapper, and they both have the NSString* property flavor. CandyWrapper declares that property @dynamic, and forwards it to Candy.
&lt;/p&gt;
&lt;p&gt;
Here's the code that works in ObjC.
&lt;/p&gt;
&lt;pre class="wiki"&gt;  Candy* rootBeerCandy = [[Candy alloc] init];
  rootBeerCandy.flavor = @"Root Beer";
  CandyWrapper* rootBeerWrapper = [[CandyWrapper alloc]
initWithCandy:rootBeerCandy];
  NSLog(@"Candy#flavor \"%@\", Wrapper#flavor \"%@\"", rootBeerCandy.flavor,
          rootBeerWrapper.flavor);
&lt;/pre&gt;&lt;p&gt;
If you load and run the xcode project in this directory, you'll get this output:
&lt;/p&gt;
&lt;pre class="wiki"&gt;  NSLog[...] &amp;lt;CandyWrapper: 0x104fb0&amp;gt; forwarding flavor to &amp;lt;Candy: 0x103380&amp;gt;
  NSLog[...] Candy#flavor "Root Beer", Wrapper#flavor "Root Beer"
&lt;/pre&gt;&lt;p&gt;
Here's that same code instantiated in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;, from candy_test.rb:
&lt;/p&gt;
&lt;pre class="wiki"&gt;  rootBeerCandy = Candy.alloc.init
  rootBeerCandy.flavor = 'Root Beer'
  rootBeerWrapper = CandyWrapper.alloc.initWithCandy rootBeerCandy
  puts "Candy#flavor #{rootBeerCandy.flavor}, Wrapper#flavor
#{rootBeerWrapper.flavor}"
&lt;/pre&gt;&lt;p&gt;
You can run this with "macrake test" in the project directory, and it will give (among other things):
&lt;/p&gt;
&lt;pre class="wiki"&gt;  candy_test.rb:7:in `&amp;lt;main&amp;gt;': undefined method `flavor' for
#&amp;lt;CandyWrapper:0x8000aa2a0&amp;gt; (NoMethodError)
  rake aborted!
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/330#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/336</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/336</guid>
        <title>#336: NoMethodError with shoulda tests</title>
        <pubDate>Wed, 16 Sep 2009 20:53:42 GMT</pubDate>
          <dc:creator>macruby@…</dc:creator>
        <description>&lt;p&gt;
When running shoulda tests a NoMethodError is raised, not quite sure how/why as it looks like the test passes.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/336#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/428</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/428</guid>
        <title>#428: AOT compiled script can't get rescued</title>
        <pubDate>Mon, 09 Nov 2009 22:36:49 GMT</pubDate>
          <dc:creator>mattaimonetti@…</dc:creator>
        <description>&lt;p&gt;
t.rb
&lt;/p&gt;
&lt;pre class="wiki"&gt;begin
  require 't1'
rescue Exception =&amp;gt; e
  puts "oops let's continue even tho: #{e.message}"
end
puts 'done'
&lt;/pre&gt;&lt;p&gt;
t1.rb
&lt;/p&gt;
&lt;pre class="wiki"&gt;class Foo &amp;lt; DoesNotExist
end
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ macruby t.rb
oops let's continue even tho: uninitialized constant DoesNotExist
done
&lt;/pre&gt;&lt;p&gt;
Then compile t1.rb
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macrubyc -C t1.rb
&lt;/pre&gt;&lt;p&gt;
now try again:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby t.rb
2009-11-09 14:26:04.441 macruby[6041:903] *** Terminating app due to uncaught exception 'NameError', reason: 'uninitialized constant DoesNotExist'
*** Call stack at first throw:
(
	0   CoreFoundation                      0x00007fff8454f5a4 __exceptionPreprocess + 180
	1   libobjc.A.dylib                     0x00007fff804e1313 objc_exception_throw + 45
	2   libmacruby.dylib                    0x0000000100179405 rb_vm_raise + 437
	3   libmacruby.dylib                    0x00000001000400d9 rb_exc_raise + 9
	4   libmacruby.dylib                    0x000000010003cbb4 rb_name_error + 260
	5   libmacruby.dylib                    0x000000010010a0d3 rb_mod_const_missing + 83
	6   libmacruby.dylib                    0x000000010015da9c rb_vm_call_with_cache2 + 4652
	7   libmacruby.dylib                    0x000000010011f749 rb_funcall + 425
	8   libmacruby.dylib                    0x0000000100109c86 rb_const_get_0 + 758
	9   libmacruby.dylib                    0x000000010017bc72 _ZL18rb_vm_const_lookupmmbb + 162
	10  libmacruby.dylib                    0x000000010017f255 rb_vm_get_const + 613
	11  t1.rbo                              0x000000010119adda MREP_E8A8218CC60A4CC58372196710D15355 + 122
	12  t1.rbo                              0x000000010119ad51 _GLOBAL__I_main.c + 9
	13  ???                                 0x00007fff5fc0d500 0x0 + 140734799860992
	14  ???                                 0x00007fff5fc0bcec 0x0 + 140734799854828
	15  ???                                 0x00007fff5fc0bda6 0x0 + 140734799855014
	16  ???                                 0x00007fff5fc08fbb 0x0 + 140734799843259
	17  libSystem.B.dylib                   0x00007fff84783d40 dlopen + 61
	18  libmacruby.dylib                    0x0000000100114c12 dln_load + 322
	19  libmacruby.dylib                    0x00000001000488f2 rb_require_safe + 466
	20  libmacruby.dylib                    0x000000010016c030 rb_vm_dispatch + 7648
	21  ???                                 0x0000000101100065 0x0 + 4312793189
	22  libmacruby.dylib                    0x00000001000402f9 ruby_run_node + 73
	23  macruby                             0x0000000100000dd8 main + 152
	24  macruby                             0x0000000100000d34 start + 52
)
terminate called after throwing an instance of 'NSException'
Abort trap
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/428#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/435</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/435</guid>
        <title>#435: Too many calls to NSObject initialize</title>
        <pubDate>Mon, 16 Nov 2009 20:41:32 GMT</pubDate>
          <dc:creator>joshua.ballanco@…</dc:creator>
        <description>&lt;p&gt;
Run: "sudo macgem install sproutcore", then sample the macruby process. See the attached sample. The stack seems to get far too deep with calls to "OBJC_CLASS_$_NSObject", which look to be initiated by a [NSData dataWithContentsOfURL:] call.
&lt;/p&gt;
&lt;p&gt;
The gem did eventually install.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/435#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/521</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/521</guid>
        <title>#521: Float problem with 8.1 and 9.1</title>
        <pubDate>Thu, 24 Dec 2009 16:00:07 GMT</pubDate>
          <dc:creator>macruby@…</dc:creator>
        <description>&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.5b2 seems to have a problem with the floats 8.1 and 9.1. Here is what 'macirb' does:
&lt;/p&gt;
&lt;p&gt;
irb(main):005:0&amp;gt; 9.1
=&amp;gt; 9.09999999999999
irb(main):006:0&amp;gt; 8.1
=&amp;gt; 8.09999999999999
&lt;/p&gt;
&lt;p&gt;
I get the same results from 'macruby'. The strange thing is that if I do the following:
&lt;/p&gt;
&lt;p&gt;
irb(main):007:0&amp;gt; 9.1 + 1
=&amp;gt; 10.1
irb(main):008:0&amp;gt; 10.0 - 0.9
=&amp;gt; 9.09999999999999
&lt;/p&gt;
&lt;p&gt;
very strange - AYAL
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/521#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/527</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/527</guid>
        <title>#527: Segmentation fault when stack overflows</title>
        <pubDate>Wed, 30 Dec 2009 07:45:29 GMT</pubDate>
          <dc:creator>haruki.zaemon@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;irb --&amp;gt; def a(n); n == 0 ? "DONE" : b(n - 1); end
irb --&amp;gt; def b(n); n == 0 ? "DONE" : a(n - 1); end
irb --&amp;gt; a(10000)
Segmentation fault
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/527#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/540</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/540</guid>
        <title>#540: segfault with NSURLDownload with GC on</title>
        <pubDate>Mon, 04 Jan 2010 04:58:02 GMT</pubDate>
          <dc:creator>mattaimonetti@…</dc:creator>
        <description>&lt;p&gt;
Script:
&lt;a class="ext-link" href="https://gist.github.com/96954a4e59f1293977c0"&gt;&lt;span class="icon"&gt; &lt;/span&gt;https://gist.github.com/96954a4e59f1293977c0&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
Backtrace:
&lt;/p&gt;
&lt;pre class="wiki"&gt;Application Specific Information:
objc_msgSend() selector name: _downloadActive
objc[74889]: garbage collection is ON
Thread 0 Crashed:  Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib               	0x00007fff8821011c objc_msgSend + 40
1   com.apple.Foundation          	0x00007fff84db156d _NSURLDownloadDidReceiveData + 45
2   com.apple.CFNetwork           	0x00007fff8143b50f URLDownload::sendClientDidReceiveData(long, long, long) + 83
3   com.apple.CFNetwork           	0x00007fff8143cd9c ___asyncWrite_block_invoke_4 + 121
4   com.apple.CoreFoundation      	0x00007fff8060c1b9 __CFRunLoopDoBlocks + 297
5   com.apple.CoreFoundation      	0x00007fff805cece6 __CFRunLoopRun + 3046
6   com.apple.CoreFoundation      	0x00007fff805cdc2f CFRunLoopRunSpecific + 575
7   com.apple.Foundation          	0x00007fff84c94a24 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 270
8   com.apple.Foundation          	0x00007fff84ce048a -[NSRunLoop(NSRunLoop) runUntilDate:] + 78
9   ???                           	0x00000001011005fc 0 + 4312794620
Thread 1:  Dispatch queue: com.apple.libdispatch-manager
0   libSystem.B.dylib             	0x00007fff8650cbba kevent + 10
1   libSystem.B.dylib             	0x00007fff8650ea85 _dispatch_mgr_invoke + 154
2   libSystem.B.dylib             	0x00007fff8650e75c _dispatch_queue_invoke + 185
3   libSystem.B.dylib             	0x00007fff8650e286 _dispatch_worker_thread2 + 244
4   libSystem.B.dylib             	0x00007fff8650dbb8 _pthread_wqthread + 353
5   libSystem.B.dylib             	0x00007fff8650da55 start_wqthread + 13
Thread 2:
0   libSystem.B.dylib             	0x00007fff8650d9da __workq_kernreturn + 10
1   libSystem.B.dylib             	0x00007fff8650ddec _pthread_wqthread + 917
2   libSystem.B.dylib             	0x00007fff8650da55 start_wqthread + 13
Thread 3:
0   libSystem.B.dylib             	0x00007fff8650d9da __workq_kernreturn + 10
1   libSystem.B.dylib             	0x00007fff8650ddec _pthread_wqthread + 917
2   libSystem.B.dylib             	0x00007fff8650da55 start_wqthread + 13
Thread 4:
0   libSystem.B.dylib             	0x00007fff864f3e3a mach_msg_trap + 10
1   libSystem.B.dylib             	0x00007fff864f44ad mach_msg + 59
2   com.apple.CoreFoundation      	0x00007fff805ce7a2 __CFRunLoopRun + 1698
3   com.apple.CoreFoundation      	0x00007fff805cdc2f CFRunLoopRunSpecific + 575
4   com.apple.Foundation          	0x00007fff84cd94cf +[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:] + 297
5   com.apple.Foundation          	0x00007fff84c59e99 __NSThread__main__ + 1429
6   libSystem.B.dylib             	0x00007fff8652cf8e _pthread_start + 331
7   libSystem.B.dylib             	0x00007fff8652ce41 thread_start + 13
Thread 5:
0   libSystem.B.dylib             	0x00007fff8650d9da __workq_kernreturn + 10
1   libSystem.B.dylib             	0x00007fff8650ddec _pthread_wqthread + 917
2   libSystem.B.dylib             	0x00007fff8650da55 start_wqthread + 13
Thread 6:
0   libSystem.B.dylib             	0x00007fff865379e2 select$DARWIN_EXTSN + 10
1   com.apple.CoreFoundation      	0x00007fff805f0242 __CFSocketManager + 818
2   libSystem.B.dylib             	0x00007fff8652cf8e _pthread_start + 331
3   libSystem.B.dylib             	0x00007fff8652ce41 thread_start + 13
&lt;/pre&gt;&lt;p&gt;
works fine with GC_DISABLE=1
&lt;/p&gt;
&lt;p&gt;
---
&lt;/p&gt;
&lt;p&gt;
TODO: Rewrite the script in pure objc, compile with -fobjc-gc and see if it's a &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; bug or a Cocoa bug.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/540#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/542</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/542</guid>
        <title>#542: Attempt to unlock a mutex which is not locked (ThreadError)</title>
        <pubDate>Fri, 08 Jan 2010 10:47:26 GMT</pubDate>
          <dc:creator>valerii.hiora@…</dc:creator>
        <description>&lt;p&gt;
$ DYLD_LIBRARY_PATH=. ./macruby -e "require 'net/imap'; imap = Net::IMAP.new('imap.gmail.com', 993, true); imap.login('somebody','somepassword')"
&lt;/p&gt;
&lt;p&gt;
core:in `unlock': Attempt to unlock a mutex which is not locked (ThreadError)
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
from monitor.rb:178:in `mon_exit'&lt;br /&gt;
from monitor.rb:192:in `synchronize'&lt;br /&gt;
from core:in `send_command:'&lt;br /&gt;
from core:in `login:'&lt;br /&gt;
from -e:in `&amp;lt;main&amp;gt;'
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
Inspecting imap object from irb and macirb shows that latter has a mutex and seems it causes problem
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/542#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/561</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/561</guid>
        <title>#561: serialization/archiving of ruby and obj-c objects</title>
        <pubDate>Tue, 19 Jan 2010 02:55:27 GMT</pubDate>
          <dc:creator>mattaimonetti@…</dc:creator>
        <description>&lt;p&gt;
In Ruby archiving is done using the Marshal class, while in Cocoa, the NSCoder abstract class is being used.
&lt;/p&gt;
&lt;p&gt;
On one hand, currently, in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;, you can marshal down pure Obj-C objects and of course things don't look too good when they are restored. On the other hand, you can't archive Ruby objects using Cocoa API since Ruby objects don't implement the NSCoding protocol.
&lt;/p&gt;
&lt;p&gt;
We probably need to add NSCoder support in marshal
And also add the NSCoding protocol methods to new &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; classes.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/561#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/578</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/578</guid>
        <title>#578: Garbage Collector in 0.6</title>
        <pubDate>Thu, 28 Jan 2010 08:00:29 GMT</pubDate>
          <dc:creator>jsn@…</dc:creator>
        <description>&lt;p&gt;
Reporting this as a bug, since i'm fairly sure this is not the way it's intended to work.
&lt;/p&gt;
&lt;p&gt;
Running the following code on a bunch of 600mb - 2gb files will (eventually) cause a SIGSEGV when memory allocation fails.
&lt;/p&gt;
&lt;pre class="wiki"&gt;   def get_digest(file)
     digest = Digest::MD5.new()
     fil = File.open(file,'r')
     while((l = fil.read(READ_BUFFER_SIZE))!=nil)
          digest &amp;lt;&amp;lt; l
    end
    fil.close()
    digest.hexdigest
   end
&lt;/pre&gt;&lt;p&gt;
If I run it on a smaller set of files, 1.8gb to be exact, the memory allocated to the process jumps to 700-900mb, and just stays there.
I let the process sit there for 30 mins, without noticing any drop in allocated memory.
&lt;/p&gt;
&lt;p&gt;
I've tried with various sizes for READ_BUFFER_SIZE, from 16kb to 32mb, and also tried with File.read(), and it all behaves the same way, although the higher read buffer, the faster memory usage shoots up.
setting "l=nil" for every read operation and/or "digest=nil" before returning doesn't seem to make a difference.
Using Digest::MD5.file(fname).hexdigest results in "writing to non-bytestrings is not supported at this time."
&lt;/p&gt;
&lt;p&gt;
I'm not sure if this is a "string cache" thing gone wrong, or it's simply not collecting garbage.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/578#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/588</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/588</guid>
        <title>#588: ld: library not found for -lLLVMBitWriter for macrubyc --static</title>
        <pubDate>Mon, 01 Feb 2010 16:27:49 GMT</pubDate>
          <dc:creator>g.vishnu@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;
vishnugopal@hor-fgh226:Code/Sandbox/macruby-test % macrubyc --static -o ./gcd ./gcd.rb
ld: library not found for -lLLVMBitWriter
collect2: ld returned 1 exit status
Error when executing `/usr/bin/g++ -o "./gcd" -arch x86_64 -L/Library/Frameworks/MacRuby.framework/Versions/0.5/usr/lib -lmacruby-static -L/usr/local/lib  -lpthread -lffi -lm -lLLVMBitWriter -lLLVMX86CodeGen -lLLVMX86Info -lLLVMSelectionDAG -lLLVMAsmPrinter -lLLVMJIT -lLLVMExecutionEngine -lLLVMCodeGen -lLLVMScalarOpts -lLLVMTransformUtils -lLLVMipa -lLLVMAnalysis -lLLVMTarget -lLLVMMC -lLLVMCore -lLLVMSupport -lLLVMSystem -lpthread -ldl -lxml2 -lobjc -lauto -framework Foundation  "/var/folders/nX/nXnuXaYeGIOkQo6WIXrqMU+++TI/-Tmp-/main-26571.o" "./gcd.o"'
&lt;/pre&gt;&lt;p&gt;
Without --static, compilation works okay! I've got Xcode 3.2.2 pre-release installed.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/588#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/611</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/611</guid>
        <title>#611: Error decoding JSON floating point number</title>
        <pubDate>Tue, 09 Feb 2010 04:48:47 GMT</pubDate>
          <dc:creator>dj2@…</dc:creator>
        <description>&lt;p&gt;
JSON decoding of floating point numbers sometimes loses accuracy. e.g.
&lt;/p&gt;
&lt;pre class="wiki"&gt;'{"http:\/\/www.schneier.com\/blog\/archives\/2010\/02\/10_cartoons_abo.html": {"postrank": 8.1, "postrank_color": "#ff883d"}}'
&lt;/pre&gt;&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;
&lt;/p&gt;
&lt;pre class="wiki"&gt;{"http://www.schneier.com/blog/archives/2010/02/10_cartoons_abo.html"=&amp;gt;{"postrank"=&amp;gt;8.09999999999999, "postrank_color"=&amp;gt;"#ff883d"}}
&lt;/pre&gt;&lt;p&gt;
Ruby 1.8.7
&lt;/p&gt;
&lt;pre class="wiki"&gt;{"http://www.schneier.com/blog/archives/2010/02/10_cartoons_abo.html"=&amp;gt;{"postrank"=&amp;gt;8.1, "postrank_color"=&amp;gt;"#ff883d"}}
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/611#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/619</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/619</guid>
        <title>#619: Constant scope in a block is determined at run-time?</title>
        <pubDate>Thu, 18 Feb 2010 13:05:19 GMT</pubDate>
          <dc:creator>chekenan@…</dc:creator>
        <description>&lt;p&gt;
&lt;a class="changeset" href="http://www.macruby.org/trac/changeset/3572" title="
 - Make sure we invalidate a method cache when redefining it
 - Fixes ..."&gt;r3572&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
Following code can't run by macruby. Both ruby 1.8.7 and 1.9.1 work.
&lt;/p&gt;
&lt;pre class="wiki"&gt;module A
  B = "Not defined in top-level."
  def self.extended(base)
    base.class_eval do
      puts B
    end
  end
end
class C
  # Not include A
  extend A
end
&lt;/pre&gt;&lt;p&gt;
NameError: uninitialized constant C::B
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
from /Users/dche/(irb):6:in `block'
from /Users/dche/(irb):5:in `extended:'
&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/619#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/668</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/668</guid>
        <title>#668: Newlines and carriage returns cause erroneous matches in StringScanner</title>
        <pubDate>Thu, 29 Apr 2010 02:03:54 GMT</pubDate>
          <dc:creator>mred@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;require 'strscan'
["\na", "\ra", " a"].each do |s|
  scanner = StringScanner.new(s)
  scanner.scan(/a/)
  puts scanner.inspect
end
&lt;/pre&gt;&lt;p&gt;
Ruby 1.9.1 results
&lt;/p&gt;
&lt;pre class="wiki"&gt;#&amp;lt;StringScanner 0/2 @ "\na"&amp;gt;
#&amp;lt;StringScanner 0/2 @ "\ra"&amp;gt;
#&amp;lt;StringScanner 0/2 @ " a"&amp;gt;
&lt;/pre&gt;&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 3968 results
&lt;/p&gt;
&lt;pre class="wiki"&gt;#&amp;lt;StringScanner fin&amp;gt;
#&amp;lt;StringScanner fin&amp;gt;
#&amp;lt;StringScanner 0/2 @ " a"&amp;gt;
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/668#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/688</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/688</guid>
        <title>#688: IB fails to read classfile in Ruby Cocoa project</title>
        <pubDate>Wed, 05 May 2010 19:38:17 GMT</pubDate>
          <dc:creator>tmowlem@…</dc:creator>
        <description>&lt;p&gt;
Had a problem with Interface Builder parsing a XCode project using &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;. Raised a bug in Radar but Apple Engineering have responded that the issue is with macruby. Therefore raised as a ticket here. Full text of email thread reproduced below:
&lt;/p&gt;
&lt;pre class="wiki"&gt;Hi Timothy,
This is a courtesy email regarding Bug ID# 7464509.
Engineering has determined that this issue originates with MacRuby mailing-list.
[...]
The IB parser has been tested many times recently (especially the last few days), so we would be tempted to say that this is a problem with the  project.
[...]
-------------------------------------------------------
Bug ID #: 7464509
Bug Title: IB fails to read classfile in Ruby Cocoa project
-------------------------------------------------------
&amp;lt;GMT11-Dec-2009 18:01:20GMT&amp;gt;
Summary:
I have a Ruby Cocoa application project created using the template. At first IB was correctly seeing the .rb file as a class and discovering its outlets. But it has stopped doing so. Now if I select File-&amp;gt;Read Class Files to force a re-read it parses the file then shows a red dimple in the IB project window at the bottom and displays an error message saying "Parsed 1 source file, but no classes were found or changed".
I tried editing the source .rb and saving it. I also closed and reopened both IB and XCode but IB will not read the source any more.
I did a Clean Build at some point before this behaviour started that could be related although I have no evidence to show that this was the cause.
Steps to Reproduce:
1. Create a Ruby Cocoa project
2. Create a .rb class add some code and save it
3. Add some GUI objects eg buttons, popups, etc to the window in the main NIB
4. Add an Object to the NIB project window from the Library
5. Show the inspector, go the Identity tab and look  for the ruby class in the Class popup
Expected Results:
The .rb class should show up and be selectable to set the class as the type of the object added to the IB project in step 4
Actual Results:
IB completely refuses to see the .rb as a class.
Also editing and saving the .rb file in XCode, reopening the apps or File-&amp;gt;Reread class files should all cause a sync between XCode and IB. The .rb should then show up in the popup. It doesn't as described.
Regression:
none
Notes:
Please note that the project was working normally. Then it stopped working for no obvious reason.
I can provide the project zipped up if required. But the code is proprietary (I am doing contract work for a client) so confidentiality would need to be respected in that case.
&amp;lt;GMT03-Feb-2010 23:01:25GMT&amp;gt;
Yes I can see the class in the classes tab of the IB Library window. It shows as a blue cube. The Lineage, Definitions, Outlets and Actions tabs also show what appears to be correct content yet the bug as described on File -&amp;gt; Read Class Files persists.
&amp;lt;GMT12-Feb-2010 19:59:25GMT&amp;gt;
'GenRegData.zip' was successfully uploaded
&amp;lt;GMT12-Feb-2010 19:59:25GMT&amp;gt;
See attached. I have obfuscated the code to protect client confidentiality but the problem was still present.
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/688#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/704</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/704</guid>
        <title>#704: Singleton bug with define_method</title>
        <pubDate>Mon, 10 May 2010 21:18:32 GMT</pubDate>
          <dc:creator>mike@…</dc:creator>
        <description>&lt;p&gt;
I'm trying to dynamically add methods to my class in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;. I'm getting a crash in my program. I haven't been able to cut that down to a smaller example yet, but I did find this problem when I tried.
&lt;/p&gt;
&lt;p&gt;
The following program should print this output (and does from Ruby 1.9):
&lt;/p&gt;
&lt;pre class="wiki"&gt;10.0
Float
{"foo"=&amp;gt;10.0}
&lt;/pre&gt;&lt;p&gt;
With &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;, it prints
&lt;/p&gt;
&lt;pre class="wiki"&gt;
NilClass
{"foo"=&amp;gt;10.0}
&lt;/pre&gt;&lt;p&gt;
If you uncomment the print statement, it starts working. Here's the code
&lt;/p&gt;
&lt;pre class="wiki"&gt;class SingletonTest
  attr_reader :values
  def initialize
    @values = {}
  end
  def addMethod(name)
    singleton = class &amp;lt;&amp;lt; self
      self
    end
    singleton.instance_exec(name) do |name|
      define_method("#{name}=") do |value|
        @values[name] = value
      end
      define_method("#{name}") do
#        puts "returning value"
        return @values[name]
      end
    end
  end
end
singleton_test = SingletonTest.new()
singleton_test.addMethod('foo')
singleton_test.foo = 10.0
value = singleton_test.foo
puts value
puts value.class
puts singleton_test.values
&lt;/pre&gt;&lt;p&gt;
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/704#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/709</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/709</guid>
        <title>#709: Different behaviour when including a module into Class in MacRuby vs Ruby 1.9.2</title>
        <pubDate>Thu, 13 May 2010 10:49:24 GMT</pubDate>
          <dc:creator>james@…</dc:creator>
        <description>&lt;p&gt;
I'm seeing different behaviour when including a module into Class in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; vs Ruby 1.9.2. This is a simplification of a problem I'm seeing running Mocha &lt;a class="changeset" href="http://www.macruby.org/trac/changeset/1" title="added MacRuby directory"&gt;[1]&lt;/a&gt; tests in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;. I seems to be specific to including the module into the Class class and not a user-defined class. It also doesn't seem to matter whether the class has already been defined or not.
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ rvm macruby
$ irb
macruby-0.6 &amp;gt; module X; def x; "x"; end; end
 =&amp;gt; nil
macruby-0.6 &amp;gt; class Class; include X; end
 =&amp;gt; Class
macruby-0.6 &amp;gt; Class.new.x
NoMethodError: undefined method `x' for #&amp;lt;Class:0x20020f960&amp;gt;
	from /Users/jamesmead/Code/mocha/(irb):3:in `&amp;lt;main&amp;gt;'
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ rvm 1.9.2
$ irb
ruby-1.9.2-preview1 &amp;gt; module X; def x; "x"; end; end
 =&amp;gt; nil
ruby-1.9.2-preview1 &amp;gt; class Class; include X; end
 =&amp;gt; Class
ruby-1.9.2-preview1 &amp;gt; Class.new.x
 =&amp;gt; "x"
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ rvm macruby
$ irb
macruby-0.6 &amp;gt; module X; def x; "x"; end; end
 =&amp;gt; nil
macruby-0.6 &amp;gt; class Y; include X; end
 =&amp;gt; Y
macruby-0.6 &amp;gt; Y.new.x
 =&amp;gt; "x"
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ rvm macruby
$ irb
macruby-0.6 &amp;gt; module X; def x; "x"; end; end
 =&amp;gt; nil
macruby-0.6 &amp;gt; class Y; end
 =&amp;gt; nil
macruby-0.6 &amp;gt; class Y; include X; end
 =&amp;gt; Y
macruby-0.6 &amp;gt; Y.new.x
 =&amp;gt; "x"
&lt;/pre&gt;&lt;p&gt;
&lt;a class="changeset" href="http://www.macruby.org/trac/changeset/1" title="added MacRuby directory"&gt;[1]&lt;/a&gt; &lt;a class="ext-link" href="http://github.com/floehopper/mocha/tree/macruby"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://github.com/floehopper/mocha/tree/macruby&lt;/a&gt;
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/709#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/721</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/721</guid>
        <title>#721: Compiled ruby files return incorrect values for __FILE__</title>
        <pubDate>Tue, 18 May 2010 15:09:57 GMT</pubDate>
          <dc:creator>mred@…</dc:creator>
        <description>&lt;p&gt;
Beginning with files "test_file.rb"
&lt;/p&gt;
&lt;pre class="wiki"&gt;puts "__FILE__ = #{__FILE__}"
&lt;/pre&gt;&lt;p&gt;
and "main.rb"
&lt;/p&gt;
&lt;pre class="wiki"&gt;require 'test_file.rb'
require 'test file.rbo'
&lt;/pre&gt;&lt;p&gt;
arranged like this
&lt;/p&gt;
&lt;pre class="wiki"&gt;/
  tmp
    ruby
      test_file.rb
    ruby2
      main.rb
&lt;/pre&gt;&lt;p&gt;
I then issued the following commands starting in the /tmp directory
&lt;/p&gt;
&lt;pre class="wiki"&gt;macruby -C ruby/test_file.rb -o ruby2/test_file.rbo
mv ruby/test_file.rb ruby2
cd ruby2
macruby main.rb
&lt;/pre&gt;&lt;p&gt;
and got the following results
&lt;/p&gt;
&lt;pre class="wiki"&gt;__FILE__ = /tmp/ruby2/test_file.rb
__FILE__ = ruby/test_file.rb
&lt;/pre&gt;&lt;p&gt;
The incorrect &lt;span class="underline"&gt;FILE&lt;/span&gt; values make it very difficult design a hierarchy of files and then load them using 'require' and relative paths for example.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/721#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/737</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/737</guid>
        <title>#737: Unpack inconsistencies (possibly related to issue #605?)</title>
        <pubDate>Fri, 04 Jun 2010 00:31:20 GMT</pubDate>
          <dc:creator>babs.devs@…</dc:creator>
        <description>&lt;p&gt;
I am attempting to use the Grit(&lt;a class="ext-link" href="http://github.com/mojombo/grit"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://github.com/mojombo/grit&lt;/a&gt;) gem (after various patches to work w/ macruby), but there seems to be some inconsistency between unpacking strings w ruby 1.9 and &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; (nightly as of 6/3/10).
&lt;/p&gt;
&lt;p&gt;
Specifically with this method:
&lt;/p&gt;
&lt;pre class="wiki"&gt;    def init_pack
          with_idx do |idx|
            @offsets = [0]
            FanOutCount.times do |i|
              //MacRuby vs Ruby assign VERY different values to pos
              pos = idx[i * IdxOffsetSize,IdxOffsetSize].unpack('N')[0]
              if pos &amp;lt; @offsets[i]
                raise PackFormatError, "pack #@name has discontinuous index #{i}"
              end
              @offsets &amp;lt;&amp;lt; pos
            end
            @size = @offsets[-1]
          end
        end
&lt;/pre&gt;&lt;p&gt;
In &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; the var 'pos' evaluates to [0, 4285812579] in every other block.
&lt;/p&gt;
&lt;p&gt;
In Ruby 1.9 'pos' evaluates correctly (ex. after 7 blocks: [0, 11, 24, 39, 48, 56, 63])
&lt;/p&gt;
&lt;p&gt;
This bug may be invalid, and/or related to the Grit gem, but at first glance appears to be &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; related.
&lt;/p&gt;
&lt;p&gt;
@see also: &lt;a class="ext-link" href="http://www.macruby.org/trac/ticket/605"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://www.macruby.org/trac/ticket/605&lt;/a&gt;
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/737#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/743</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/743</guid>
        <title>#743: Project templates' IB files should be .xib's, not .nib's</title>
        <pubDate>Tue, 08 Jun 2010 20:33:13 GMT</pubDate>
          <dc:creator>pthomson@…</dc:creator>
        <description>&lt;p&gt;
Right now, only the '&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Application' template uses .xib for its Interface Builder skeleton files. The Core Data template and NSDocument template should use .xib's as well.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/743#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/748</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/748</guid>
        <title>#748: 32bit Number Limit and Conversion</title>
        <pubDate>Mon, 14 Jun 2010 22:00:28 GMT</pubDate>
          <dc:creator>lp@…</dc:creator>
        <description>&lt;p&gt;
there seems to be a bug in the 32bit release of 0.6 with numbers
&lt;/p&gt;
&lt;pre class="wiki"&gt;arch -arch i386 macirb --simple-prompt
&amp;gt;&amp;gt; 0x44485250                         # reality check
=&amp;gt; 1145590352
&amp;gt;&amp;gt; NSNumber.numberWithInt(0x44485250) # then see all 32 NSNumber are weird...
=&amp;gt; 71848528
&amp;gt;&amp;gt; NSNumber.numberWithFloat(0x44485250)
=&amp;gt; 1145590272.0
&amp;gt;&amp;gt; NSNumber.numberWithInt(1145590352)
=&amp;gt; 71848528
&amp;gt;&amp;gt; NSNumber.numberWithFloat(1145590352)
=&amp;gt; 1145590272.0
&lt;/pre&gt;&lt;p&gt;
versus:
&lt;/p&gt;
&lt;pre class="wiki"&gt;arch -arch x86_64 macirb --simple-prompt
&amp;gt;&amp;gt; 0x44485250                             # reality check
=&amp;gt; 1145590352
&amp;gt;&amp;gt; NSNumber.numberWithInt(0x44485250)
=&amp;gt; 1145590352
&amp;gt;&amp;gt; NSNumber.numberWithFloat(0x44485250)
=&amp;gt; 1145590400.0
&amp;gt;&amp;gt; NSNumber.numberWithInt(1145590352)
=&amp;gt; 1145590352
&amp;gt;&amp;gt; NSNumber.numberWithFloat(1145590352.0) # this is weird again...
=&amp;gt; 1145590400.0
&lt;/pre&gt;&lt;p&gt;
to look a bit further, the bug turning point seems to be here for the 32bit release:
&lt;/p&gt;
&lt;pre class="wiki"&gt;&amp;gt;&amp;gt; NSNumber.numberWithInt(536870910)
=&amp;gt; 536870910
&amp;gt;&amp;gt; NSNumber.numberWithInt(536870911)
=&amp;gt; 536870911
&amp;gt;&amp;gt; NSNumber.numberWithInt(536870912)
=&amp;gt; -536870912
&amp;gt;&amp;gt; NSNumber.numberWithInt(536870913)
=&amp;gt; -536870911
&lt;/pre&gt;&lt;p&gt;
and here in the 64 bit:
&lt;/p&gt;
&lt;pre class="wiki"&gt;&amp;gt;&amp;gt; NSNumber.numberWithInt(2147483646)
=&amp;gt; 2147483646
&amp;gt;&amp;gt; NSNumber.numberWithInt(2147483647)
=&amp;gt; 2147483647
&amp;gt;&amp;gt; NSNumber.numberWithInt(2147483648)
=&amp;gt; -2147483648
&amp;gt;&amp;gt; NSNumber.numberWithInt(2147483649)
=&amp;gt; -2147483647
&lt;/pre&gt;&lt;p&gt;
also an other detail:
&lt;/p&gt;
&lt;pre class="wiki"&gt;32bit turning point:
&amp;gt;&amp;gt; 536870911 / 16
=&amp;gt; 33554431
64bit turning point:
&amp;gt;&amp;gt; 2147483647 / 64
=&amp;gt; 33554431
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/748#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/765</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/765</guid>
        <title>#765: framework is not supported in MacRuby static</title>
        <pubDate>Tue, 29 Jun 2010 09:37:10 GMT</pubDate>
          <dc:creator>jazzbox@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;$ cat test.rb
framework 'Foundation'
p NSGregorianCalendar
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ macruby test.rb
"gregorian"
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ macrubyc -o test --static test.rb
$ ./test
framework: is not supported in MacRuby static (RuntimeError)
&lt;/pre&gt;&lt;p&gt;
Commenting out the framework  'Foundation' results in a
&lt;/p&gt;
&lt;pre class="wiki"&gt;./test.rb:4:in `&amp;lt;main&amp;gt;': uninitialized constant NSGregorianCalendar (NameError)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/765#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/783</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/783</guid>
        <title>#783: Patch for builder.rb error: invalid byte sequence in US-ASCII</title>
        <pubDate>Sat, 10 Jul 2010 11:33:32 GMT</pubDate>
          <dc:creator>slewsys@…</dc:creator>
        <description>&lt;p&gt;
As of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; subversion Revision: 4343, following build instructions per ./README.rdoc fails with error message "invalid byte sequence in US-ASCII".  This is a known issue with Ruby 1.9 which can be resolved by adding an argument to IO.open/read.  In the case of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;'s builder.rb, changing  File.read(src) to File.read(src, { :mode =&amp;gt; "rb" }) resolves the issue.  Patch follows:
&lt;/p&gt;
&lt;pre class="wiki"&gt;Index: rakelib/builder/builder.rb
===================================================================
--- rakelib/builder/builder.rb  (revision 4343)
+++ rakelib/builder/builder.rb  (working copy)
@@ -142,7 +142,7 @@
   end
   def locate_headers(cont, src)
-    txt = File.read(src)
+    txt = File.read(src, { :mode =&amp;gt; "rb" })
     txt.scan(/#include\s+\"([^"]+)\"/).flatten.each do |header|
       p = header_path(header)
       if p and !cont.include?(p)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/783#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/787</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/787</guid>
        <title>#787: MacRuby Initializers only claim a single arity</title>
        <pubDate>Tue, 13 Jul 2010 22:57:05 GMT</pubDate>
          <dc:creator>ernest.prabhakar@…</dc:creator>
        <description>&lt;p&gt;
When I write an initalizer, I only register it for a single arity:
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
rb_objc_define_method(cQueue, "initialize", rb_queue_init, 1);
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;
Queue.new("foo")
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
Unfortunately, Objective-C will apparently fall back to the default (no-arg) initializer of the superclass, leading to an uninitalized object being allocated if I mistakenly call:
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
Queue.new # no args
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
To work around this, I've manually added an exception-throwing initializer:
&lt;/p&gt;
&lt;p&gt;
static VALUE
rb_raise_init(VALUE self, SEL sel)
{
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
rb_raise(rb_eArgError, "initializer called without any arguments");
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;
return self;
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
}
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
rb_objc_define_method(cQueue, "initialize", rb_raise_init, 0);
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
Would be nice if &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; did this automatically, to preserve Ruby-esque semantics.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/787#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/796</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/796</guid>
        <title>#796: Dispatch::Queue.main created with a different Queue class?!?</title>
        <pubDate>Thu, 15 Jul 2010 21:28:07 GMT</pubDate>
          <dc:creator>ernest.prabhakar@…</dc:creator>
        <description>&lt;p&gt;
The "Dispatch::Queue.main" fails the equality check in gcd.c, even though it appears identical.
&lt;/p&gt;
&lt;p&gt;
$ macruby -r dispatch -e 'Dispatch::Job.new {sleep 1}.join(Dispatch::Queue.main) {puts "!"}'
&lt;/p&gt;
&lt;p&gt;
/Library/Frameworks/MacRuby.framework/Versions/0.7/usr/lib/ruby/1.9.2/dispatch/job.rb:28:in `join:': expected class of [0x2000c1160] to be Dispatch::Queue [0x20004c8a0], but got Dispatch::Queue [0x2000c1120] (ArgumentError)
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
from /Users/Shared/MacRuby-trunk/-e:1:in `&amp;lt;main&amp;gt;'
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
That is, the reported name is the same, but the pointer differs.
&lt;/p&gt;
&lt;p&gt;
Ruby itself seems to think the classes are the same:
&lt;/p&gt;
&lt;p&gt;
$ macruby -r dispatch -e "p Dispatch::Queue.main.class == Dispatch::Queue.concurrent.class"
true
&lt;/p&gt;
&lt;p&gt;
Concurrent queues work fine:
&lt;/p&gt;
&lt;p&gt;
$ macruby -r dispatch -e 'Dispatch::Job.new {sleep 1}.join(Dispatch::Queue.concurrent) {puts "!"}'
&lt;/p&gt;
&lt;p&gt;
as do private queues:
&lt;/p&gt;
&lt;p&gt;
$ macruby -r dispatch -e 'Dispatch::Job.new {sleep 1}.join(Dispatch::Queue.new("1")) {puts "!"}'
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
I don't know if the problems is the class-equality check, or how the main queue gets a class assigned.
&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/796#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/818</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/818</guid>
        <title>#818: NSBitmapImageRep#bitmapData returns empty String</title>
        <pubDate>Fri, 30 Jul 2010 14:09:52 GMT</pubDate>
          <dc:creator>emil@…</dc:creator>
        <description>&lt;p&gt;
after allocating an NSBitmapImageRep with
&lt;/p&gt;
&lt;pre class="wiki"&gt;@nsBitmapImageRepObj = NSBitmapImageRep.alloc.initWithBitmapDataPlanes nil,
                    pixelsWide:200,
                    pixelsHigh:200,
                    bitsPerSample:8,
                    samplesPerPixel:3,
                    hasAlpha:false,
                    isPlanar:false,
                    colorSpaceName:"NSCalibratedRGBColorSpace",
                    bytesPerRow:0,
                    bitsPerPixel:0
&lt;/pre&gt;&lt;p&gt;
@nsBitmapImageRepObj.bitmapData returns an empty String, with size zero.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/818#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/821</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/821</guid>
        <title>#821: uncached ObjC stub - Abort trap</title>
        <pubDate>Wed, 04 Aug 2010 08:55:06 GMT</pubDate>
          <dc:creator>jazzbox@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;$ cat a.rb
begin
framework 'Cocoa'
rescue
NSWorkspaceLaunchWithoutActivation = 512
end
p NSWorkspace
NSWorkspace.sharedWorkspace.openURLs(
      [ NSURL.URLWithString('http://www.macruby.org/')],
      withAppBundleIdentifier:nil,
      options:NSWorkspaceLaunchWithoutActivation,
      additionalEventParamDescriptor:nil,
      launchIdentifiers:nil)
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ macrubyc -o a --static --framework Cocoa a.rb; ./a
#&amp;lt;NSWorkspace:0x20026b160&amp;gt;
uncached ObjC stub `c@:@@Q@^@'
Abort trap
&lt;/pre&gt;&lt;p&gt;
Maybe this is a known restriction of the AOT-compilation...
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/821#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/887</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/887</guid>
        <title>#887: calling join on an Array of BINARY Strings returns UTF-8, may raise Encoding::CompatibilityError.</title>
        <pubDate>Wed, 08 Sep 2010 10:19:45 GMT</pubDate>
          <dc:creator>dev@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;### Ruby 1.9.2
s = "a".force_encoding("BINARY")         # =&amp;gt; "a"
s.encoding                               # =&amp;gt; #&amp;lt;Encoding:ASCII-8BIT&amp;gt;
[s, s].join.encoding                     # =&amp;gt; #&amp;lt;Encoding:ASCII-8BIT&amp;gt;
s = "\xA4\x01".force_encoding("BINARY")  # =&amp;gt; "\xA4\x01"
s.encoding                               # =&amp;gt; #&amp;lt;Encoding:ASCII-8BIT&amp;gt;
[s, s].join.encoding                     # =&amp;gt; #&amp;lt;Encoding:ASCII-8BIT&amp;gt;
### MacRuby 0.7 trunk@4494
s = "a".force_encoding("BINARY")         # =&amp;gt; "a"
s.encoding                               # =&amp;gt; #&amp;lt;Encoding:ASCII-8BIT&amp;gt;
[s, s].join.encoding                     # =&amp;gt; #&amp;lt;Encoding:UTF-8&amp;gt;
s = "\xA4\x01".force_encoding("BINARY")  # =&amp;gt; "\xA4\x01"
s.encoding                               # =&amp;gt; #&amp;lt;Encoding:ASCII-8BIT&amp;gt;
[s, s].join.encoding                     # Encoding::CompatibilityError: incompatible character encodings: UTF-8 and ASCII-8BIT
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/887#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/888</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/888</guid>
        <title>#888: Compiled MacRuby can't read the DATA const for the text after __END__ in the source</title>
        <pubDate>Thu, 09 Sep 2010 10:17:04 GMT</pubDate>
          <dc:creator>dev@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;$ cat foo.rb
#!/usr/bin/env macruby
puts DATA.read
__END__
lolcats
$ macruby foo.rb
lolcats
$ macrubyc foo.rb -o foo
$ ./foo
uninitialized constant DATA (NameError)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/888#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/906</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/906</guid>
        <title>#906: Double BOM force_encoding bug (from HAML)</title>
        <pubDate>Thu, 16 Sep 2010 03:26:11 GMT</pubDate>
          <dc:creator>timmfin@…</dc:creator>
        <description>&lt;p&gt;
I was messing with some thoughts I have for a desktop mac app recently, and I wanted to embed HAML/SASS (&lt;a class="ext-link" href="http://github.com/nex3/haml"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://github.com/nex3/haml&lt;/a&gt;) inside of it. My first thought was to get HAML running under macruby, since then I would be able to cleanly link from objective-c to macruby (rather than open c-ruby via an external process).
&lt;/p&gt;
&lt;p&gt;
Note, I'm only partially familiar with ruby and totally new to macruby. So there is a large chance I'm being an idiot in some way.
&lt;/p&gt;
&lt;p&gt;
So far I have had very little success getting HAML to run in macruby. I first tried macruby .6 but ran into an error. Then I tried building the latest .7 head to make sure that it still had the same problem. Here's the error.
&lt;/p&gt;
&lt;pre class="wiki"&gt;/Users/timmfin/Development/haml/lib/haml/util.rb:561:in `block': incompatible character encodings: UTF-8 and ASCII-8BIT (Encoding::CompatibilityError)
	from /Users/timmfin/Development/haml/lib/haml/util.rb:517:in `check_sass_encoding:'
	from /Users/timmfin/Development/haml/lib/sass/engine.rb:222:in `check_encoding!'
	from /Users/timmfin/Development/haml/lib/sass/engine.rb:202:in `_to_tree'
	from /Users/timmfin/Development/haml/lib/sass/engine.rb:167:in `to_css'
&lt;/pre&gt;&lt;p&gt;
The line numbers don't match up, but here's the relevant code &lt;a class="ext-link" href="http://github.com/nex3/haml/blob/master/lib/haml/util.rb#L579"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://github.com/nex3/haml/blob/master/lib/haml/util.rb#L579&lt;/a&gt; . Oh fun. Encodings.
&lt;/p&gt;
&lt;p&gt;
This code is building up a map of regular expressions, which will be used to figure out the encoding of incoming input text. AKA, match '\uFEFF@charset ".*"' or '\uFEFF' in various encodings.
&lt;/p&gt;
&lt;p&gt;
Macruby dies the first time it hits line 596 (when h = {} and e = "UTF-8"):
&lt;/p&gt;
&lt;pre class="wiki"&gt;Regexp.new(/\A(?:#{_enc("\uFEFF", e)})?#{
    _enc('@charset "', e)}(.*?)#{_enc('"', e)}|\A(#{
    _enc("\uFEFF", e)})/)
&lt;/pre&gt;&lt;p&gt;
After taking out parts of the regex that don't matter and inlining _enc you get:
&lt;/p&gt;
&lt;pre class="wiki"&gt;Regexp.new(/#{
        "\uFEFF".encode("UTF-8").force_encoding("BINARY")
    } #{
        '@charset "'.encode("UTF-8").force_encoding("BINARY")
    } #{
        '"'.encode("UTF-8").force_encoding("BINARY")
    } #{
        "\uFEFF".encode("UTF-8").force_encoding("BINARY")
    }/)
&lt;/pre&gt;&lt;p&gt;
When I run the above code against c-ruby 1.9 it works fine. But it dies (with the same incompatible character encodings error) against macruby .7 dev (from a few days ago).
&lt;/p&gt;
&lt;p&gt;
Here's the minimal test case I've created (also at &lt;a class="ext-link" href="http://gist.github.com/581906"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://gist.github.com/581906&lt;/a&gt;).
&lt;/p&gt;
&lt;pre class="wiki"&gt;#!/usr/local/bin/macruby
s = "#{
    "\uFEFF".encode("UTF-8").force_encoding("BINARY")
}"
puts "A single BOM Worked!"
s = "first: #{
    "\uFEFF".encode("UTF-8").force_encoding("BINARY")
} second: #{
    "\uFEFF".encode("UTF-8").force_encoding("BINARY")
}"
puts "Two BOMs Worked!"
&lt;/pre&gt;&lt;p&gt;
The output is:
&lt;/p&gt;
&lt;pre class="wiki"&gt;timmfin-pro in ~/pending
$ ./regex-encoding-test.rb
A single BOM Worked!
incompatible character encodings: UTF-8 and ASCII-8BIT (Encoding::CompatibilityError)
&lt;/pre&gt;&lt;p&gt;
The first string interpolation works fine, but the second one kills macruby. Looks like something awkward is going on in macruby when you try to substitute/concatenate two force_encoded BOMs into a string.
&lt;/p&gt;
&lt;p&gt;
Thanks for listening, I hope that I've uncovered a bug and not just some wacko code that lives in HAML.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/906#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/911</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/911</guid>
        <title>#911: AOT code should optionally preserve and honor debug metadata</title>
        <pubDate>Tue, 21 Sep 2010 04:03:56 GMT</pubDate>
          <dc:creator>lsansonetti@…</dc:creator>
        <description>&lt;p&gt;
Currently, the dwarf metadata generated by the compiler disappears during AOT compilation. While this isn't a problem when AOT compilation is used to generate a final product, this is an issue when AOT code is used during development.
&lt;/p&gt;
&lt;p&gt;
The dwarf metadata should be preserved and exposed once the AOT code module is invoked, but not by default. Let's add a -g option to macrubyc to enable this.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/911#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/916</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/916</guid>
        <title>#916: NSKeyedArchiver/Unarchiver generates multiple copies of the same object</title>
        <pubDate>Thu, 23 Sep 2010 03:28:28 GMT</pubDate>
          <dc:creator>mred@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;$ cat test.rb
class A
  attr_accessor :a
  def initWithCoder coder
    @a = coder.decodeObjectForKey 'a'
    self
  end
  def encodeWithCoder coder
    coder.encodeObject @a, forKey:'a'
  end
end
a = A.new
b = A.new
a
b.a = a
puts(a == b.a)
data = NSKeyedArchiver.archivedDataWithRootObject a
a = NSKeyedUnarchiver.unarchiveObjectWithData data
puts(a == b.a)
$ macruby test.rb
true
false
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/916#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/917</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/917</guid>
        <title>#917: NSKeyedArchiver fails to find a superclass's implementation of 'encodeWithCoder:'</title>
        <pubDate>Fri, 24 Sep 2010 15:36:19 GMT</pubDate>
          <dc:creator>mred@…</dc:creator>
        <description>&lt;p&gt;
NSKeyedArchiver fails to find a superclass's implementation of 'encodeWithCoder:'
when its objects are encoded in a particular order.  When the code excerpted
below is run:
&lt;/p&gt;
&lt;pre class="wiki"&gt;class ArchiverDelegate
  def archiver archiver, willEncodeObject:object
    puts "willEncode #{object.class}"
    object
  end
end
def test_archiver
  graph = Graph.new
  a = A.new
  graph.addNode a
  b = B.new
  graph.addNode b
  b.connect a
  data = NSMutableData.alloc.init
  archiver = NSKeyedArchiver.alloc.initForWritingWithMutableData data
  delegate = ArchiverDelegate.alloc.init
  archiver.setDelegate delegate
  archiver.encodeObject graph, forKey:'root'
  archiver.finishEncoding
end
10.times do |i|
  puts i
  test_archiver
end
&lt;/pre&gt;&lt;p&gt;
I get results such as this:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test-archiver.rb
0
willEncode Graph
willEncode NSCFSet
willEncode A
willEncode B
willEncode Connection
1
willEncode Graph
willEncode NSCFSet
willEncode B
willEncode Connection
willEncode A
/Users/ehynes/ClockSmith/current/Test/hgignore/test-archiver.rb:1:in `&amp;lt;main&amp;gt;':
 super: no superclass method `encodeWithCoder' for #&amp;lt;A:0x2000cc160&amp;gt; (NoMethodError)
&lt;/pre&gt;&lt;p&gt;
The NoMethodError occurs whenever B is encoded before A.  Attached is the
complete code example.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/917#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/922</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/922</guid>
        <title>#922: Writing a MacFUSE fs doesn't work when delegating methods</title>
        <pubDate>Fri, 01 Oct 2010 18:41:26 GMT</pubDate>
          <dc:creator>kourge@…</dc:creator>
        <description>&lt;p&gt;
I tried implementing a simple HelloFS on MacFUSE through &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; by referring to the &lt;a class="ext-link" href="http://code.google.com/p/macfuse/source/browse/trunk/filesystems-objc/HelloFS/HelloFuseFileSystem.m"&gt;&lt;span class="icon"&gt; &lt;/span&gt;HelloFuseFileSystem.m&lt;/a&gt; sample. (See hellofs_working.rb) However, if the necessary methods delegate the response of another method on self, &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; aborts. (See hellofs.rb) This seems to occur in both 0.5 (on Leopard) and 0.6 (on Snow Leopard).
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/922#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/935</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/935</guid>
        <title>#935: Control Tower won't run Objective-C Rack App</title>
        <pubDate>Wed, 06 Oct 2010 21:22:03 GMT</pubDate>
          <dc:creator>lp@…</dc:creator>
        <description>&lt;p&gt;
Loading a Objective-C Rack app inside a framework won't work:
&lt;/p&gt;
&lt;p&gt;
my Objective-C class:
&lt;/p&gt;
&lt;pre class="wiki"&gt;@implementation ObjcRackApp
- (NSArray*)call:(NSDictionary *)env {
return [NSArray arrayWithObjects:
[NSNumber numberWithInteger:200],
[NSDictionary dictionaryWithObject:@"text/plain" forKey:@"Content-Type"],
@"Hello Objc!",
nil];
}
@end
&lt;/pre&gt;&lt;p&gt;
I can confirm it load and behaves properly with this script:
&lt;/p&gt;
&lt;pre class="wiki"&gt;framework "ObjcRackApp.framework"
class Hello
  def call(env)
    [200, { 'Content-Type' =&amp;gt; 'text/plain' }, "Hello Control Tower!"]
  end
end
env = {"a"=&amp;gt;"hash"}
arr = ObjcRackApp.alloc.init.call(env)
puts arr.class
puts arr[0].class
puts arr[1].class
puts arr[2].class
arr = Hello.new.call(env)
puts arr.class
puts arr[0].class
puts arr[1].class
puts arr[2].class
&lt;/pre&gt;&lt;p&gt;
which print:
&lt;/p&gt;
&lt;pre class="wiki"&gt;Array
Fixnum
Hash
String
Array
Fixnum
Hash
String
&lt;/pre&gt;&lt;p&gt;
but when I run:
&lt;/p&gt;
&lt;pre class="wiki"&gt;framework "ObjcRackApp.framework"
app = ObjcRackApp.alloc.init
run app
&lt;/pre&gt;&lt;p&gt;
with control_tower -R hello_objc.ru, the server starts without error but I get served a blank page in my browser
attached to this ticket are the used Objective-C framework and my Xcode project which built it.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/935#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/938</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/938</guid>
        <title>#938: StringScanner Performance</title>
        <pubDate>Thu, 07 Oct 2010 00:10:58 GMT</pubDate>
          <dc:creator>murphy@…</dc:creator>
        <description>&lt;p&gt;
The StringScanner seems to have quadratic, rather than linear, running time (based on the input's length).
&lt;/p&gt;
&lt;p&gt;
I've performed a series of simple benchmark with &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.7 and MRI 1.9.2:
&lt;/p&gt;
&lt;pre class="wiki"&gt;time [mac]ruby -rstrscan -e 's = StringScanner.new("abc," * XX_000); s.scan(/./) until s.eos?'
&lt;/pre&gt;&lt;p&gt;
The results are shown in the attached diagram.
&lt;/p&gt;
&lt;p&gt;
The issue is problematic because the time it takes to scan Strings bigger than a few KiB is too long. This makes the tests for the CodeRay library (see &lt;a class="ext-link" href="http://redmine.rubychan.de/projects/coderay/wiki/Test_Suite"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://redmine.rubychan.de/projects/coderay/wiki/Test_Suite&lt;/a&gt;) effectively fail.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/938#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/958</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/958</guid>
        <title>#958: Errno::EAGAIN occurs when read data from socket within Webrick.</title>
        <pubDate>Sat, 16 Oct 2010 15:55:26 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;# test_webrick_server.rb &lt;/span&gt;
&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s2"&gt;"webrick"&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Echo&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;WEBrick&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;GenericServer&lt;/span&gt;
  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;sock&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; line &lt;span class="o"&gt;=&lt;/span&gt; sock&lt;span class="o"&gt;.&lt;/span&gt;gets
      &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"[server] : get = "&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; line
      sock&lt;span class="o"&gt;.&lt;/span&gt;print line
    &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="ss"&gt;:end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
server &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Echo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="p"&gt;({&lt;/span&gt;
  &lt;span class="ss"&gt;:BindAddress&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;"127.0.0.1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:Port&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="no"&gt;Signal&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;trap&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'INT'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; server&lt;span class="o"&gt;.&lt;/span&gt;shutdown &lt;span class="p"&gt;}&lt;/span&gt;
server&lt;span class="o"&gt;.&lt;/span&gt;start
&lt;/pre&gt;&lt;/div&gt;&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;# test_client.rb &lt;/span&gt;
&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s2"&gt;"socket"&lt;/span&gt;
host &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"127.0.0.1"&lt;/span&gt;
port &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4000&lt;/span&gt;
c &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;TCPSocket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;open&lt;span class="p"&gt;(&lt;/span&gt;host&lt;span class="p"&gt;,&lt;/span&gt; port&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"foo&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"bar&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;each &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;item&lt;span class="o"&gt;|&lt;/span&gt;
  c&lt;span class="o"&gt;.&lt;/span&gt;print item
  &lt;span class="nb"&gt;p&lt;/span&gt; c&lt;span class="o"&gt;.&lt;/span&gt;gets
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"1234"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"aaa"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"bbb"&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;each &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;item&lt;span class="o"&gt;|&lt;/span&gt;
  c&lt;span class="o"&gt;.&lt;/span&gt;puts item
  &lt;span class="nb"&gt;p&lt;/span&gt; c&lt;span class="o"&gt;.&lt;/span&gt;gets
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ DYLD_LIBRARY_PATH=. ./macruby -I./lib test_webrick_server.rb
[2010-10-17 00:43:34] INFO  WEBrick 1.3.1
[2010-10-17 00:43:34] INFO  ruby 1.9.2 (2008-06-03) [universal-darwin10.0]
[2010-10-17 00:43:34] INFO  Echo#start: pid=953 port=4000
"[server] : get = foo\n"
[2010-10-17 00:43:37] ERROR Errno::EAGAIN: Resource temporarily unavailable - read() failed
        /Users/watson/src/macruby-dev/test_webrick_server.rb:5:in `run:'
        /Users/watson/src/macruby-dev/lib/webrick/server.rb:183:in `block'
&lt;/pre&gt;&lt;p&gt;
It works as expected if I do not use Webrick.
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;# test_socket_server.rb &lt;/span&gt;
&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s2"&gt;"socket"&lt;/span&gt;
host &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"127.0.0.1"&lt;/span&gt;
port &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4000&lt;/span&gt;
server &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="no"&gt;TCPServer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;open&lt;span class="p"&gt;(&lt;/span&gt;port&lt;span class="p"&gt;)&lt;/span&gt;
s &lt;span class="o"&gt;=&lt;/span&gt; server&lt;span class="o"&gt;.&lt;/span&gt;accept
&lt;span class="k"&gt;while&lt;/span&gt; line &lt;span class="o"&gt;=&lt;/span&gt; s&lt;span class="o"&gt;.&lt;/span&gt;gets
  &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"[server] : gets = "&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; line
  s&lt;span class="o"&gt;.&lt;/span&gt;print line
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;pre class="wiki"&gt;$ DYLD_LIBRARY_PATH=. ./macruby -I./lib test_socket_server.rb
"[server] : gets = foo\n"
"[server] : gets = bar\n"
"[server] : gets = 1234\n"
"[server] : gets = aaa\n"
"[server] : gets = bbb\n"
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/958#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/972</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/972</guid>
        <title>#972: RSpec 2.0.1 &amp; Bundler rake task segfaults under MacRuby 0.7.1</title>
        <pubDate>Tue, 26 Oct 2010 13:32:28 GMT</pubDate>
          <dc:creator>jon@…</dc:creator>
        <description>&lt;p&gt;
When attempting to use the RSpec 2.0.1 rake task in a project using Bundler 1.0.2 I see a segfault when rspec is run by the rake task. This does not occur if a Gemfile isn't present in the current directory.
&lt;/p&gt;
&lt;p&gt;
This may be related to an error I'm seeing from Bundler when using bundle exec:
&lt;/p&gt;
&lt;p&gt;
"Could not find task exec"
&lt;/p&gt;
&lt;p&gt;
Code to reproduce can be found at &lt;a class="ext-link" href="http://github.com/jellybob/macruby-segfault"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://github.com/jellybob/macruby-segfault&lt;/a&gt; and run with the following process:
&lt;/p&gt;
&lt;p&gt;
$ macgem install bundler
$ macruby -S bundle install
$ macrake spec
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/972#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/986</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/986</guid>
        <title>#986: "1.0 + Float::EPSILON" should not become equal to 1.0.</title>
        <pubDate>Sat, 30 Oct 2010 04:37:34 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;$ ruby19 -v -e "p 1.0 + Float::EPSILON"
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]
1.0000000000000002
$ DYLD_LIBRARY_PATH=. ./macruby -I./lib -e "p 1.0 + Float::EPSILON"
1.0
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/986#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/987</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/987</guid>
        <title>#987: NSTask segfault</title>
        <pubDate>Wed, 03 Nov 2010 21:41:30 GMT</pubDate>
          <dc:creator>lp@…</dc:creator>
        <description>&lt;p&gt;
When executing thefollowing erroneous code, where arguments should be in an array:
&lt;/p&gt;
&lt;p&gt;
framework "foundation"
task = NSTask.launchedTaskWithLaunchPath("/bin/ls", arguments:&amp;#34;-l&amp;#34;)
p task.isRunning
p task.standardOutput
&lt;/p&gt;
&lt;p&gt;
I get:
=&amp;gt; Segmentation fault
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/987#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/993</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/993</guid>
        <title>#993: Assertion failure : vm.cpp</title>
        <pubDate>Mon, 08 Nov 2010 20:54:04 GMT</pubDate>
          <dc:creator>hungerandthirst@…</dc:creator>
        <description>&lt;p&gt;
no idea where this comes from but when trying to use bundler to manage gem deps in a macruby app like so
&lt;/p&gt;
&lt;p&gt;
require "rubygems"
require "bundler/setup"
&lt;/p&gt;
&lt;p&gt;
I get the following:
&lt;/p&gt;
&lt;p&gt;
Assertion failed: ((size_t)pos &amp;lt; current_exceptions.size()), function pop_current_exception, file vm.cpp, line 3370.
&lt;/p&gt;
&lt;p&gt;
If I remove the 'require bundler/setup' line, it works fine.
&lt;/p&gt;
&lt;p&gt;
Using 7.1 release.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/993#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/996</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/996</guid>
        <title>#996: Missing Proc#source_location leads to incomplete Kernel#caller backtraces</title>
        <pubDate>Sun, 14 Nov 2010 15:20:06 GMT</pubDate>
          <dc:creator>martijn@…</dc:creator>
        <description>&lt;p&gt;
I'm trying to use RSpec (latest version, 2.1.0) with &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; nightly, but there is information missing from the exception backtraces which makes it difficult to see where exactly specs fail. The issue is that RSpec uses instance_eval with a Proc object to execute an example. In Ruby 1.9.2, Procs include their source_location, an Array consisting of the file name and line number of the code represented by the Proc. This source_location (or actually it's underlying implementation) is used by Ruby 1.9.2 to generate Kernel#caller backtraces for code executed from a Proc.
&lt;/p&gt;
&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; however, doesn't implement Proc#source_location (I checked proc.c and compared it to the Ruby 1.9.2 version) and hence Kernel#caller output doesn't show backtraces for code executed from a Proc.
&lt;/p&gt;
&lt;p&gt;
RubySpec contains a failing core/proc/source_location_spec.rb which might help in implementing this feature.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/996#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/1008</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/1008</guid>
        <title>#1008: Can't get the last line from $_. Need to implement rb_lastline_get and rb_lastline_set.</title>
        <pubDate>Wed, 24 Nov 2010 21:11:21 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s1"&gt;'tempfile'&lt;/span&gt;
t &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Tempfile&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"foo"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
t&lt;span class="o"&gt;.&lt;/span&gt;puts &lt;span class="s2"&gt;"1"&lt;/span&gt;
t&lt;span class="o"&gt;.&lt;/span&gt;puts &lt;span class="s2"&gt;"2"&lt;/span&gt;
t&lt;span class="o"&gt;.&lt;/span&gt;puts &lt;span class="s2"&gt;"3"&lt;/span&gt;
t&lt;span class="o"&gt;.&lt;/span&gt;close
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;io&lt;span class="p"&gt;)&lt;/span&gt;
  io&lt;span class="o"&gt;.&lt;/span&gt;gets
  &lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="vg"&gt;$_&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
io &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;open&lt;span class="p"&gt;(&lt;/span&gt;t&lt;span class="o"&gt;.&lt;/span&gt;path&lt;span class="p"&gt;)&lt;/span&gt;
io&lt;span class="o"&gt;.&lt;/span&gt;gets
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="vg"&gt;$_&lt;/span&gt;
io&lt;span class="o"&gt;.&lt;/span&gt;gets
&lt;span class="nb"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;io&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="vg"&gt;$_&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby19 -v t.rb
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]
"1\n"
"3\n"
"2\n"
$ macruby -v t.rb
MacRuby 0.8 (ruby 1.9.2) [universal-darwin10.0, x86_64]
nil
nil
nil
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/1008#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/1019</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/1019</guid>
        <title>#1019: String#gsub performance</title>
        <pubDate>Fri, 03 Dec 2010 05:24:32 GMT</pubDate>
          <dc:creator>yasuimao@…</dc:creator>
        <description>&lt;p&gt;
String#gsub with block performance improved dramatically with &lt;a class="changeset" href="http://www.macruby.org/trac/changeset/4964" title="make sure Match objects created from the same string keep a reference to a ..."&gt;r4964&lt;/a&gt;, but String#gsub with or without block is still about 4-5 times slower than that of Ruby 1.8.7.
&lt;/p&gt;
&lt;p&gt;
Test 1 - gsub
&lt;/p&gt;
&lt;pre class="wiki"&gt;10.times do
  text = File.read("test.txt")
  text.gsub!(/\w+/,"test")
end
&lt;/pre&gt;&lt;p&gt;
Test 2 - gsub with block
&lt;/p&gt;
&lt;pre class="wiki"&gt;10.times do
  text = File.read("test.txt")
  text.gsub!(/\w+/){|x| x.upcase}
end
&lt;/pre&gt;&lt;p&gt;
The original text is in English with 8154 words.
&lt;/p&gt;
&lt;p&gt;
Results - Test 1 (sec.)
&lt;/p&gt;
&lt;pre class="wiki"&gt;Ruby 1.8.7 		0.126	0.144	0.136
MacRuby 0.8 nightly 	0.760	0.830	0.855
&lt;/pre&gt;&lt;p&gt;
Results - Test 2 (sec.)
&lt;/p&gt;
&lt;pre class="wiki"&gt;Ruby 1.8.7 		0.369	0.336	0.303
MacRuby 0.8 nightly	1.377	1.552	1.465
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/1019#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/47</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/47</guid>
        <title>#47: Cannot pass a :symbol directly as a named parameter</title>
        <pubDate>Mon, 07 Apr 2008 23:15:46 GMT</pubDate>
          <dc:creator>cremes@…</dc:creator>
        <description>&lt;p&gt;
Here's an example to illustrate. Code was tested against the "testing" branch from 20080405.
&lt;/p&gt;
&lt;p&gt;
class A
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
def initialize
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
@h = {}
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
end
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;
def setValue(val, forKey:key)
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
@h[key] = val
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
end
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
end
&lt;/p&gt;
&lt;p&gt;
a = A.new
&lt;/p&gt;
&lt;p&gt;
a.setValue("triple", forKey::three) # fails
&lt;/p&gt;
&lt;p&gt;
a.setValue("triple", forKey: :three) # succeeds
&lt;/p&gt;
&lt;p&gt;
three = :three
&lt;/p&gt;
&lt;p&gt;
a.setValue("triple", forKey:three) # succeeds
&lt;/p&gt;
&lt;p&gt;
a.setValue("triple", forKey:'three'.to_sym) # succeeds
&lt;/p&gt;
&lt;p&gt;
When using the #:: syntax the parser mistakenly views it as an attempt to access the method #forKey on Object. At minimum it should probably throw a more useful error message and perhaps suggest adding a space between colons.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/47#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/81</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/81</guid>
        <title>#81: Enumerable::Enumerator seems to be broken</title>
        <pubDate>Sat, 21 Jun 2008 14:56:01 GMT</pubDate>
          <dc:creator>flatter@…</dc:creator>
        <description>&lt;p&gt;
Hi there,
Enumerators seem to be broken in trunk (did not try 0.2). Perhaps I'm using them the wrong way but anyways "at least it should not crash" (greetings to lrz).
&lt;/p&gt;
&lt;p&gt;
&lt;strong&gt;Code sample:&lt;/strong&gt;
&lt;/p&gt;
&lt;pre class="wiki"&gt;arr = [:a, :b, :c, :d]
enum = arr.map!
while(el = enum.next) do
 puts el
end
&lt;/pre&gt;&lt;p&gt;
&lt;strong&gt;Output:&lt;/strong&gt;
&lt;/p&gt;
&lt;pre class="wiki"&gt;foo.rb:4: [BUG] Segmentation fault
MacRuby version 0.3 (ruby 1.9.0 2008-06-03) [universal-darwin9.3]
-- stack frame ------------
0000 (0x30030): 00000004
0001 (0x30034): 00000001
0002 (0x30038): 00000004
0003 (0x3003c): 00000001
0004 (0x30040): 010c39f0
0005 (0x30044): 010c3a90
0006 (0x30048): 00000004
0007 (0x3004c): 00000004
0008 (0x30050): 00000001
0009 (0x30054): 010c3a90
0010 (0x30058): 00000004
0011 (0x3005c): 010c3d20
-- control frame ----------
c:0004 p:---- s:0012 b:0012 l:002478 d:002478 CFUNC  :next
c:0003 p:0038 s:0009 b:0009 l:000008 d:000008 TOP    foo.rb:4
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH :inherited
c:0001 p:0000 s:0002 b:0002 l:000001 d:000001 TOP
---------------------------
DBG&amp;gt; : "foo.rb:4:in `next'"
DBG&amp;gt; : "foo.rb:4:in `&amp;lt;main&amp;gt;'"
-- backtrace of native function call (Use addr2line) --
0x2b63d6
0x1df14c
0x1df18b
0x270311
0x9123309b
0xffffffff
0x2bc096
0x2bc210
0x1de90a
0x2a4df1
0x2a8ab8
0x1e
-------------------------------------------------------
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/81#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/177</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/177</guid>
        <title>#177: trunk fails to build 3-way fat depending on order of archs</title>
        <pubDate>Sat, 13 Dec 2008 00:59:57 GMT</pubDate>
          <dc:creator>dognotdog@…</dc:creator>
        <description>&lt;p&gt;
For example:
&lt;/p&gt;
&lt;p&gt;
$ RC_ARCHS="ppc i386 x86_64" rake
&lt;/p&gt;
&lt;p&gt;
fails to build on trunk &lt;a class="changeset" href="http://www.macruby.org/trac/changeset/766" title="fix for #173 (patch contributed by Vincent Isambart)"&gt;r766&lt;/a&gt;, with various errors depending on the order of the archs.
&lt;/p&gt;
&lt;p&gt;
This seems to work, though:
&lt;/p&gt;
&lt;p&gt;
$ RC_ARCHS="i386 ppc x86_64" rake
&lt;/p&gt;
&lt;p&gt;
On OS X 10.5.5 9F33 / Intel
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/177#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/183</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/183</guid>
        <title>#183: loop/next seg faulting</title>
        <pubDate>Sat, 20 Dec 2008 02:11:13 GMT</pubDate>
          <dc:creator>drnicwilliams@…</dc:creator>
        <description>&lt;p&gt;
The following should work:
&lt;/p&gt;
&lt;p&gt;
@@@
short_enum = [1, 2, 3].to_enum
long_enum = ('a'..'z').to_enum
loop do
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
puts "#{short_enum.next} #{long_enum.next}"
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
end
@@@
&lt;/p&gt;
&lt;p&gt;
Example comes from &lt;a class="ext-link" href="http://slideshow.rubyforge.org/ruby19.html"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://slideshow.rubyforge.org/ruby19.html&lt;/a&gt; slide 37
&lt;/p&gt;
&lt;p&gt;
It currently segfaults.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/183#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/267</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/267</guid>
        <title>#267: Change permissions on Info.plist and InfoPlist.strings</title>
        <pubDate>Wed, 27 May 2009 02:41:17 GMT</pubDate>
          <dc:creator>dj2@…</dc:creator>
        <description>&lt;p&gt;
Both Info.plist and InfoPlist.strings have permissions of 600. This causes problems with the Hotcocoa deploy command if run as a regular user. The attached patch changes the permissions to be 644 so users can copy the files
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/267#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/297</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/297</guid>
        <title>#297: ObjectSpace.each_object returns Class and Module objects when it shouldn't</title>
        <pubDate>Sat, 18 Jul 2009 16:36:48 GMT</pubDate>
          <dc:creator>ned@…</dc:creator>
        <description>&lt;p&gt;
each_object(someclass) returns objects that are not subclasses of the requested class.
&lt;/p&gt;
&lt;pre class="wiki"&gt;ObjectSpace.each_object(String).reject { |o| o.class.ancestors.include? String }.map  { |o| o.class }.uniq
=&amp;gt; [Class, Module, NSString]
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/297#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/331</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/331</guid>
        <title>#331: Extending an existing ObjC class: outlets and actions are not visible in IB</title>
        <pubDate>Wed, 09 Sep 2009 18:45:30 GMT</pubDate>
          <dc:creator>dev@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;# foo.rb
class Foo # defined in ObjC also
  attr_accessor bar1
  def bar2(sender)
    puts "bar2"
  end
end
&lt;/pre&gt;&lt;p&gt;
neither bar1 nor bar2 are visible in Interface Builder!
&lt;/p&gt;
&lt;p&gt;
The output of
&lt;/p&gt;
&lt;pre class="wiki"&gt;/Developer/usr/bin/rb_nibtool -f /path/to/foo.rb
&lt;/pre&gt;&lt;p&gt;
is OK.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/331#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/333</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/333</guid>
        <title>#333: Class initialize method is not called</title>
        <pubDate>Tue, 15 Sep 2009 19:39:31 GMT</pubDate>
          <dc:creator>ehynes@…</dc:creator>
        <description>&lt;p&gt;
Attempts to register defaults in the NSRegistrationDomain inside a class initialize method failed.  Inserted 'raise' statement in the class initialize method to test if it was being called.  No exception was raised when I reran the app.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/333#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/363</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/363</guid>
        <title>#363: IO.copy_stream dont handle copyfile.</title>
        <pubDate>Sat, 03 Oct 2009 19:29:45 GMT</pubDate>
          <dc:creator>kazuhisa@…</dc:creator>
        <description>&lt;p&gt;
I try to run folloing script.
&lt;/p&gt;
&lt;pre class="wiki"&gt;  src = open("a")
  dst = open("b","w+")
  IO.copy_stream(src,dst)
  src.close
  dst.close
&lt;/pre&gt;&lt;p&gt;
I expected to run via copyfile function . but not.
because src/dst object is indicated as not T_FILE by rb_type.(T_NATIVE)
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/363#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/378</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/378</guid>
        <title>#378: Macruby 0.5 allows instantiation of a Module instance</title>
        <pubDate>Sat, 10 Oct 2009 16:26:52 GMT</pubDate>
          <dc:creator>keith.gautreaux@…</dc:creator>
        <description>&lt;p&gt;
It seems that &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; treats modules differently than Ruby 1.9. You shouldn't be able to instantiate a named module using the new method, i.e.
&lt;/p&gt;
&lt;pre class="wiki"&gt;A = Module.new do
  def meth1
    "hello"
  end
end
&lt;/pre&gt;&lt;p&gt;
YARV:
&lt;/p&gt;
&lt;pre class="wiki"&gt;a = A.new =&amp;gt; NoMethodError: undefined method `new' for A:Module
&lt;/pre&gt;&lt;p&gt;
but it does in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; returning an instance of A:Module which responds to the meth1 call:
&lt;/p&gt;
&lt;pre class="wiki"&gt;  a.meth1 =&amp;gt;"hello"
&lt;/pre&gt;&lt;p&gt;
I believe the proper behavior (based on the 1.9 pickaxe documentation) is to allow extending of an object with A's methods but not instantiation.
&lt;/p&gt;
&lt;pre class="wiki"&gt;a = NSObject.new
a.extend(A)
a.meth1 =&amp;gt; "hello"
&lt;/pre&gt;&lt;p&gt;
Once I figure out how to write specs I'll see if I can submit a failing one.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/378#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/414</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/414</guid>
        <title>#414: Printing Block Instances Inconsistent</title>
        <pubDate>Sat, 31 Oct 2009 08:09:36 GMT</pubDate>
          <dc:creator>conradwt@…</dc:creator>
        <description>&lt;p&gt;
The printing of block instances, lambda and proc, are not consistent with Ruby 1.9.1/1.9.2:
&lt;/p&gt;
&lt;p&gt;
block-instance-output.rb:
&lt;/p&gt;
&lt;pre class="wiki"&gt;
a_proc = Proc.new { puts "This is a test proc" }
p a_proc
a_lambda = lambda { puts "This is a test lambda" }
p a_lambda
&lt;/pre&gt;&lt;p&gt;
from command line:
&lt;/p&gt;
&lt;pre class="wiki"&gt;macruby block-instance-output.rb
#&amp;lt;Proc:0x2000246c0&amp;gt;
#&amp;lt;Proc:0x200024600&amp;gt;
&lt;/pre&gt;&lt;pre class="wiki"&gt;ruby  block-instance-output.rb
#&amp;lt;Proc:0x000001010399e0@block-instance-output.rb:1&amp;gt;
#&amp;lt;Proc:0x00000101039900@block-instance-output.rb:4 (lambda)&amp;gt;
&lt;/pre&gt;&lt;p&gt;
from irb:
&lt;/p&gt;
&lt;pre class="wiki"&gt;
$ macirb
irb(main):001:0&amp;gt; load "block-instance-output.rb"
#&amp;lt;Proc:0x200247480&amp;gt;
#&amp;lt;Proc:0x2002473c0&amp;gt;
=&amp;gt; true
&lt;/pre&gt;&lt;pre class="wiki"&gt;
$ irb
irb(main):001:0&amp;gt; load "block-instance-output.rb"
#&amp;lt;Proc:0x00000101014398@/Users/conradwt/block-instance-output.rb:1&amp;gt;
#&amp;lt;Proc:0x000001010141a0@/Users/conradwt/block-instance-output.rb:4 (lambda)&amp;gt;
=&amp;gt; true
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/414#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/421</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/421</guid>
        <title>#421: MacGem reports wrong executable directory</title>
        <pubDate>Wed, 04 Nov 2009 00:28:00 GMT</pubDate>
          <dc:creator>conradwt@…</dc:creator>
        <description>&lt;p&gt;
&lt;tt&gt;macgem environment&lt;/tt&gt; reports that the executable directory is
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;RUBY EXECUTABLE: /Library/Frameworks/MacRuby.framework/Versions/0.5/usr/bin/macruby
&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt;&lt;li&gt;EXECUTABLE DIRECTORY: /usr/bin
&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;
Shouldn't the executable directory be the parent directory of the &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; executable?  For example, I was thinking that it should be one of the following:
&lt;/p&gt;
&lt;p&gt;
/Library/Frameworks/MacRuby.framework/Versions/0.5/usr/bin
&lt;/p&gt;
&lt;p&gt;
or
&lt;/p&gt;
&lt;p&gt;
/Library/Frameworks/MacRuby.framework/Versions/Current/usr/bin
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/421#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/432</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/432</guid>
        <title>#432: Module.nesting not working</title>
        <pubDate>Mon, 16 Nov 2009 07:16:23 GMT</pubDate>
          <dc:creator>mattaimonetti@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;$ ruby1.9 -e "module M1; module M2; p Module.nesting;  end; end"
[M1::M2, M1]
$ macruby -e "module M1; module M2; p Module.nesting;  end; end"
nil
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/432#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/500</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/500</guid>
        <title>#500: DRb problems</title>
        <pubDate>Fri, 11 Dec 2009 19:13:59 GMT</pubDate>
          <dc:creator>fonseka@…</dc:creator>
        <description>&lt;p&gt;
Hi! I'm trying to write a simple DRb service.
&lt;/p&gt;
&lt;p&gt;
Server runs on &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;
&lt;/p&gt;
&lt;pre class="wiki"&gt;class Downloader
  def download
    puts "Downloading"
  end
end
service = DRb.start_service("druby://0.0.0.0:9999", Downloader.new)
puts "service started on port 9999"
DRb.thread.join
&lt;/pre&gt;&lt;p&gt;
Client runs on regular 1.8.7 Ruby
&lt;/p&gt;
&lt;pre class="wiki"&gt;require 'drb'
server = DRbObject.new_with_uri('druby://localhost:9999')
server.download
DRb::DRbConnError: connection closed
	from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/drb/drb.rb:570:in `load'
	from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/drb/drb.rb:632:in `recv_reply'
	from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/drb/drb.rb:923:in `recv_reply'
	from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/drb/drb.rb:1202:in `send_message'
	from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/drb/drb.rb:1093:in `method_missing'
	from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/drb/drb.rb:1177:in `open'
	from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/drb/drb.rb:1092:in `method_missing'
	from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/drb/drb.rb:1110:in `with_friend'
	from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/drb/drb.rb:1091:in `method_missing'
	from (irb):3
&lt;/pre&gt;&lt;p&gt;
if I try to run the client under macruby, the server.download call hangs forever.
&lt;/p&gt;
&lt;p&gt;
Latest nightly Macruby, on the latest SL with the latest XCode
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/500#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/510</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/510</guid>
        <title>#510: website: How Ruby Programmers Should Learn Cocoa</title>
        <pubDate>Thu, 17 Dec 2009 00:22:35 GMT</pubDate>
          <dc:creator>ernest.prabhakar@…</dc:creator>
        <description>&lt;p&gt;
[From the mailing list - someone should add to the docs]
Brian Chapados wrote:
&lt;/p&gt;
&lt;p&gt;
If &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; is your first exposure to mac programming and all of the
associated tools and techniques, starting out by jumping into an
IB-based project that uses CoreData &amp;amp; Bindings is going to be really
confusing.
&lt;/p&gt;
&lt;p&gt;
I'd break up the tasks into pieces small enough that you can actually
understand what's going on. You shouldn't feel like things are
happening "magically". If that is the case, then try to take a step
back and figure out how the magic trick works.
&lt;/p&gt;
&lt;p&gt;
For example, if you want to tackle CoreData first, then start with
just CoreData.  Build a command-line program that creates a CoreData
stack by reading in your compiled .xcdatamodel (or create the model in
code!), add some data, and save it.  Once you've got that working,
then make it download data from your web service and save it.
&lt;/p&gt;
&lt;p&gt;
Here is the approach I would take:
&lt;/p&gt;
&lt;p&gt;
1. If you haven't already, read through the Core Data Programming guide:
&lt;a class="ext-link" href="http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
At the very least, browse through this to get a feel for what's going
on.  You won't understand everything, but at least you'll have some
sense of where to look when you get stuck.
&lt;/p&gt;
&lt;p&gt;
2. Read the Core Data Utility tutorial:
&lt;a class="ext-link" href="http://developer.apple.com/mac/library/documentation/cocoa/conceptual/CoreDataUtilityTutorial/Articles/00_introduction.html"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://developer.apple.com/mac/library/documentation/cocoa/conceptual/CoreDataUtilityTutorial/Articles/00_introduction.html&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
This gives you a basic Obj-C version of a program the uses CoreData
entirely through the API.  Everything is done in code, even creating
the model, so it should get you started on something basic.
&lt;/p&gt;
&lt;p&gt;
3. As it turns out, Matt Gallagher (cocoawithlove.com) recently posted
an excellent article on parsing CSV files and importing the data into
CoreData: &lt;a class="ext-link" href="http://cocoawithlove.com/2009/11/writing-parser-using-nsscanner-csv.html"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://cocoawithlove.com/2009/11/writing-parser-using-nsscanner-csv.html&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
I highly recommend you also download and read through his code to see
how it works.
&lt;/p&gt;
&lt;p&gt;
4. Use the code from &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/2" title="defect: function 'WebInitForCarbon' return value defined more than once (closed: fixed)"&gt;#2&lt;/a&gt; &amp;amp; &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/3" title="defect: &amp;#34;broken US-ASCII string&amp;#34; during RI generation (closed: fixed)"&gt;#3&lt;/a&gt; to write a minimal implementation in
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; that imports data into your model.
&lt;/p&gt;
&lt;p&gt;
5. After getting &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/4" title="defect: if .ext/rdoc exists, ruby/rdoc sometimes crashes (closed: fixed)"&gt;#4&lt;/a&gt; to work, go back and read the section on
efficiently importing data in the CoreData programming guide and
refactor your import code appropriately.
&lt;/p&gt;
&lt;p&gt;
At least this way, if you get stuck on &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/4" title="defect: if .ext/rdoc exists, ruby/rdoc sometimes crashes (closed: fixed)"&gt;#4&lt;/a&gt; &amp;amp; &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/5" title="defect: Problem in readline.c with filename_completion_function (closed: wontfix)"&gt;#5&lt;/a&gt;, you'll have a fairly
short, self-contained example program that you can put in a gist, post
a link, and ask for help on specific parts.
&lt;span class="underline"&gt;&lt;/span&gt;&lt;span class="underline"&gt;&lt;/span&gt;&lt;span class="underline"&gt;&lt;/span&gt;&lt;span class="underline"&gt;&lt;/span&gt;&lt;span class="underline"&gt;&lt;/span&gt;&lt;span class="underline"&gt;&lt;/span&gt;&lt;span class="underline"&gt;&lt;/span&gt;&lt;span class="underline"&gt;&lt;/span&gt;_
&lt;/p&gt;
&lt;p&gt;
And 6. Once you believe you understand how everything works, submit a sample code to us! :-)
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/510#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/528</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/528</guid>
        <title>#528: Improve Tail Call Elimination</title>
        <pubDate>Wed, 30 Dec 2009 08:02:14 GMT</pubDate>
          <dc:creator>haruki.zaemon@…</dc:creator>
        <description>&lt;p&gt;
As it currently stands, &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; performs TCO for a method that calls itself. This is a great start and the implementation appears to be better than any other current Ruby implementation.
&lt;/p&gt;
&lt;p&gt;
When dealing with OO data structures, it's more common to call methods on _other_ instances and/or mutual recursion between two methods--be they on the same or a different instance.
&lt;/p&gt;
&lt;p&gt;
For example, imagine traversing a linked list recursively:
&lt;/p&gt;
&lt;pre class="wiki"&gt;    def each
      yield(head)
      tail.each(&amp;amp;block)
    end
&lt;/pre&gt;&lt;p&gt;
This works great for small-ish lists but when processing larger lists stack overflows are common place. To remedy this, it needs to be re-written iteratively:
&lt;/p&gt;
&lt;pre class="wiki"&gt;    def each
      list = self
      while !list.empty?
        yield(list.head)
        list = list.tail
      end
    end
&lt;/pre&gt;&lt;p&gt;
Not only is the latter more verbose, but in either case, without TCO, because the code always executes in the context of the first element, the traversal must complete before the garbage collector has a chance to reap unreferenced elements.
&lt;/p&gt;
&lt;p&gt;
It would be great if MacRub could do tail-call elimination for any returning statement that no longer requires the stack.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/528#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/537</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/537</guid>
        <title>#537: Missing Time#strftime formatter: "%P"</title>
        <pubDate>Sat, 02 Jan 2010 06:30:54 GMT</pubDate>
          <dc:creator>bburky@…</dc:creator>
        <description>&lt;p&gt;
I use the command line &lt;a class="ext-link" href="http://sup.rubyforge.org/"&gt;&lt;span class="icon"&gt; &lt;/span&gt;sup&lt;/a&gt; email program which is written in ruby. While I don't run it under &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;, I was checking an issue which came up on the mailing list about the "%P" formatter for strftime and tested it in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; too. The "%P" should output either "am" or "pm" in lower case.
&lt;/p&gt;
&lt;p&gt;
Apparently most (all?) 1.8.7 rubys on OS X, don't support the "%P" formatting, which is not required. Most linux 1.8.7 rubys do support it though.
&lt;/p&gt;
&lt;p&gt;
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; also does not support it. However it is required for 1.9. The ruby docs for Time list it for example:
&lt;a class="ext-link" href="http://ruby-doc.org/core-1.9/classes/Time.html#M000314"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://ruby-doc.org/core-1.9/classes/Time.html#M000314&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
Here's an example:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby --version
MacRuby version 0.5 (ruby 1.9.0) [universal-darwin10.0, x86_64]
$ macruby -e 'puts Time.now().strftime("%l:%M%P")'
11:25P
&lt;/pre&gt;&lt;p&gt;
That should output "11:25pm"
&lt;/p&gt;
&lt;p&gt;
I didn't check any of the other format strings.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/537#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/539</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/539</guid>
        <title>#539: "macrubyc --static" failing on SL 10.6, MacRuby 0.5 Beta 2</title>
        <pubDate>Sun, 03 Jan 2010 17:49:22 GMT</pubDate>
          <dc:creator>mail@…</dc:creator>
        <description>&lt;p&gt;
When attempting to run the following command:
&lt;/p&gt;
&lt;pre class="wiki"&gt;macrubyc --static hello-world.rb -o hello
&lt;/pre&gt;&lt;p&gt;
with &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.5 Beta 2 on OS X 10.6, Mac Pro Early 2008, using the &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.5 Beta 2 package installer from the downloads page, I receive the following error:
&lt;/p&gt;
&lt;pre class="wiki"&gt;Undefined symbols:
  "llvm::raw_fd_ostream::raw_fd_ostream(char const*, std::basic_string&amp;lt;char, std::char_traits&amp;lt;char&amp;gt;, std::allocator&amp;lt;char&amp;gt; &amp;gt;&amp;amp;, unsigned int)", referenced from:
      _rb_vm_aot_compile in libmacruby-static.a(vm.o)
  "llvm::Value::printCustom(llvm::raw_ostream&amp;amp;) const", referenced from:
      vtable for llvm::CmpInstin libmacruby-static.a(bridgesupport.o)
      vtable for llvm::CmpInstin libmacruby-static.a(compiler.o)
ld: symbol(s) not found
collect2: ld returned 1 exit status
Error when executing `/usr/bin/g++ -o hello -arch x86_64 -L/Library/Frameworks/MacRuby.framework/Versions/0.5/usr/lib -lmacruby-static -framework Foundation -lobjc -lauto -lxml2 -L/opt/local/lib  -lpthread -lffi -lm -lLLVMBitWriter -lLLVMInterpreter -lLLVMX86CodeGen -lLLVMX86Info -lLLVMSelectionDAG -lLLVMAsmPrinter -lLLVMJIT -lLLVMExecutionEngine -lLLVMCodeGen -lLLVMScalarOpts -lLLVMTransformUtils -lLLVMipa -lLLVMAnalysis -lLLVMTarget -lLLVMMC -lLLVMCore -lLLVMSupport -lLLVMSystem /var/folders/QO/QOheC+M9HmWJZ+oGEZpjEE+++TI/-Tmp-/main.o ./hello-world.o'
&lt;/pre&gt;&lt;p&gt;
The file hello-world.rb is simply:
&lt;/p&gt;
&lt;pre class="wiki"&gt;#!/usr/bin/env ruby -w
puts 'Hello, world!'
&lt;/pre&gt;&lt;p&gt;
Just in case it is at all relevant, I also have MacPorts installed and the LLVM port, the ruby port and the ruby1.9 port installed from there as well (though these should presumably not have any effect due to the package installer using its own libraries).
&lt;/p&gt;
&lt;p&gt;
In searching for similar problems mentioned by others, I haven't been able to find any and as such I have started a new ticket.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/539#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/566</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/566</guid>
        <title>#566: MacRuby uses a ton of memory on a Shootout benchmark</title>
        <pubDate>Wed, 20 Jan 2010 23:03:00 GMT</pubDate>
          <dc:creator>peter@…</dc:creator>
        <description>&lt;p&gt;
@lrz asked me to file this. I'm far from an expert at submitting tickets so sorry if this is vague, etc..
&lt;/p&gt;
&lt;p&gt;
I'm trying to benchmark &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; on the Alioth Shootout programs ( &lt;a class="ext-link" href="http://shootout.alioth.debian.org/"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://shootout.alioth.debian.org/&lt;/a&gt; ). The first is binary-trees.rb as I've posted at &lt;a class="ext-link" href="http://gist.github.com/282386"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://gist.github.com/282386&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
Running binary-trees.rb with an argument of 20 (as is done in the Alioth shootout proper) results in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; chewing up 3GB of memory in just the first minute, whereas 1.9.1 makes solid progress and doesn't go above about 300MB. This may or may not be a leak (it may just be an inefficiency in MR somewhere.. I didn't keep it running beyond the minute).
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/566#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/568</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/568</guid>
        <title>#568: MacRuby is a lot slower than 18, and in 19, in this benchmark.</title>
        <pubDate>Thu, 21 Jan 2010 03:48:18 GMT</pubDate>
          <dc:creator>rob@…</dc:creator>
        <description>&lt;p&gt;
This isn't a bug or anything like that, but I just thought I'd report how much slower &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; can be when compared to MRI 18 or 19.
&lt;/p&gt;
&lt;pre class="wiki"&gt;require 'benchmark'
Benchmark.bm do |r|
  r.report { (0..10_000_000).to_a.map(&amp;amp;:to_s) }
end
&lt;/pre&gt;&lt;p&gt;
MRI 18 reported 8 seconds or there abouts, and MRI 19 reported 4 seconds.
&lt;/p&gt;
&lt;p&gt;
The macruby interpreter reported 20-30 seconds, and the same is true for the binary made by macrubyc.
&lt;/p&gt;
&lt;p&gt;
I understand this isn't a bug, and you probably want a stable macruby before you look at stuff like this but i just thought i'd throw it out there.
&lt;/p&gt;
&lt;p&gt;
I should probably mention in other benchmarks I've tried, the macruby compiler came out on top.
&lt;/p&gt;
&lt;p&gt;
Thanks.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/568#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/613</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/613</guid>
        <title>#613: Dispatch classes should be wrapped in an Data struct to allow subclassing</title>
        <pubDate>Wed, 10 Feb 2010 21:29:05 GMT</pubDate>
          <dc:creator>ernest.prabhakar@…</dc:creator>
        <description>&lt;p&gt;
The gcd.c implementation has this cryptic comment:
&lt;/p&gt;
&lt;p&gt;
// TODO: These structures need to be wrapped in a Data struct,
// otherwise there are crashes when one tries to add an instance
// variable to a queue. (Not that that is a good idea.)
&lt;/p&gt;
&lt;p&gt;
At first I ignored this, but later it occurred to me that this may be why I am unable to subclass Dispatch::Group (to use for a Future, which contains an instance variable).  Is that correct?  If so, is there a particular reason why subclassing these would be  bad idea?
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/613#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/632</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/632</guid>
        <title>#632: performSelector behaves oddly.</title>
        <pubDate>Sun, 14 Mar 2010 04:05:38 GMT</pubDate>
          <dc:creator>rob@…</dc:creator>
        <description>&lt;p&gt;
Hi --
&lt;/p&gt;
&lt;p&gt;
performSelector behaves a little oddly when you try to use it on the built ins of Ruby.
&lt;/p&gt;
&lt;pre class="wiki"&gt;macruby-nightly &amp;gt; [1,2,3].performSelector(:pop)
ArgumentError: wrong number of arguments (-2055090267 for 1)
	from /Users/robertgleeson/Projects/Ruby/sinatra-effigy/(irb):1:in `&amp;lt;main&amp;gt;'
&lt;/pre&gt;&lt;p&gt;
&lt;a class="source" href="http://www.macruby.org/trac/log/?revs=1-3"&gt;[1,2,3]&lt;/a&gt;.send(:pop) works fine. In another case, performSelector() caused a seg fault but I can't remember what I did :-X
&lt;/p&gt;
&lt;p&gt;
I'm only starting to learn Objective C and came across this when I wanted to see how Objective C methods worked from within &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/632#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/643</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/643</guid>
        <title>#643: Yield fails when captured in a block that gets called</title>
        <pubDate>Wed, 31 Mar 2010 21:01:53 GMT</pubDate>
          <dc:creator>tpitale@…</dc:creator>
        <description>&lt;p&gt;
Works in 1.9.1 and 1.9.2, fails with "LocalJumpError; no block given" in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; nightly from 3/30/2010.
&lt;/p&gt;
&lt;p&gt;
&lt;a class="ext-link" href="http://gist.github.com/350892"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://gist.github.com/350892&lt;/a&gt;
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/643#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/674</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/674</guid>
        <title>#674: Shoulda fails because of oddity with block_given?</title>
        <pubDate>Mon, 03 May 2010 21:50:42 GMT</pubDate>
          <dc:creator>marick@…</dc:creator>
        <description>&lt;p&gt;
The attached file shows that shoulda (on 0.5 and a recent version of 0.7) behaves incorrectly. The important part is this:
&lt;/p&gt;
&lt;pre class="wiki"&gt;  should "test something" do
    puts "I should be printed"
  end
&lt;/pre&gt;&lt;p&gt;
The correct output shows that a test has been run:
&lt;/p&gt;
&lt;pre class="wiki"&gt;   1274 $ ruby shoulda-problem.rb
   ...
   I should be printed
&lt;/pre&gt;&lt;p&gt;
With Macruby, you get this:
&lt;/p&gt;
&lt;pre class="wiki"&gt;1275 $ macruby shoulda-problem.rb
  * DEFERRED: Samples should test something.
&lt;/pre&gt;&lt;p&gt;
The problem is in this code:
&lt;/p&gt;
&lt;pre class="wiki"&gt;    def should(name, options = {}, &amp;amp;blk)
      if Shoulda.current_context
        block_given? ? Shoulda.current_context.should(name, options, &amp;amp;blk) : Shoulda.current_context.should_eventually(name)
      else
        context_name = self.name.gsub(/Test/, "")
        context = Shoulda::Context.new(context_name, self) do
==&amp;gt;          block_given? ? should(name, options, &amp;amp;blk) : should_eventually(name)
        end
        context.build
      end
    end
&lt;/pre&gt;&lt;p&gt;
In Ruby 1.8.6 (and 1.9, I suppose, because Shoulda is said to work on 1.9), the block_given? inside a block given to an initializer is supposed to evaluate to true. (!!!) In Macruby, it evaluates to False.
&lt;/p&gt;
&lt;p&gt;
This problem is easy to patch (and I'd be inclined to think the Shoulda people should, given that the code is tricksy). Still, it is a deviation from reference Ruby behavior.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/674#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/698</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/698</guid>
        <title>#698: AddressBook framework doesn't load in TextMate</title>
        <pubDate>Fri, 07 May 2010 07:58:38 GMT</pubDate>
          <dc:creator>seanlilmateus@…</dc:creator>
        <description>&lt;p&gt;
When I try to run the code below in Textmate e.g, the "AddressBook framework" doesn't load, others framework seems to work; It works with Macirb.
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="c1"&gt;#!/usr/local/bin/macruby&lt;/span&gt;
framework &lt;span class="s1"&gt;'AddressBook'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Xcode projects have also problem with the AddressBook framework! it used to work with macruby 0.5, now it begins to run and break with:
&lt;/p&gt;
&lt;pre class="wiki"&gt;`block': uninitialized constant Controller::KABFirstNameProperty (NameError)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/698#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/734</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/734</guid>
        <title>#734: Mustache fails on call to render.</title>
        <pubDate>Mon, 31 May 2010 23:46:37 GMT</pubDate>
          <dc:creator>larry@…</dc:creator>
        <description>&lt;p&gt;
Unable to render a Mustache template using the 'mustache' gem. Works as expected in Ruby 1.8.7.
&lt;/p&gt;
&lt;p&gt;
In &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;, programs freeze on the call to render. I tried using the macruby debugger to narrow the issue, but I could not. So I forked the mustache source on GitHub and it looks like Mustache::Template.render makes a recursive call that freezes &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt;.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/734#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/749</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/749</guid>
        <title>#749: Regexp issues / crashes affecting StringScanner</title>
        <pubDate>Thu, 17 Jun 2010 06:05:10 GMT</pubDate>
          <dc:creator>kitchen.andy@…</dc:creator>
        <description>&lt;p&gt;
StringScanner fails to match a certain regular expressions properly.
and diverges from MRI.
&lt;/p&gt;
&lt;p&gt;
[EDIT] See comments.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/749#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/751</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/751</guid>
        <title>#751: Objects instantiated as anonymous class by	Bindings mechanism</title>
        <pubDate>Thu, 17 Jun 2010 21:08:58 GMT</pubDate>
          <dc:creator>wladjmir@…</dc:creator>
        <description>&lt;p&gt;
there is a problem with bindings mechanism in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.6 :
&lt;/p&gt;
&lt;p&gt;
- create a new &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Document based project
&lt;/p&gt;
&lt;p&gt;
- MyDocument.nib
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
create a new ObjectController binded with File's Owner Content, model key path "dummy"
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;
create a new text field binded with ObjectController selection, model key path "name"
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
- MyDocument.rb
&lt;/p&gt;
&lt;pre class="wiki"&gt;class MyDocument &amp;lt; NSDocument
	attr_accessor :dummy
	def init
		super
		setDummy({"name"=&amp;gt;"dummy"})
		puts "in init class of Hash is : #{@dummy.class.ancestors}"
		return self
	end
	def windowNibName
		'MyDocument'
	end
	# Document data representation for saving (return NSData)
	def dataOfType(type, error:outError)
		puts "in save class of Hash is : #{@dummy.class.ancestors}"
		return true
	end
	# Read document from data (return non-nil on success)
	def readFromData(data, ofType:type, error:outError)
		return true
	end
	# Return lowercase 'untitled', to comply with HIG
	def displayName
		fileURL ? super : super.sub(/^[[:upper:]]/) {|s| s.downcase}
	end
end
&lt;/pre&gt;&lt;p&gt;
bindings works, but when i try for to save the document, or already in the windowDidLoad (NSWindowController) method...
&lt;/p&gt;
&lt;pre class="wiki"&gt;in init class of Hash is : [Hash, NSMutableDictionary, NSDictionary, Enumerable, NSObject, Kernel]
in save class of Hash is : [#&amp;lt;Class:0x200577420&amp;gt;, Hash, NSMutableDictionary, NSDictionary, Enumerable, NSObject, Kernel]
&lt;/pre&gt;&lt;p&gt;
of course if i try to serialize the object i obtain :
&lt;/p&gt;
&lt;pre class="wiki"&gt;
`fileWrapperOfType:error:': can't dump anonymous class #&amp;lt;Class:..........&amp;gt; (TypeError)
&lt;/pre&gt;&lt;p&gt;
if i remove the bindings with text field all works again...well i mean no data in it, but at least the class of object remain the same
&lt;/p&gt;
&lt;p&gt;
as workaround i can create the hash via NSMutableDictionary.dictionary or in my case :
&lt;/p&gt;
&lt;pre class="wiki"&gt;temp = YAML::load( NSString.alloc.initWithData( fileWrapper.regularFileContents, encoding:NSString.defaultCStringEncoding))
@data =	NSMutableDictionary.dictionary
@data.setDictionary(temp)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/751#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/817</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/817</guid>
        <title>#817: External iterators returning nil</title>
        <pubDate>Thu, 29 Jul 2010 13:22:11 GMT</pubDate>
          <dc:creator>kennylovrin@…</dc:creator>
        <description>&lt;p&gt;
Trying to use the "next" method of an external iterator showed the following problem:
&lt;/p&gt;
&lt;p&gt;
iMac:~ kenny$ macruby -v
&lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.7 (ruby 1.9.2) [universal-darwin10.0, x86_64]
iMac:~ kenny$ macirb
irb(main):001:0&amp;gt; i = ["one", "two"].each
=&amp;gt; #&amp;lt;Enumerator:0x2000faa60&amp;gt;
irb(main):002:0&amp;gt; i.next
=&amp;gt; nil
irb(main):003:0&amp;gt; i.next
=&amp;gt; nil
irb(main):004:0&amp;gt;
&lt;/p&gt;
&lt;p&gt;
iMac:~ kenny$ ruby -v
ruby 1.8.7 (2009-06-12 patchlevel 174) [universal-darwin10.0]
iMac:~ kenny$ irb
&lt;/p&gt;
&lt;blockquote class="citation"&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
 i = ["one", "two"].each
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;
=&amp;gt; #&amp;lt;Enumerable::Enumerator:0x101270900&amp;gt;
&lt;/p&gt;
&lt;blockquote class="citation"&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
 i.next
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;
=&amp;gt; "one"
&lt;/p&gt;
&lt;blockquote class="citation"&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
 i.next
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;
=&amp;gt; "two"
&lt;/p&gt;
&lt;blockquote class="citation"&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;
As I understand, this is a defect as I haven't found any indications that it shouldn't work?
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/817#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/848</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/848</guid>
        <title>#848: Recieving SIGABRT signal from GDB</title>
        <pubDate>Thu, 12 Aug 2010 00:22:04 GMT</pubDate>
          <dc:creator>cameron@…</dc:creator>
        <description>&lt;p&gt;
I am working on a program using &lt;a class="ext-link" href="http://brandonwalkin.com/bwtoolkit/"&gt;&lt;span class="icon"&gt; &lt;/span&gt;BWToolkit&lt;/a&gt; for the custom views and have run into some errors. I'm unsure if this is an issue with &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; or with the toolkit itself, so please advise.
&lt;/p&gt;
&lt;p&gt;
With a program using this controller: &lt;a class="ext-link" href="http://gist.github.com/519938"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://gist.github.com/519938&lt;/a&gt; compiling it under Xcode 3.2.3 and &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; 0.6, I get an error of:
&lt;/p&gt;
&lt;pre class="wiki"&gt;uncaught Objective-C/C++ exception...
2010-08-11 17:15:45.989 zebra[374:a0f] An uncaught exception was raised
2010-08-11 17:15:45.992 zebra[374:a0f] *** -[NSKeyedUnarchiver decodeObjectForKey:]: cannot decode object of class (BWSplitView)
2010-08-11 17:15:45.995 zebra[374:a0f] *** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: '*** -[NSKeyedUnarchiver decodeObjectForKey:]: cannot decode object of class (BWSplitView)'
*** Call stack at first throw:
(
	0   CoreFoundation                      0x00007fff841c6cc4 __exceptionPreprocess + 180
	1   libobjc.A.dylib                     0x00007fff80eb50f3 objc_exception_throw + 45
	2   CoreFoundation                      0x00007fff841c6ae7 +[NSException raise:format:arguments:] + 103
	3   CoreFoundation                      0x00007fff841c6a74 +[NSException raise:format:] + 148
	4   Foundation                          0x00007fff88858a86 _decodeObjectBinary + 2427
	5   Foundation                          0x00007fff88859805 -[NSKeyedUnarchiver _decodeArrayOfObjectsForKey:] + 1229
	6   Foundation                          0x00007fff88859d45 -[NSArray(NSArray) initWithCoder:] + 462
	7   Foundation                          0x00007fff88858aff _decodeObjectBinary + 2548
	8   Foundation                          0x00007fff88857f79 _decodeObject + 208
	9   AppKit                              0x00007fff8769c47a -[NSView initWithCoder:] + 362
	10  Foundation                          0x00007fff88858aff _decodeObjectBinary + 2548
	11  Foundation                          0x00007fff88857f79 _decodeObject + 208
	12  AppKit                              0x00007fff876aa83b -[NSWindowTemplate initWithCoder:] + 3824
	13  Foundation                          0x00007fff88858aff _decodeObjectBinary + 2548
	14  Foundation                          0x00007fff88859805 -[NSKeyedUnarchiver _decodeArrayOfObjectsForKey:] + 1229
	15  Foundation                          0x00007fff88859248 -[NSSet(NSSet) initWithCoder:] + 447
	16  Foundation                          0x00007fff88858aff _decodeObjectBinary + 2548
	17  Foundation                          0x00007fff88857f79 _decodeObject + 208
	18  AppKit                              0x00007fff8762c55a -[NSIBObjectData initWithCoder:] + 1983
	19  Foundation                          0x00007fff88858aff _decodeObjectBinary + 2548
	20  Foundation                          0x00007fff88857f79 _decodeObject + 208
	21  AppKit                              0x00007fff8762bc89 loadNib + 146
	22  AppKit                              0x00007fff8762b1e9 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 248
	23  AppKit                              0x00007fff8762b021 +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 326
	24  AppKit                              0x00007fff876285a3 NSApplicationMain + 279
	25  ???                                 0x00000001012291e0 0x0 + 4314010080
	26  libmacruby.dylib                    0x000000010013d81a rb_vm_dispatch + 3450
	27  ???                                 0x0000000101200630 0x0 + 4313843248
	28  libmacruby.dylib                    0x000000010014f9ac rb_vm_run + 348
	29  libmacruby.dylib                    0x00000001000431e9 ruby_run_node + 73
	30  libmacruby.dylib                    0x000000010014fcb8 macruby_main + 360
	31  zebra                               0x0000000100000e85 main + 40
	32  zebra                               0x0000000100000cdc start + 52
	33  ???                                 0x0000000000000001 0x0 + 1
)
terminate called after throwing an instance of 'NSException'
Program received signal:  “SIGABRT”.
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/848#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/851</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/851</guid>
        <title>#851: bug in yield while inside Proc#call</title>
        <pubDate>Tue, 17 Aug 2010 08:37:00 GMT</pubDate>
          <dc:creator>dave.baldwin@…</dc:creator>
        <description>&lt;p&gt;
With the following rakefile:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;task &lt;span class="ss"&gt;:default&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="ss"&gt;:run&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;transformTask&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt;
  task &lt;span class="ss"&gt;:run&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="k"&gt;yield&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
transformTask &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s1"&gt;'Done'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
running rake gives:
&lt;/p&gt;
&lt;pre class="wiki"&gt;Done
&lt;/pre&gt;&lt;p&gt;
while running Macrake gives:
&lt;/p&gt;
&lt;pre class="wiki"&gt;rake aborted!
no block given
&lt;/pre&gt;&lt;p&gt;
Changing the rakefile to be:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;task &lt;span class="ss"&gt;:default&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="ss"&gt;:run&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;transformTask&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;block&lt;span class="p"&gt;)&lt;/span&gt;
  task &lt;span class="ss"&gt;:run&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
    block&lt;span class="o"&gt;.&lt;/span&gt;call
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
transformTask &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s1"&gt;'Done'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
will now give the same result for rake and macrake.
&lt;/p&gt;
&lt;p&gt;
This may just be a 1.8 vs. 1.9 difference or a bug in macruby.
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby -v
MacRuby version 0.6 (ruby 1.9.0) [universal-darwin10.0, x86_64]
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/851#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/854</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/854</guid>
        <title>#854: Time and NSDate cannot be compared with Comparable operators</title>
        <pubDate>Tue, 17 Aug 2010 23:33:45 GMT</pubDate>
          <dc:creator>massicotte@…</dc:creator>
        <description>&lt;p&gt;
Time is now relatively equivalent to NSDate, but they cannot be compared with the Comparable operators.  If compare: works, &amp;lt;=&amp;gt; should be implemented as well.
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macirb
irb(main):001:0&amp;gt; date = NSDate.date
=&amp;gt; #&amp;lt;__NSCFDate:0x20023d3a0&amp;gt;
irb(main):002:0&amp;gt; time = Time.now
=&amp;gt; 2010-08-17 16:28:46 -0700
irb(main):003:0&amp;gt; time &amp;lt; date
ArgumentError: comparison of Time with __NSCFDate failed
irb(main):005:0&amp;gt; date.compare(time)
=&amp;gt; -1
irb(main):006:0&amp;gt; time.compare(date)
=&amp;gt; 1
irb(main):007:0&amp;gt;
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/854#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/855</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/855</guid>
        <title>#855: MacRuby should load the "rubygems" automatically.</title>
        <pubDate>Wed, 18 Aug 2010 05:52:37 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;pre class="wiki"&gt;$ ruby -v -e "p Gem.class"
ruby 1.9.1p429 (2010-07-02 revision 28523) [i386-darwin10]
Module
$ /usr/bin/ruby -v -e "p Gem.class"
ruby 1.8.7 (2009-06-12 patchlevel 174) [universal-darwin10.0]
-e:1: uninitialized constant Gem (NameError)
$ macruby -v -e "p Gem.class"
MacRuby 0.7 (ruby 1.9.2) [universal-darwin10.0, x86_64]
/Users/watson/src/MacRuby/-e:1:in `&amp;lt;main&amp;gt;': uninitialized constant Gem (NameError)
&lt;/pre&gt;&lt;pre class="wiki"&gt;$ cat test.rb
#!ruby
$LOADED_FEATURES.each do |file|
  puts file
end
&lt;/pre&gt;&lt;p&gt;
Runs above script, I found that the "rubygems" is loaded automatically with Ruby 1.9.
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test.rb
enumerator.so
/opt/local/lib/ruby1.9/1.9.1/i386-darwin10/enc/encdb.bundle
/opt/local/lib/ruby1.9/1.9.1/i386-darwin10/enc/trans/transdb.bundle
/opt/local/lib/ruby1.9/1.9.1/rubygems.rb
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/855#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/863</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/863</guid>
        <title>#863: String#succ is broken.</title>
        <pubDate>Fri, 20 Aug 2010 12:47:10 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat test_succ&lt;span class="o"&gt;.&lt;/span&gt;rb
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"No.9"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;succ  &lt;span class="c1"&gt;# =&amp;gt; "No.10"&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"-9"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;succ    &lt;span class="c1"&gt;# =&amp;gt; "-10"&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"+9"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;succ    &lt;span class="c1"&gt;# =&amp;gt; "+10"&lt;/span&gt;
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\377&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;succ  &lt;span class="c1"&gt;# =&amp;gt; "\001\000"&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_succ.rb
"No.10"
"-10"
"+10"
"\x01\x00"
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_succ.rb
"Np.0"
"1-0"
"1+0"
/Users/watson/src/MacRuby/test_succ.rb:1:in `&amp;lt;main&amp;gt;': cannot make receiver data as Unicode characters (ArgumentError)
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/863#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/865</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/865</guid>
        <title>#865: String#lines(separator) is broken when specified separator == "".</title>
        <pubDate>Fri, 20 Aug 2010 13:16:08 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat test_lines&lt;span class="o"&gt;.&lt;/span&gt;rb
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"hello&lt;/span&gt;&lt;span class="se"&gt;\n\n\n&lt;/span&gt;&lt;span class="s2"&gt;world"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;lines&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;to_a
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"hello&lt;/span&gt;&lt;span class="se"&gt;\n\n\n&lt;/span&gt;&lt;span class="s2"&gt;world"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;lines&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'\n'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;to_a
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="s2"&gt;"hello&lt;/span&gt;&lt;span class="se"&gt;\n\n\n&lt;/span&gt;&lt;span class="s2"&gt;world"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;lines&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;to_a
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_lines.rb
["hello\n", "\n", "\n", "world"]
["hello\n\n\nworld"]
["hello\n\n\n", "world"]
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_lines.rb
["hello\n", "\n", "\n", "world"]
["hello\n\n\nworld"]
["hello\n", "\n", "\n", "world"]
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/865#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/868</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/868</guid>
        <title>#868: Should not get a value until calling Hash#rehash when Object of Hash's key was changed.</title>
        <pubDate>Sat, 21 Aug 2010 07:20:29 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; cat test_rehash&lt;span class="o"&gt;.&lt;/span&gt;rb
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;assert_equal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;a&lt;span class="p"&gt;,&lt;/span&gt; b&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="nb"&gt;p&lt;/span&gt; b
  &lt;span class="nb"&gt;p&lt;/span&gt; a &lt;span class="o"&gt;==&lt;/span&gt; b
  &lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"-----"&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;assert_nil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;a&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="nb"&gt;p&lt;/span&gt; a
  &lt;span class="nb"&gt;p&lt;/span&gt; a &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kp"&gt;nil&lt;/span&gt;
  &lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"-----"&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
a &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;"a"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"b"&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
c &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;"c"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"d"&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
h &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; a &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; c &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;300&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
assert_equal&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; h&lt;span class="o"&gt;[&lt;/span&gt;a&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
a&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"z"&lt;/span&gt;
assert_nil&lt;span class="p"&gt;(&lt;/span&gt;h&lt;span class="o"&gt;[&lt;/span&gt;a&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
h&lt;span class="o"&gt;.&lt;/span&gt;rehash
assert_equal&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; h&lt;span class="o"&gt;[&lt;/span&gt;a&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result of Ruby 1.9.1:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby test_rehash.rb
100
true
-----
nil
true
-----
100
true
-----
&lt;/pre&gt;&lt;p&gt;
Result of &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; Trunk:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ macruby test_rehash.rb
100
true
-----
100
false
-----
100
true
-----
&lt;/pre&gt;&lt;p&gt;
This problem may be related to &lt;a class="new ticket" href="http://www.macruby.org/trac/ticket/791" title="defect: Array#hash is broken. (new)"&gt;#791&lt;/a&gt;.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/868#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/913</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/913</guid>
        <title>#913: Aliases of setter methods created by attr_writer produce erroneous results</title>
        <pubDate>Wed, 22 Sep 2010 18:36:01 GMT</pubDate>
          <dc:creator>mred@…</dc:creator>
        <description>&lt;p&gt;
Aliases of setter methods created by attr_writer do not write their values to the original attribute
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ cat test.rb
puts MACRUBY_REVISION
class A
  attr_writer :x
  alias :y= :x=
  alias :setY :setX
  alias :foo :setX
end
obj = A.new
obj.y = 1
puts obj.inspect
obj.setY 2
puts obj.inspect
obj.foo 3
puts obj.inspect
$ macruby test.rb
svn revision 4533 from http://svn.macosforge.org/repository/ruby/MacRuby/trunk
#&amp;lt;A:0x2000c5a00 @x=1&amp;gt;
#&amp;lt;A:0x2000c5a00 @x=1 @y=2&amp;gt;
#&amp;lt;A:0x2000c5a00 @x=1 @y=2 @=3&amp;gt;
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/913#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/915</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/915</guid>
        <title>#915: ControlTower - provide some mechanism for upload progress reporting</title>
        <pubDate>Wed, 22 Sep 2010 23:13:58 GMT</pubDate>
          <dc:creator>russm-trac-macports-org@…</dc:creator>
        <description>&lt;p&gt;
ControlTower should provide some way for applications to do upload progress reporting - either as an integrated feature, or by receiving only the request headers and then passing a streaming env&lt;a class="missing wiki"&gt;rack.input?&lt;/a&gt; to the application so that UPR (&lt;a class="ext-link" href="http://upr.bogomips.org/"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://upr.bogomips.org/&lt;/a&gt;) or similar can be used.
&lt;/p&gt;
&lt;p&gt;
see: &lt;a class="ext-link" href="http://lists.macosforge.org/pipermail/macruby-devel/2010-September/006061.html"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://lists.macosforge.org/pipermail/macruby-devel/2010-September/006061.html&lt;/a&gt;
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/915#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/918</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/918</guid>
        <title>#918: Startup Time</title>
        <pubDate>Mon, 27 Sep 2010 12:25:26 GMT</pubDate>
          <dc:creator>lp@…</dc:creator>
        <description>&lt;p&gt;
Startup time encumbers general performance.
As of now it is reported to be around 0.1s.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/918#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/942</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/942</guid>
        <title>#942: feature: Please implement Pointer#to_a, Pointer#each.</title>
        <pubDate>Fri, 08 Oct 2010 02:45:13 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
I hope to implement Pointer#to_a, Pointer#each, because it is serious to take out the value of Pointer instances.
&lt;/p&gt;
&lt;p&gt;
Now:
&lt;/p&gt;
&lt;pre class="wiki"&gt;framework "JavaScriptCore"
string = JSStringCreateWithUTF8CString("hello")
size = JSStringGetMaximumUTF8CStringSize(string)
buffer = Pointer.new('c', size)
ret = JSStringGetUTF8CString(string, buffer, size)
ary = []
(ret - 1).times do |i|
  ary &amp;lt;&amp;lt; buffer[i]
end
puts ary.pack('c*')
&lt;/pre&gt;&lt;p&gt;
If possible, I want to write as following:
&lt;/p&gt;
&lt;pre class="wiki"&gt;framework "JavaScriptCore"
string = JSStringCreateWithUTF8CString("hello")
size = JSStringGetMaximumUTF8CStringSize(string)
buffer = Pointer.new('c', size)
ret = JSStringGetUTF8CString(string, buffer, size)
puts buffer.to_a.pack('c*')
&lt;/pre&gt;&lt;pre class="wiki"&gt;framework "JavaScriptCore"
string = JSStringCreateWithUTF8CString("hello")
size = JSStringGetMaximumUTF8CStringSize(string)
buffer = Pointer.new('c', size)
ret = JSStringGetUTF8CString(string, buffer, size)
ary = []
buffer.each do |byte|
  ary &amp;lt;&amp;lt; byte
end
puts ary.pack('c*')
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/942#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/952</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/952</guid>
        <title>#952: Should set got string to $_ when calls StringIO#gets #readline.</title>
        <pubDate>Mon, 11 Oct 2010 11:27:03 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s1"&gt;'stringio'&lt;/span&gt;
str &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;StringIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"hello world!"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
s &lt;span class="o"&gt;=&lt;/span&gt; str&lt;span class="o"&gt;.&lt;/span&gt;gets
&lt;span class="nb"&gt;p&lt;/span&gt; s
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="vg"&gt;$_&lt;/span&gt;
str &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;StringIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"1234"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
s &lt;span class="o"&gt;=&lt;/span&gt; str&lt;span class="o"&gt;.&lt;/span&gt;readline
&lt;span class="nb"&gt;p&lt;/span&gt; s
&lt;span class="nb"&gt;p&lt;/span&gt; &lt;span class="vg"&gt;$_&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$  ruby19 -v test_stringio.rb
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]
"hello world!"
"hello world!"
"1234"
"1234"
$ macruby test_stringio.rb
"hello world!"
nil
"1234"
nil
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/952#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/953</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/953</guid>
        <title>#953: StringIO#dup is broken.</title>
        <pubDate>Tue, 12 Oct 2010 03:31:56 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s1"&gt;'stringio'&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;assert_equal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;x&lt;span class="p"&gt;,&lt;/span&gt; y&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; x &lt;span class="o"&gt;==&lt;/span&gt; y
    &lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"ok"&lt;/span&gt;
  &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"ng : x = &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;x&lt;span class="o"&gt;.&lt;/span&gt;inspect&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; : y = &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;y&lt;span class="o"&gt;.&lt;/span&gt;inspect&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
f1 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;StringIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;new&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"1234"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
assert_equal&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; f1&lt;span class="o"&gt;.&lt;/span&gt;getc&lt;span class="p"&gt;)&lt;/span&gt;
f2 &lt;span class="o"&gt;=&lt;/span&gt; f1&lt;span class="o"&gt;.&lt;/span&gt;dup
assert_equal&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"2"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; f2&lt;span class="o"&gt;.&lt;/span&gt;getc&lt;span class="p"&gt;)&lt;/span&gt;
assert_equal&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"3"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; f1&lt;span class="o"&gt;.&lt;/span&gt;getc&lt;span class="p"&gt;)&lt;/span&gt;
assert_equal&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"4"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; f2&lt;span class="o"&gt;.&lt;/span&gt;getc&lt;span class="p"&gt;)&lt;/span&gt;
assert_equal&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; f1&lt;span class="o"&gt;.&lt;/span&gt;getc&lt;span class="p"&gt;)&lt;/span&gt;
assert_equal&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; f2&lt;span class="o"&gt;.&lt;/span&gt;eof?&lt;span class="p"&gt;)&lt;/span&gt;
f1&lt;span class="o"&gt;.&lt;/span&gt;close
assert_equal&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; f2&lt;span class="o"&gt;.&lt;/span&gt;closed?&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby19 -v test_stringio.rb
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]
ok
ok
ok
ok
ok
ok
ok
$ macruby -v test_stringio.rb
MacRuby 0.8 (ruby 1.9.2) [universal-darwin10.0, x86_64]
ok
ok
ng : x = "3" : y = "2"
ng : x = "4" : y = "3"
ng : x = nil : y = "3"
ng : x = true : y = false
ng : x = true : y = false
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/953#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/960</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/960</guid>
        <title>#960: Please delete the description of "Users on Leopard (10.5) ... " in MacRuby 0.6</title>
        <pubDate>Tue, 19 Oct 2010 11:13:37 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
There was the person who was trying to build &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; on Mac OS X 10.5.
&lt;/p&gt;
&lt;p&gt;
In &lt;a class="ext-link" href="http://www.macruby.org/blog/2010/04/30/macruby06.html"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://www.macruby.org/blog/2010/04/30/macruby06.html&lt;/a&gt;,
He watched the
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
"Users on Leopard (10.5) can also use &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; by building the sources from our repository."
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
and seems to have tried build.
&lt;/p&gt;
&lt;p&gt;
I think should delete the above description.
&lt;/p&gt;
&lt;p&gt;
It seems he does not have known &lt;a class="closed ticket" href="http://www.macruby.org/trac/ticket/805" title="defect: Can't build MacRuby0.6 on Mac OSX 10.5.8 with llvm(rev89156) (closed: wontfix)"&gt;#805&lt;/a&gt;.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/960#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/997</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/997</guid>
        <title>#997: FIxnum.new gives a strange error on MacRuby</title>
        <pubDate>Mon, 15 Nov 2010 01:28:44 GMT</pubDate>
          <dc:creator>mrada@…</dc:creator>
        <description>&lt;p&gt;
With Ruby 1.9.2 I am told that Fixnum does not have a method called #new, but &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; is telling me that I am passing the wrong number of arguments.
&lt;/p&gt;
&lt;p&gt;
irb(main):002:0&amp;gt; Fixnum.new
ArgumentError: wrong number of arguments (0 for 0)
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/997#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/1005</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/1005</guid>
        <title>#1005: How could macrubyd be used to debug a Cocoa app?</title>
        <pubDate>Mon, 22 Nov 2010 20:18:49 GMT</pubDate>
          <dc:creator>rap@…</dc:creator>
        <description>&lt;p&gt;
I'm looking for a way to use macrubyd with a Cocoa app.  Is there a way?
&lt;/p&gt;
&lt;p&gt;
I understand that macrubyd does not integrate with XCode like GDB, and that I won't be able to click on a line in a source editor to set a breakpoint, or interactively click around in a data inspector.  I'm just looking for any way, no matter how rough, to break a Cocoa app's execution at a certain point and then interact with a macrubyd session.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/1005#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/1009</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/1009</guid>
        <title>#1009: Can't set status of taint and untrust to Float Object.</title>
        <pubDate>Wed, 24 Nov 2010 21:18:37 GMT</pubDate>
          <dc:creator>watson1978@…</dc:creator>
        <description>&lt;p&gt;
Test Script:
&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;f &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;
f&lt;span class="o"&gt;.&lt;/span&gt;taint
f&lt;span class="o"&gt;.&lt;/span&gt;untrust
f&lt;span class="o"&gt;.&lt;/span&gt;freeze
&lt;span class="nb"&gt;p&lt;/span&gt; f&lt;span class="o"&gt;.&lt;/span&gt;class
&lt;span class="nb"&gt;p&lt;/span&gt; f&lt;span class="o"&gt;.&lt;/span&gt;tainted?
&lt;span class="nb"&gt;p&lt;/span&gt; f&lt;span class="o"&gt;.&lt;/span&gt;untrusted?
&lt;span class="nb"&gt;p&lt;/span&gt; f&lt;span class="o"&gt;.&lt;/span&gt;frozen?
&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
Result:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$ ruby19 -v tt.rb
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]
Float
true
true
true
$ macruby -v tt.rb
MacRuby 0.8 (ruby 1.9.2) [universal-darwin10.0, x86_64]
Float
false
false
true
&lt;/pre&gt;</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/1009#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/301</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/301</guid>
        <title>#301: minor correction to Overview page</title>
        <pubDate>Fri, 31 Jul 2009 05:22:48 GMT</pubDate>
          <dc:creator>rdm@…</dc:creator>
        <description>&lt;p&gt;
I think "handful" should be "helpful", as shown in the patch.
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/301#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/429</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/429</guid>
        <title>#429: Floating point comparison</title>
        <pubDate>Tue, 10 Nov 2009 20:19:52 GMT</pubDate>
          <dc:creator>jens.nockert@…</dc:creator>
        <description>&lt;p&gt;
Some floating point comparisons seem to be giving different results in &lt;a class="wiki" href="http://www.macruby.org/trac/wiki/MacRuby"&gt;MacRuby&lt;/a&gt; and in MRI.
&lt;/p&gt;
&lt;p&gt;
macirb &amp;gt; (0.5 - 0.4) &amp;lt;= 0.1
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
=&amp;gt; false
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
mriirb &amp;gt; (0.5 - 0.4) &amp;lt;= 0.1
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
=&amp;gt; true
&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/429#changelog</comments>
    </item><item>
        <link>http://www.macruby.org/trac/ticket/670</link>
        <guid isPermaLink="false">http://www.macruby.org/trac/ticket/670</guid>
        <title>#670: A more idiomatic rb_main for MacRuby applications</title>
        <pubDate>Sun, 02 May 2010 21:09:16 GMT</pubDate>
          <dc:creator>dev@…</dc:creator>
        <description>&lt;p&gt;
Creating ticket as per:
&lt;a class="ext-link" href="http://twitter.com/kch/status/13253559356"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://twitter.com/kch/status/13253559356&lt;/a&gt;
&lt;a class="ext-link" href="http://twitter.com/lrz/status/13264488310"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://twitter.com/lrz/status/13264488310&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
Code here:
&lt;a class="ext-link" href="http://gist.github.com/387246"&gt;&lt;span class="icon"&gt; &lt;/span&gt;http://gist.github.com/387246&lt;/a&gt;
&lt;/p&gt;
</description>
        <category>Results</category>
        <comments>http://www.macruby.org/trac/ticket/670#changelog</comments>
    </item>
 </channel>
</rss>